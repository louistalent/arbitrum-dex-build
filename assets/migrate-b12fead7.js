import{d as R,c as r,cg as K,s as c,G as M,C as p,B as $,D as t,H as s,v as o,t as I,U,a0 as oo,_ as fo,av as Do,u as To,a1 as z,j as Ho,a8 as Mo,a9 as Go,a7 as wo,a2 as xo,aQ as Bo,ak as So,bj as uo,af as jo,ag as qo,o as po,p as lo,y as L,ax as ao,ch as Ao,aO as X,F as Y,aw as Qo,a as go,ci as yo,aa as Io,ay as Wo,ba as Lo,cj as Xo,ah as Zo,a6 as Jo,as as _o,z as mo,O as Ko,Z as Yo,aC as oe,b as vo,aF as ee,b2 as te,ck as ae,bq as ne}from"./index-4a1c513c.js";import{_ as Oo}from"./BalLoadingBlock.vue_vue_type_style_index_0_lang-3fa460ee.js";import{C as se}from"./Col3Layout-4539059c.js";import{b as le,u as ie,R as re}from"./useRelayerApprovalTx-95afc1c6.js";import{_ as Co}from"./ArrowDownIcon-0d72bb47.js";import{_ as Vo}from"./BalCheckbox-b97e4661.js";import{_ as ce,S as ue}from"./SwapSettingsPopover.vue_vue_type_style_index_0_lang-1d919268.js";import{_ as de}from"./BalCircle-e6fd1d55.js";import{_ as me}from"./BalActionSteps.vue_vue_type_script_setup_true_lang-78b4efb6.js";import{_ as fe}from"./useTransactionErrors-09c4ac25.js";import{_ as No}from"./BalAsset-fe687731.js";import{u as pe,H as ge}from"./poolLiquidity-de5c7424.js";import{u as Ro,p as _e}from"./pool-staking.provider-fee39c11.js";import{a as ve,_ as ke}from"./APRTooltip.vue_vue_type_script_setup_true_lang-0e752bc5.js";import"./tslib.es6-b45817b3.js";import"./useQueryHelpers-8cb4e6d7.js";const he={class:"p-4 w-full border-b dark:border-gray-900"},Pe={class:"p-4 -mt-2"},be={class:"text-sm text-secondary"},ye={class:"p-4 w-full border-b dark:border-gray-900"},Ie={class:"p-4 -mt-2"},$e={class:"text-sm text-secondary"},Te=R({__name:"MigrateExplainer",props:{poolMigrationInfo:null},setup(e){const l=e,a=r(()=>l.poolMigrationInfo.type===K.STABAL3_POOL);return(m,i)=>{const n=fo;return c(),M(oo,null,[p(n,{noPad:"",shadow:"none",class:"mb-5"},{default:$(()=>[t("div",he,[t("h6",null,s(m.$t("migratePool.migrateReason.title")),1)]),t("div",Pe,[t("div",be,s(m.$t("migratePool.migrateReason.description")),1)])]),_:1}),o(a)?(c(),I(n,{key:0,noPad:"",shadow:"none"},{default:$(()=>[t("div",ye,[t("h6",null,s(m.$t(`migratePool.${e.poolMigrationInfo.type}.whyMigrate.title`)),1)]),t("div",Ie,[t("div",$e,s(m.$t(`migratePool.${e.poolMigrationInfo.type}.whyMigrate.description`)),1)])]),_:1})):U("",!0)],64)}}}),Me={class:"flex justify-between items-center mt-4 text-sm text-gray-400 dark:text-gray-600"},we={class:"flex items-center"},xe={class:"ml-2"},Be=R({__name:"MigrateActions",props:{fromPool:null,toPool:null,disabled:{type:Boolean},actions:null,migratePoolState:null},emits:["setCurrentActionIndex"],setup(e){const l=e,{networkConfig:a}=Do(),{explorerLinks:m}=To(),{networkSlug:i}=Ho(),n=r(()=>l.migratePoolState.receipt?m.txLink(l.migratePoolState.receipt.transactionHash):"");return(u,P)=>{const v=me,f=Mo,O=Go,x=wo;return c(),M("div",null,[e.migratePoolState.confirmed?(c(),M(oo,{key:1},[t("div",Me,[t("div",we,[p(f,{name:"clock"}),t("span",xe,s(e.migratePoolState.confirmedAt),1)]),p(O,{href:o(n),external:"",noStyle:"",class:"group flex items-center"},{default:$(()=>[z(s(o(a).explorerName)+" ",1),p(f,{name:"arrow-up-right",size:"sm",class:"ml-px group-hover:text-pink-500 transition-colors"})]),_:1},8,["href"])]),p(x,{tag:"router-link",to:{name:"pool",params:{networkSlug:o(i),id:e.toPool.id}},color:"gray",outline:"",block:"",class:"mt-2"},{default:$(()=>[z(s(u.$t("goToMigratedPool")),1)]),_:1},8,["to"])],64)):(c(),I(v,{key:0,actions:e.actions,disabled:e.disabled,onSetCurrentActionIndex:P[0]||(P[0]=b=>u.$emit("setCurrentActionIndex",b))},null,8,["actions","disabled"]))])}}}),Se={class:"pl-6 list-disc"},Ae=R({__name:"MigratePoolRisks",props:{poolMigrationInfo:null},setup(e){return(l,a)=>{const m=fe;return c(),I(m,{type:"warning",title:l.$t("migratePool.previewModal.riskWarnings.title"),block:"",class:"mb-4"},{default:$(()=>[t("ul",Se,[(c(!0),M(oo,null,xo(e.poolMigrationInfo.riskI18nLabels,i=>(c(),M("li",{key:i,class:"pt-2"},s(l.$t(i)),1))),128))])]),_:1},8,["title"])}}}),Le={class:"relative mt-4 rounded-lg border dark:border-gray-700 divide-y dark:divide-gray-700"},Oe={class:"flex items-center p-3"},Ce={class:"font-semibold"},Ve={key:0,class:"ml-2"},Ne={class:"arrow-container"},Re={class:"flex items-center p-3 border-t dark:border-gray-900"},Fe={class:"font-semibold"},Ee=R({__name:"MigratePoolsInfo",props:{fromPool:null,fromPoolTokenInfo:null,toPoolTokenInfo:null},setup(e){const l=e,a=r(()=>{var m;return(m=Bo[l.fromPool.id])==null?void 0:m.showOldVHint});return(m,i)=>{const n=No,u=Co;return c(),M("div",Le,[t("div",Oe,[p(n,{address:e.fromPoolTokenInfo.address,class:"mr-3",size:36},null,8,["address"]),t("div",Ce,s(e.fromPoolTokenInfo.symbol),1),o(a)?(c(),M("div",Ve," ("+s(m.$t("migratePool.oldVersion"))+") ",1)):U("",!0)]),t("div",Ne,[p(u)]),t("div",Re,[p(n,{address:e.toPoolTokenInfo.address,class:"mr-3",size:36},null,8,["address"]),t("div",Fe,s(e.toPoolTokenInfo.symbol),1)])])}}});const Ue=So(Ee,[["__scopeId","data-v-e5b0f2bd"]]);function ze(e,l,a="0",m,i="0",n,u,P,v,f,O,x){var Po,bo;const b=uo(),{txListener:h,getTxConfirmedAt:B}=jo(),{addTransaction:eo}=qo(),{account:C,getSigner:H}=To(),{t:T}=po(),{oneHourInMs:S}=Xo(),{fNum:V}=lo(),{minusSlippageScaled:G}=pe(),{fetchPreferentialGaugeAddress:Z}=Ro(),F=L({init:!1,confirming:!1,confirmed:!1,confirmedAt:""}),j=L(""),N={label:T("migratePool.previewModal.actions.staked.title"),loadingLabel:T("migratePool.previewModal.actions.loading"),confirmingLabel:T("migratePool.confirming"),action:to.bind(null,ao(e,(Po=u.onchain)==null?void 0:Po.decimals).toString(),!0),stepTooltip:T("migratePool.previewModal.actions.migrationStep"),isSignAction:!1,isStakeAction:!0},J={label:T("migratePool.previewModal.actions.unstaked.title"),loadingLabel:T("migratePool.previewModal.actions.loading"),confirmingLabel:T("migratePool.confirming"),action:to.bind(null,ao(l,(bo=u.onchain)==null?void 0:bo.decimals).toString(),!1),stepTooltip:T("migratePool.previewModal.actions.migrationStep"),isSignAction:!1,isUnstakeAction:!0},no={label:T("migratePool.approve"),loadingLabel:T("checkWallet"),confirmingLabel:T("migratePool.approving"),stepTooltip:T("approveBatchRelayerTooltip"),action:so,isSignAction:!0},q=r(()=>{const d=[];return n&&d.push(N),m&&(Number(a)>Number(i)?d.unshift(J):d.push(J)),O.value||d.unshift(no),d}),io=r(()=>Ao.find(d=>d.fromPoolId===u.id)),k=r(()=>{var d;switch((d=io.value)==null?void 0:d.type){case K.AAVE_BOOSTED_POOL:return ho;case K.STABAL3_POOL:return Fo;case K.STMATIC_POOL:case K.XMATIC_POOL:return Eo;case K.MAI_POOL:return Uo;default:return ho}}),A=r(()=>{const d=H(),g=C.value,_=O.value?void 0:j.value,w=u.tokens.filter(y=>y.address.toLowerCase()!==u.address.toLowerCase()).map(y=>{var E;return ao(y.balance,((E=u.onchain)==null?void 0:E.decimals)||18).toString()});return{signer:d,signerAddress:g,_signature:_,_tokens:w}}),D=r(()=>q.value[x.value].isStakeAction?X(u,e):q.value[x.value].isUnstakeAction?X(u,l):"0"),Q=r(()=>V(D.value,Y.fiat));async function so(){var d;try{const g=new Date().getTime()+S/2,_=(d=Qo.vault)==null?void 0:d.instance,w=await _.getNextNonce(C.value),y=go.network.addresses.batchRelayer,E=_.interface.encodeFunctionData("setRelayerApproval",[C.value,y,!0]),W=await yo.signSetRelayerApprovalAuthorization(_,H(),y,E,g,w),co=yo.encodeCalldataAuthorization("0x",g,W);return j.value=co,j.value}catch(g){throw console.error(g),g}}async function to(d,g){let _=await k.value(d,g,"0");const w=await ko(d,g),y=G(w);_=await k.value(d,g,y);const W=await new Io(H()).raw.sendTransaction({to:_.to,data:_.data});return ro(W),W}async function ro(d){eo({id:d.hash,type:"tx",action:"migratePool",summary:T("transactionSummary.migratePool",[Q.value,v.symbol,f.symbol]),details:{fromPool:u,toPool:P,totalFiatPoolInvestment:Q.value}});const g=await h(d,{onTxConfirmed:async _=>{F.value.confirming=!1,F.value.receipt=_;const w=await B(_);F.value.confirmedAt=Wo(w)},onTxFailed:()=>{F.value.confirming=!1}});x.value+1===q.value.length&&(F.value.confirmed=g)}async function ko(d,g){const _=await k.value(d,g,"0"),y=await new Io(H()).raw.call({to:_.to,data:_.data});return _.decode(y,g)}function ho(d,g,_="0"){const{signerAddress:w,_signature:y,_tokens:E}=A.value;return uo().zaps.migrations.bbaUsd(w,d,_,g,E,y)}function Fo(d,g,_="0"){const{signerAddress:w,_signature:y}=A.value;return uo().zaps.migrations.stabal3(w,d,_,g,y)}async function Eo(d,g,_="0"){const{signerAddress:w,_signature:y}=A.value,E={id:u.id,address:u.address},W={id:P.id,address:P.address};if(g){const[co,zo]=await Promise.all([Z(u.address),Z(P.address)]);E.gauge=co,W.gauge=zo}return b.zaps.migrations.stables(w,E,W,d,_,g,[...Lo(u)],y)}function Uo(d,g,_="0"){const{signerAddress:w,_signature:y}=A.value;return b.zaps.migrations.maiusd(w,d,_,g,y)}return{getUserSignature:so,migrate:to,actions:q,migratePoolState:F,getExpectedBptOut:ko,fromFiatTotal:D}}const De={class:"summary-table"},He={class:"p-2"},Ge={class:"flex flex-col py-2"},je={class:"summary-table-row"},qe={class:"summary-table-label"},Qe={class:"summary-table-number"},We={class:"summary-table-row"},Xe={class:"summary-table-label"},Ze={class:"summary-table-number"},Je={class:"summary-table-label"},Ke={class:"summary-table-number"},Ye=R({__name:"MigrateSummary",props:{pool:null,fromTotal:null,toTotal:null,priceImpact:null,isLoadingBptOut:{type:Boolean},highPriceImpact:{type:Boolean,default:!1},summaryTitle:{default:void 0}},setup(e){const{fNum:l}=lo();return(a,m)=>{const i=Jo,n=Oo;return c(),M("div",De,[t("h6",He,s(e.summaryTitle||a.$t("summary")),1),t("div",Ge,[t("div",je,[t("div",qe,s(a.$t("totalToMigrate")),1),t("div",Qe,[z(" ~"+s(o(l)(e.fromTotal,o(Y).fiat))+" ",1),p(i,{text:a.$t("migratePool.tooltips.totalTo"),iconSize:"sm",class:"ml-2"},null,8,["text"])])]),t("div",We,[t("div",Xe,s(a.$t("newTotal")),1),t("div",Ze,[z(" ~"+s(o(l)(e.toTotal,o(Y).fiat))+" ",1),p(i,{text:a.$t("migratePool.tooltips.newTotal"),iconSize:"sm",class:"ml-2"},null,8,["text"])])]),t("div",{class:Zo(["summary-table-row",{"bg-red-50 dark:bg-red-500 text-red-500 dark:text-white":e.highPriceImpact}])},[t("div",Je,s(a.$t("priceImpact")),1),t("div",Ke,[e.isLoadingBptOut?(c(),I(n,{key:0,class:"w-10 h-6"})):(c(),M(oo,{key:1},[z(s(o(l)(e.priceImpact,o(Y).percent))+" ",1),p(i,{text:a.$t("tooltips.addLiquidity.priceImpact"),iconSize:"sm",iconName:e.highPriceImpact?"alert-triangle":"info",iconClass:e.highPriceImpact?"text-red-500 dark:text-white":"text-gray-300",width:"72",class:"ml-2"},null,8,["text","iconName","iconClass"])],64))])],2)])])}}});const ot=So(Ye,[["__scopeId","data-v-042216bf"]]),et={class:"flex items-center"},tt={key:2,class:"p-3 mt-4 rounded-lg border dark:border-gray-700"},at=R({__name:"MigratePreviewModal",props:{poolMigrationInfo:null,fromPool:null,toPool:null,fromPoolTokenInfo:null,toPoolTokenInfo:null,stakedPoolValue:null,unstakedPoolValue:null,stakedBptBalance:null,unstakedBptBalance:null,isStakedMigrationEnabled:{type:Boolean},isUnstakedMigrationEnabled:{type:Boolean}},emits:["close"],setup(e,{emit:l}){const a=e,{fromPool:m,toPool:i}=_o(a),n=L(0),u=L(1),P=L("0"),v=L(!0),f=L(!1),O=L(go.network.addresses.batchRelayer),{t:x}=po(),b=le(O),{actions:h,migratePoolState:B,getExpectedBptOut:eo,fromFiatTotal:C}=ze(a.stakedBptBalance,a.unstakedBptBalance,a.unstakedPoolValue,a.isUnstakedMigrationEnabled,a.stakedPoolValue,a.isStakedMigrationEnabled,a.fromPool,a.toPool,a.fromPoolTokenInfo,a.toPoolTokenInfo,b.data,n),H=r(()=>B.value.confirmed?x("migratePool.previewModal.titles.confirmed"):x("migratePool.previewModal.titles.default")),T=r(()=>S.value?f.value:!0),S=r(()=>v.value?!1:mo(u.value).isGreaterThanOrEqualTo(ge)),V=r(()=>!h.value[n.value].isSignAction&&!B.value.confirmed),G=r(()=>h.value[n.value].isSignAction?!1:v.value||!T.value),Z=r(()=>h.value[n.value].isStakeAction?x("migratePool.previewModal.summary.stakeTitle"):x("migratePool.previewModal.summary.unstakeTitle")),F=r(()=>{var k;return ao(a.stakedBptBalance,(k=a.fromPool.onchain)==null?void 0:k.decimals).toString()}),j=r(()=>{var k;return ao(a.unstakedBptBalance,(k=a.fromPool.onchain)==null?void 0:k.decimals).toString()}),N=r(()=>{var A;const k=Ko(P.value,((A=i.value.onchain)==null?void 0:A.decimals)||18);return X(i.value,k)});function J(){l("close")}function no(k){n.value=k}async function q(k,A){P.value=await io(k,A);const D=X(m.value,k);console.log("fromBptValue",D);const Q=X(i.value,P.value);return console.log("toBptValue",Q),mo(1).minus(mo(Q).div(D)).toNumber()}async function io(k,A){v.value=!0;const D=await eo(k,A);return v.value=!1,D}return Yo(n,async k=>{h.value[k].isStakeAction&&(u.value=await q(F.value,!0)),h.value[k].isUnstakeAction&&(u.value=await q(j.value,!1))},{immediate:!0}),(k,A)=>{const D=Mo,Q=de,so=Vo,to=oe;return c(),I(to,{show:"",fireworks:o(B).confirmed,onClose:J},{header:$(()=>[t("div",et,[o(B).confirmed?(c(),I(Q,{key:0,size:"8",color:"green",class:"mr-2 text-white"},{default:$(()=>[p(D,{name:"check"})]),_:1})):U("",!0),t("h4",null,s(o(H)),1)])]),default:$(()=>[e.poolMigrationInfo.riskI18nLabels!=null?(c(),I(Ae,{key:0,poolMigrationInfo:e.poolMigrationInfo},null,8,["poolMigrationInfo"])):U("",!0),p(Ue,{fromPool:o(m),fromPoolTokenInfo:e.fromPoolTokenInfo,toPoolTokenInfo:e.toPoolTokenInfo},null,8,["fromPool","fromPoolTokenInfo","toPoolTokenInfo"]),o(V)?(c(),I(ot,{key:1,pool:o(i),fromTotal:o(C),toTotal:o(N),priceImpact:u.value,isLoadingBptOut:v.value,highPriceImpact:o(S),summaryTitle:o(Z)},null,8,["pool","fromTotal","toTotal","priceImpact","isLoadingBptOut","highPriceImpact","summaryTitle"])):U("",!0),o(S)&&o(V)?(c(),M("div",tt,[p(so,{modelValue:f.value,"onUpdate:modelValue":A[0]||(A[0]=ro=>f.value=ro),name:"highPriceImpactAccepted",size:"sm",label:k.$t("migratePool.previewModal.priceImpactAccept"),noMargin:""},null,8,["modelValue","label"])])):U("",!0),p(Be,{class:"mt-4",fromPool:o(m),toPool:o(i),disabled:o(G),actions:o(h),migratePoolState:o(B),onSetCurrentActionIndex:no},null,8,["fromPool","toPool","disabled","actions","migratePoolState"])]),_:1},8,["fireworks"])}}}),nt={class:"p-3 dark:bg-gray-800 rounded-lg border dark:border-gray-800"},st={class:"flex items-center"},lt={class:"font-semibold"},it={key:0},rt={class:"text-sm text-secondary"},ct={class:"inline-flex items-center py-1 px-2 ml-2 bg-gray-50 dark:bg-gray-700 rounded-lg border dark:border-gray-800"},$o=R({__name:"PoolInfoBreakdown",props:{pool:null,poolTokenInfo:null},setup(e){const l=e,a=L(!1),{getToken:m}=vo(),i=r(()=>{var n;return(n=Bo[l.pool.id])==null?void 0:n.showOldVHint});return(n,u)=>{const P=No,v=ve;return c(),M("div",nt,[p(v,{items:o(Lo)(e.pool),class:"w-full cursor-pointer select-none",offsetClassOverrides:"mt-4 ml-3",initVertBarClassOverrides:"h-6 -mt-6",size:"lg",hideItems:!a.value,onClick:u[0]||(u[0]=f=>a.value=!a.value)},{item:$(({item:f})=>[t("div",ct,[p(P,{address:f,class:"mr-2"},null,8,["address"]),z(" "+s(o(m)(f).symbol),1)])]),default:$(()=>[t("div",st,[p(P,{address:e.pool.address,class:"mr-2",size:36},null,8,["address"]),t("div",null,[t("div",lt,[z(s(e.poolTokenInfo.symbol)+" ",1),o(i)?(c(),M("span",it," ("+s(n.$t("migratePool.oldVersion"))+") ",1)):U("",!0)]),t("div",rt,s(e.poolTokenInfo.name),1)])])]),_:1},8,["items","hideItems"])])}}}),ut={class:"w-full"},dt={class:"text-xs leading-none text-secondary"},mt={class:"flex justify-between items-center"},ft={key:0,class:"pb-4"},pt={class:"flex flex-col text-base"},gt={class:"font-semibold"},_t={class:"text-sm font-normal text-secondary"},vt={key:1,class:"mb-6"},kt={class:"text-gray-500"},ht={class:"text-lg font-semibold"},Pt={class:"flex justify-center my-4 dark:text-gray-50"},bt=R({__name:"PoolsInfo",props:{poolMigrationInfo:null,fromPool:null,toPool:null,fromPoolTokenInfo:null,toPoolTokenInfo:null},setup(e){const l=e,{t:a}=po(),{fromPool:m,toPool:i}=_o(l),{fNum:n}=lo(),{balanceFor:u}=vo(),{stakedShares:P}=Ro(),v=r(()=>X(l.fromPool,P.value)),f=r(()=>X(l.fromPool,u(l.fromPool.address))),O=r(()=>u(l.fromPool.address)),x=r(()=>Number(f.value)>0||Number(v.value)>0),b=r(()=>{let S=0;const V=Number(v.value),G=Number(f.value);return S=V+G,S>0?n(S,{style:"currency",maximumFractionDigits:0,fixedFormat:!0}):"-"}),h=L(!1),B=L({staked:{title:a("migratePool.poolInfo.stakedLabel"),value:!0,amount:r(()=>n(v.value,{style:"currency",maximumFractionDigits:0,fixedFormat:!0}))},unstaked:{title:a("migratePool.poolInfo.unstakedLabel"),value:!0,amount:r(()=>n(f.value,{style:"currency",maximumFractionDigits:0,fixedFormat:!0}))}}),eo=r(()=>!x.value||C.value&&Object.values(B.value).every(S=>!S.value)),C=r(()=>Number(f.value)>0&&Number(v.value)>0),H=r(()=>C.value?B.value.staked.value:Number(v.value)>0),T=r(()=>C.value?B.value.unstaked.value:Number(f.value)>0);return(S,V)=>{const G=Vo,Z=Co,F=wo,j=fo;return c(),M(oo,null,[p(j,{shadow:"xl",exposeOverflow:"",noBorder:""},{header:$(()=>[t("div",ut,[t("div",dt,s(o(go).network.chainName),1),t("div",mt,[t("h4",null,s(o(a)(`migratePool.${e.poolMigrationInfo.type}.migrateToPool.title`)),1),p(ce,{context:o(ue).invest},null,8,["context"])])])]),default:$(()=>[o(C)?(c(),M("div",ft,[z(s(o(a)("migratePool.poolInfo.stakedUnstaked"))+" ",1),(c(!0),M(oo,null,xo(Object.values(B.value),(N,J)=>(c(),I(G,{key:J,class:"pt-3",modelValue:N.value,name:"areFeesGovernanceManaged",size:"lg",noMargin:"","onUpdate:modelValue":no=>N.value=!N.value},{label:$(()=>[t("div",pt,[t("div",gt,s(N.title),1),t("div",_t,s(N.amount),1)])]),_:2},1032,["modelValue","onUpdate:modelValue"]))),128))])):U("",!0),o(C)?U("",!0):(c(),M("div",vt,[t("div",kt,s(S.$t("yourBalanceInPool")),1),t("div",ht,s(o(b)),1)])),p($o,{pool:o(m),poolTokenInfo:e.fromPoolTokenInfo},null,8,["pool","poolTokenInfo"]),t("div",Pt,[p(Z,{class:"w-5 h-5 text-secondary"})]),p($o,{pool:o(i),poolTokenInfo:e.toPoolTokenInfo},null,8,["pool","poolTokenInfo"]),p(F,{color:"gradient",class:"mt-6",block:"",disabled:o(eo),onClick:V[0]||(V[0]=N=>h.value=!0)},{default:$(()=>[z(s(S.$t("previewMigrate")),1)]),_:1},8,["disabled"])]),_:1}),(c(),I(ee,{to:"#modal"},[h.value?(c(),I(at,{key:0,stakedPoolValue:o(v),unstakedPoolValue:o(f),isStakedMigrationEnabled:o(H),isUnstakedMigrationEnabled:o(T),stakedBptBalance:o(P),unstakedBptBalance:o(O),fromPool:o(m),toPool:o(i),fromPoolTokenInfo:e.fromPoolTokenInfo,toPoolTokenInfo:e.toPoolTokenInfo,poolMigrationInfo:e.poolMigrationInfo,onClose:V[1]||(V[1]=N=>h.value=!1)},null,8,["stakedPoolValue","unstakedPoolValue","isStakedMigrationEnabled","isUnstakedMigrationEnabled","stakedBptBalance","unstakedBptBalance","fromPool","toPool","fromPoolTokenInfo","toPoolTokenInfo","poolMigrationInfo"])):U("",!0)]))],64)}}}),yt={class:"p-4 w-full border-b dark:border-gray-900"},It={class:"p-4"},$t={class:"mb-3"},Tt={class:"text-sm text-secondary"},Mt={class:"font-semibold"},wt={class:"mb-3"},xt={class:"text-sm text-secondary"},Bt={class:"font-semibold"},St={class:"text-sm text-secondary"},At={class:"flex items-center font-semibold"},Lt=R({__name:"PoolStats",props:{poolMigrationInfo:null,pool:null},setup(e){const l=e,{fNum:a}=lo(),m=r(()=>{var n;const i=(n=l.pool)==null?void 0:n.apr;return i?te(i,l.pool.boost):"0"});return(i,n)=>{const u=fo;return c(),I(u,{noPad:"",shadow:"none"},{default:$(()=>[t("div",yt,[t("h6",null,s(i.$t(`migratePool.${e.poolMigrationInfo.type}.poolStats.title`)),1)]),t("div",It,[t("div",$t,[t("div",Tt,s(i.$t("poolValue")),1),t("div",Mt,s(o(a)(e.pool.totalLiquidity,o(Y).fiat)),1)]),t("div",wt,[t("div",xt,s(i.$t("volumeTime",["24h"])),1),t("div",Bt,s(o(a)(e.pool.volumeSnapshot||"0",o(Y).fiat)),1)]),t("div",null,[t("div",St,s(i.$t("apr")),1),t("div",At,[z(s(o(m))+" ",1),p(ke,{pool:e.pool},null,8,["pool"])])])])]),_:1})}}}),Ot=R({__name:"MigrateForm",props:{poolMigrationInfo:null},setup(e){const l=e,{getToken:a}=vo(),{data:m,isLoading:i}=ae(L([]),{},{poolIds:L([l.poolMigrationInfo.fromPoolId,l.poolMigrationInfo.toPoolId])}),n=r(()=>{var b,h;return(h=(b=m.value)==null?void 0:b.pages)==null?void 0:h[0].pools}),u=ie(re.BATCH),{loading:P}=_o(u),v=r(()=>{var b;return(b=n.value)==null?void 0:b.find(h=>h.id===l.poolMigrationInfo.fromPoolId)}),f=r(()=>{var b;return(b=n.value)==null?void 0:b.find(h=>h.id===l.poolMigrationInfo.toPoolId)}),O=r(()=>v.value!=null?a(v.value.address):null),x=r(()=>f.value!=null?a(f.value.address):null);return(b,h)=>{const B=Oo;return c(),I(se,{offsetGutters:""},{gutterLeft:$(()=>[p(Te,{poolMigrationInfo:e.poolMigrationInfo},null,8,["poolMigrationInfo"])]),gutterRight:$(()=>[o(i)||!o(f)?(c(),I(B,{key:0,class:"h-64"})):(c(),I(Lt,{key:1,pool:o(f),poolMigrationInfo:e.poolMigrationInfo},null,8,["pool","poolMigrationInfo"]))]),default:$(()=>[o(i)||!o(v)||!o(f)||o(O)==null||o(x)==null||o(P)?(c(),I(B,{key:0,class:"h-96"})):(c(),I(bt,{key:1,fromPool:o(v),toPool:o(f),fromPoolTokenInfo:o(O),toPoolTokenInfo:o(x),poolMigrationInfo:e.poolMigrationInfo},null,8,["fromPool","toPool","fromPoolTokenInfo","toPoolTokenInfo","poolMigrationInfo"]))]),_:1})}}}),Ct={key:1,class:"text-center"},Vt={class:"text-lg font-semibold"},Kt=R({__name:"migrate",setup(e){const l=ne(),a=l.params.from,m=l.params.to,i=Ao.find(n=>n.fromPoolId===a&&n.toPoolId===m);return _e(a),(n,u)=>o(i)?(c(),I(Ot,{key:0,poolMigrationInfo:o(i)},null,8,["poolMigrationInfo"])):(c(),M("div",Ct,[t("div",Vt,s(n.$t("migratePool.errorLoadingMigration.title")),1),t("div",null,s(n.$t("migratePool.errorLoadingMigration.description")),1)]))}});export{Kt as default};
//# sourceMappingURL=migrate-b12fead7.js.map
