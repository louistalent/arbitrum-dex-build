import{_ as te}from"./BalLoadingBlock.vue_vue_type_style_index_0_lang-3fa460ee.js";import{d as N,s,G as r,a0 as v,a2 as w,ah as f,t as C,B as p,aT as R,dS as B,T as Y,v as i,l as M,H as T,e4 as le,aP as E,D as u,U as z,C as Z,bc as ae,y as S,aE as se,c as L,aV as ne,Z as ie,aY as O,dr as V,dE as P,a1 as G,a8 as K}from"./index-4a1c513c.js";const U=N({__name:"BalTableRow",props:{columns:null,onRowClick:null,data:null,link:null,href:null,sticky:null,isColumnStuck:{type:Boolean},pinned:{type:Boolean}},setup(e){const k=e;function a(d,o=!1){var n;(n=k.link)!=null&&n.to||k.onRowClick&&k.onRowClick(d,o)}function y(d){return d!==0?"":k.sticky==="horizontal"||k.sticky==="both"?"horizontalSticky":""}return(d,o)=>(s(),r("tr",{class:f(["bg-white z-10 row-bg group",{"cursor-pointer":a,"border-b dark:border-gray-700":e.pinned}]),onClick:[o[0]||(o[0]=E(n=>a(e.data),["exact"])),o[1]||(o[1]=E(n=>a(e.data,!0),["meta"])),o[2]||(o[2]=E(n=>a(e.data,!0),["ctrl"]))]},[(s(!0),r(v,null,w(e.columns,(n,h)=>{var $,g;return s(),r("td",{key:n.id,class:f([n.align==="right"?"text-left":"text-right",y(h),e.isColumnStuck?"isSticky":""])},[(s(),C(le(($=e.href)!=null&&$.getHref(e.data)?"a":e.link?"router-link":"div"),{to:e.link?{name:e.link.to,params:e.link.getParams(e.data)}:null,href:(g=e.href)==null?void 0:g.getHref(e.data)},{default:p(()=>[n.Cell?R(d.$slots,n.Cell,B(Y({key:0},e.data))):(s(),r("div",{key:1,class:f(i(M.compact)(["mr-6 py-4",n.align==="right"?"text-right":"text-left",n.cellClassName]))},T(typeof n.accessor=="string"?e.data[n.accessor]:n.accessor(e.data)),3))]),_:2},1032,["to","href"]))],2)}),128))],2))}}),re=u("span",{class:"font-semibold text-left"}," Total ",-1),oe=[re],ue=N({__name:"TotalsRow",props:{isColumnStuck:{type:Boolean},onRowClick:null,sticky:null,columns:null},setup(e){const k=e;function a(y){return y!==0?"":k.sticky==="horizontal"||k.sticky==="both"?"horizontalSticky":""}return(y,d)=>(s(),r("tbody",null,[u("tr",{class:f(["bg-white z-10 row-bg group",{"cursor-pointer":!!k.onRowClick}])},[u("td",{class:f([a(0),e.isColumnStuck?"isSticky":"","text-left p-6 bg-white dark:bg-gray-850 border-t dark:border-gray-900 align-top"])},oe,2),(s(!0),r(v,null,w(i(M.tail)(e.columns),(o,n)=>(s(),r("td",{key:o.id,class:f([o.align==="right"?"text-left":"text-right",a(n+1),e.isColumnStuck?"isSticky":"","p-6 bg-white dark:bg-gray-850 border-t dark:border-gray-900"])},[o.totalsCell?R(y.$slots,o.totalsCell,{key:0}):z("",!0)],2))),128))],2)]))}}),ce="/assets/pin-4b10d1ef.svg",de={class:"px-6 pt-4 pb-2"},fe=["src"],ke=u("span",{class:"text-secondary text-medium"},"Pinned",-1),ye=N({__name:"PinHeader",setup(e){return(k,a)=>{const y=ae;return s(),r("tr",null,[u("td",de,[Z(y,{horizontal:"",spacing:"sm"},{default:p(()=>[u("img",{src:i(ce)},null,8,fe),ke]),_:1})])])}}}),he={class:"w-full whitespace-normal table-fixed"},ge={class:"z-10 bg-white dark:bg-gray-900"},ve=["onClick"],we={key:1},be={class:"text-base"},Ce={key:1,class:"flex justify-start items-center p-6 max-w-full h-24 bg-white dark:bg-gray-850 row-bg text-secondary"},me={key:2,class:"w-full whitespace-normal table-fixed"},$e=N({__name:"BalTable",props:{columns:null,data:null,isLoading:{type:Boolean,default:!1},isLoadingMore:{type:Boolean,default:!1},skeletonClass:{default:""},onRowClick:null,sticky:null,square:{type:Boolean,default:!1},isPaginated:{type:Boolean,default:!1},noResultsLabel:{default:""},link:{default:null},href:{default:null},initialState:{default:()=>({sortColumn:null,sortDirection:null})},pin:null,getTableRowClass:{type:Function,default:()=>""},isOnlyDescSort:{type:Boolean,default:!1}},emits:["loadMore","onColumnSort"],setup(e,{emit:k}){var F,A;const a=e,y=S(),d=S(!1),o=S(a.data),n=S(((F=a.initialState)==null?void 0:F.sortDirection)||null),h=S(((A=a.initialState)==null?void 0:A.sortColumn)||null),$=S(),g=S(),J=se(a,"getTableRowClass"),Q=L(()=>M.sumBy(a.columns,"width")),W=l=>l!==0?"":a.sticky==="horizontal"||a.sticky==="both"?"horizontalSticky":"",j=(l,b=!0)=>{const x=a.columns.find(c=>c.id===l);if(!(x!=null&&x.sortKey))return;l!==h.value&&(n.value=null),h.value=l,b&&X(),l&&n.value&&k("onColumnSort",l);const t=M.sortBy(a.data.value||a.data,x.sortKey);if(n.value==="asc"){o.value=t;return}if(n.value==="desc"){o.value=t.reverse();return}o.value=a.data};function X(){if(a.isOnlyDescSort){n.value="desc";return}if(n.value===null){n.value="desc";return}if(n.value==="desc"){n.value="asc";return}n.value=null}function I(l){switch(l){case"left":return"justify-start";case"right":return"justify-end";case"center":return"justify-center";default:return"justify-start"}}ne(()=>{g.value&&(g.value.onscroll=()=>{if(g.value&&y.value){const l=g.value.offsetWidth/y.value.offsetWidth/10;d.value=y.value.offsetLeft>y.value.offsetWidth*l}},g.value.addEventListener("scroll",()=>{g.value&&$.value&&($.value.scrollLeft=g.value.scrollLeft)})),j(h.value,!1)});const _=L(()=>a.pin?(o.value||[]).filter(l=>{var b;return!((b=a.pin)!=null&&b.pinnedData.includes(l[a.pin.pinOn]))}):o.value),q=L(()=>a.pin?(o.value||[]).filter(l=>{var b;return(b=a.pin)==null?void 0:b.pinnedData.includes(l[a.pin.pinOn])}):[]),m=L(()=>a.columns.filter(l=>!l.hidden)),ee=L(()=>a.columns.some(l=>l.totalsCell!==void 0));return ie(()=>a.data,l=>{if(h.value&&n.value!==null){j(h.value,!1);return}o.value=l}),(l,b)=>{const x=te;return s(),r(v,null,[u("div",{class:f(["max-w-full whitespace-nowrap overflow-hidden",{"rounded-lg":!e.square}])},[u("div",{ref_key:"headerRef",ref:$,class:"overflow-hidden"},[u("table",he,[u("colgroup",null,[(s(!0),r(v,null,w(i(m),t=>(s(),r("col",{key:t.id,style:O({width:`${t==null?void 0:t.width}px`})},null,4))),128))]),u("thead",ge,[(s(!0),r(v,null,w(i(m),(t,c)=>(s(),r("th",{key:`header-${t.id}`,ref_for:!0,ref:c==0?"stickyHeaderRef":void 0,class:f(["p-6 bg-white dark:bg-gray-850 headingShadow border-b dark:border-gray-900",t.className,W(c),i(d)?"isSticky":"",t.sortKey&&!(a.isOnlyDescSort&&i(h)===t.id)?"cursor-pointer":"",t.sortKey&&i(h)!==t.id?"text-gray-800 hover:text-purple-600 focus:text-blue-500 dark:text-gray-100 dark:hover:text-yellow-500 dark:focus:text-yellow-500 transition-colors":"",i(h)===t.id&&i(n)?"text-blue-600 hover:text-blue-500 focus:text-purple-600 dark:text-blue-400 dark:hover:text-blue-600 dark:focus:text-blue-600 transition-colors":""]),onClick:H=>j(t.id)},[u("div",{class:f(["flex",I(t.align)])},[t.Header?R(l.$slots,t.Header,B(Y({key:0},t))):(s(),r("div",we,[u("h5",be,T(t.name),1)])),i(h)===t.id&&i(n)==="asc"?(s(),C(K,{key:2,name:"arrow-up",size:"sm",class:"flex items-center ml-1"})):z("",!0),i(h)===t.id&&i(n)==="desc"?(s(),C(K,{key:3,name:"arrow-down",size:"sm",class:"flex items-center ml-1"})):z("",!0)],2)],10,ve))),128))])])],512),u("div",{ref_key:"bodyRef",ref:g,class:"overflow-auto"},[e.isLoading?(s(),C(x,{key:0,class:f([e.skeletonClass,"min-w-full"]),square:"",style:O({width:`${i(Q)}px`})},null,8,["class","style"])):!e.isLoading&&!i(o).length?(s(),r("div",Ce,T(e.noResultsLabel||l.$t("noResults")),1)):(s(),r("table",me,[u("colgroup",null,[(s(!0),r(v,null,w(i(m),t=>(s(),r("col",{key:t.id,style:O({width:`${t==null?void 0:t.width}px`})},null,4))),128))]),u("tr",null,[(s(!0),r(v,null,w(i(m),(t,c)=>(s(),r("td",{key:t.id,class:f([t.align==="right"?"text-left":"text-right",W(c),i(d)?"isSticky":"","bg-white dark:bg-gray-850 p-0 m-0 h-0"])},null,2))),128))]),i(q).length?(s(),C(ye,{key:0})):z("",!0),(s(!0),r(v,null,w(i(q),(t,c)=>(s(),C(U,{key:`tableRow-${t.id??c}`,class:f(i(J)(t,c)),data:t,columns:i(m),onRowClick:e.onRowClick,link:e.link,href:e.href,sticky:e.sticky,isColumnStuck:i(d),pinned:""},V({_:2},[w(l.$slots,(H,D)=>({name:D,fn:p(()=>[R(l.$slots,D,B(P(t)))])}))]),1032,["class","data","columns","onRowClick","link","href","sticky","isColumnStuck"]))),128)),(s(!0),r(v,null,w(i(_),(t,c)=>(s(),C(U,{key:`tableRow-${t.id??c}`,class:f(a.getTableRowClass?a.getTableRowClass(t,c):void 0),data:t,columns:i(m),onRowClick:e.onRowClick,link:e.link,href:e.href,sticky:e.sticky,isColumnStuck:i(d)},V({default:p(()=>[R(l.$slots,"named",B(P(t)))]),_:2},[w(l.$slots,(H,D)=>({name:D,fn:p(()=>[R(l.$slots,D,B(P(t)))])}))]),1032,["class","data","columns","onRowClick","link","href","sticky","isColumnStuck"]))),128)),!e.isLoading&&i(o).length&&i(ee)?(s(),C(ue,{key:1,columns:i(m),onRowClick:e.onRowClick,sticky:e.sticky,isColumnStuck:i(d)},V({_:2},[w(l.$slots,(t,c)=>({name:c,fn:p(H=>[R(l.$slots,c,B(P(H)))])}))]),1032,["columns","onRowClick","sticky","isColumnStuck"])):z("",!0)]))],512)],2),e.isPaginated&&!e.isLoading?(s(),r("div",{key:0,class:"bal-table-pagination-btn text-secondary",onClick:b[0]||(b[0]=t=>!e.isLoadingMore&&l.$emit("loadMore"))},[e.isLoadingMore?(s(),r(v,{key:0},[G(T(l.$t("loading")),1)],64)):(s(),r(v,{key:1},[G(T(l.$t("loadMore"))+" ",1),Z(K,{name:"chevron-down",size:"sm",class:"ml-2"})],64))])):z("",!0)],64)}}});export{$e as _};
//# sourceMappingURL=BalTable.vue_vue_type_style_index_0_lang-bfff8f7a.js.map
