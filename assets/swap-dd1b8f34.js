var Xa=Object.defineProperty;var et=(e,t,a)=>t in e?Xa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var Oe=(e,t,a)=>(et(e,typeof t!="symbol"?t+"":t,a),a);import{y as $,bI as ia,S as qe,cI as ma,d as je,p as Me,u as Ce,b as _e,c as o,bY as Le,q as Ie,cl as Be,A as Re,by as Ve,v as i,s as F,t as Y,B as ye,D as r,H as G,G as ie,C as ne,aY as ba,a0 as Ye,a2 as ta,bG as at,U as me,F as K,a8 as La,_ as wa,ai as Ra,aj as Da,ak as ea,aa as Ge,cJ as tt,cK as st,ag as ua,o as Ze,af as fa,av as nt,Z as He,a as xe,bW as be,cL as Ma,ab as De,z as oe,O as le,l as Ea,cM as ot,a1 as ka,ah as va,a5 as rt,aP as Ua,c1 as Wa,bc as lt,a7 as Na,aC as it,cN as sa,as as ga,bU as pe,e as ha,cO as Te,cP as na,cQ as ut,cR as ct,cS as Aa,aL as pt,aM as dt,c7 as Sa,cT as ra,c6 as vt,bj as la,cU as mt,cV as ze,cW as Se,aV as aa,r as wt,bV as _a,ax as ca,a4 as xa,cn as oa,cX as Ta,cY as ft,cZ as gt,c_ as ht,c$ as St,d0 as yt,d1 as bt,d2 as Ia,az as Et,bv as kt,x as At,$ as _t,X as xt,bz as Ca,K as Tt,aF as Ct,am as pa}from"./index-4a1c513c.js";import{_ as Va,u as ya}from"./useTransactionErrors-09c4ac25.js";import{_ as $t}from"./BalActionSteps.vue_vue_type_script_setup_true_lang-78b4efb6.js";import{_ as Ft}from"./ArrowDownIcon-0d72bb47.js";import{_ as Ha}from"./BalAsset-fe687731.js";import{a as qa,R as Xe,u as da,b as Pt}from"./useRelayerApprovalTx-95afc1c6.js";import{_ as Ot,S as Bt}from"./SwapSettingsPopover.vue_vue_type_style_index_0_lang-1d919268.js";import{u as Lt}from"./useSwapState-8cdb4cec.js";import{c as Rt,s as Dt,d as Mt}from"./swapper-7147db03.js";import{o as Ut,a as Wt}from"./validations-f14f6fca.js";import{_ as $a}from"./TokenInput.vue_vue_type_script_setup_true_lang-d6685049.js";import{C as Nt}from"./Col3Layout-4539059c.js";import"./tslib.es6-b45817b3.js";import"./numeral-7364357d.js";import"./BalLoadingBlock.vue_vue_type_style_index_0_lang-3fa460ee.js";const Je=$([]);function It(){function e(n){Je.value=n}function t(n){Je.value.push(n)}function a(n){const s=Je.value.indexOf(n);Je.value.splice(s,1)}return{selectedTokens:Je,setSelectedTokens:e,addSelectedToken:t,removeSelectedToken:a}}const za={1:{input:"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",output:"0x6B175474E89094C44Da98b954EedeAC495271d0F"},5:{input:"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",output:"0xe0C9275E44Ea80eF17579d33c55136b7DA269aEb"},42:{input:"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",output:"0x04DF6e4121c27713ED22341E7c7Df330F56f289B"},100:{input:"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",output:"0xDDAfbb505ad214D7b80b1f830fcCc89B60fb7A83"},137:{input:"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",output:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"},42161:{input:"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",output:"0xFF970A61A04b1cA14834A43f5dE4533eBDDB5CC8"}},Qa=$(ia(`inputAsset.${qe.value}`,za[qe.value].input)),ja=$(ia(`outputAsset.${qe.value}`,za[qe.value].output));function Vt(e){Qa.value=e,ma(`inputAsset.${qe.value}`,e)}function Ht(e){ja.value=e,ma(`outputAsset.${qe.value}`,e)}function Ga(){return{inputAsset:Qa,outputAsset:ja,setInputAsset:Vt,setOutputAsset:Ht}}const qt=e=>(Ra("data-v-9210ff21"),e=e(),Da(),e),zt={class:"mr-2"},Qt={key:0,class:"mt-5"},jt=["textContent"],Gt={key:1},Zt={class:"flex justify-between text-xs"},Jt={class:"font-semibold"},Kt={class:"flex flex-col items-end"},Yt={class:"font-semibold"},Xt={class:"relative mt-2"},es=qt(()=>r("div",{class:"absolute mx-9 h-1/2 border-b border-gray-500 border-dashed pair-line"},null,-1)),as={class:"flex relative z-10 justify-between"},ts={class:"relative my-1.5 mx-4"},ss={class:"relative z-10"},ns={class:"flex items-center ml-4 w-4"},os={class:"flex"},rs=["href"],ls={class:"mr-4 w-10 text-xs text-right text-secondary"},is=je({__name:"SwapRoute",props:{addressIn:null,amountIn:null,addressOut:null,amountOut:null,pools:null,sorReturn:null},setup(e){const t=e,{fNum:a}=Me(),{appNetworkConfig:n}=Ce(),{getToken:s}=_e(),p=$(!1);function A(){p.value=!p.value}const _=o(()=>{const d=s(t.addressIn).symbol;return{amount:t.amountIn,address:t.addressIn,symbol:d}}),x=o(()=>{const d=s(t.addressOut).symbol;return{amount:t.amountOut,address:t.addressOut,symbol:d}}),f=o(()=>{const{sorReturn:d}=t;if(!d.hasSwaps)return[];const h=t.pools,M=d.result.swaps,T=d.result.tokenAddresses,C=t.addressIn,w=t.addressOut;return R(C,w,h,M,T)});function R(d,h,M,T,C){const{addresses:w}=n;if(d=d===Le?w.weth:Ie(d),h=h===Le?w.weth:Ie(h),!M.length||!T.length||!C.length||C.length===1)return[];const v=T.reduce((q,N)=>q.plus(N.amount||"0"),new Be(0)),P=[],b=[];for(let q=0;q<T.length;q++){const N=T[q],l=M.find(E=>E.id===N.poolId);if(l){const E=C[N.assetInIndex]===Re?w.weth:Ie(C[N.assetInIndex]),L=C[N.assetOutIndex]===Re?w.weth:Ie(C[N.assetOutIndex]),re=E===d&&L===h,B={pool:{address:l.address,id:l.id,tokens:l.tokens.map(S=>({address:Ie(S.address),share:parseFloat(S.weight||"")||1/l.tokens.length})).sort((S,O)=>Ve(S.address,E)||Ve(O.address,L)?-1:Ve(S.address,L)||Ve(O.address,E)?1:S.share-O.share).filter((S,O,k)=>O<2||O>k.length-3)},tokenIn:E,tokenOut:L,amount:new Be(N.amount||"0")};if(b.push(B),re){const O={share:B.amount.div(v).toNumber(),hops:[B]};P.push(O)}else if(L===h&&N.amount==="0"){const k={share:new Be(b[q-1].amount).div(v).toNumber(),hops:[b[q-1],B]};P.push(k)}else if(E===d&&N.amount==="0"){const k={share:new Be(b[q-1].amount).div(v).toNumber(),hops:[B,b[q-1]]};P.push(k)}}}return P}function g(d){return a(d,K.percent)}return(d,h)=>{const M=La,T=Ha,C=wa;return i(f).length>0?(F(),Y(C,{key:0,shadow:"none"},{default:ye(()=>[r("div",{class:"flex items-center cursor-pointer text-secondary",onClick:A},[r("div",zt,G(d.$t("swapRoute")),1),i(p)?(F(),Y(M,{key:0,name:"chevron-up",size:"sm"})):(F(),Y(M,{key:1,name:"chevron-down",size:"sm"}))]),i(p)?(F(),ie("div",Qt,[i(f).length===0?(F(),ie("div",{key:0,class:"mt-5 text-sm text-secondary",textContent:G(d.$t("noData"))},null,8,jt)):(F(),ie("div",Gt,[r("div",null,[r("div",Zt,[r("div",null,[r("div",Jt,G(i(_).amount),1),r("div",null,G(i(_).symbol),1)]),r("div",Kt,[r("div",Yt,G(i(x).amount),1),r("div",null,G(i(x).symbol),1)])]),r("div",Xt,[es,r("div",as,[ne(T,{address:i(_).address,size:36},null,8,["address"]),ne(T,{address:i(x).address,size:36},null,8,["address"])])])]),r("div",{class:"flex justify-between",style:ba({margin:`8px ${12+i(f).length}px`})},[ne(M,{name:"triangle",size:"xxs",filled:!0,class:"rotate-180 text-secondary"}),ne(M,{name:"triangle",size:"xxs",filled:!0,class:"text-secondary"})],4),r("div",ts,[(F(!0),ie(Ye,null,ta(i(f),(w,v)=>(F(),ie("div",{key:v,style:ba({height:`${18+70*v}px`,width:`calc(100% - ${4*(i(f).length-v-1)}px + 1px)`,margin:`0 ${2*(i(f).length-v-1)-1}px`}),class:"absolute rounded-b-md border-r border-b border-l border-gray-500"},null,4))),128)),r("div",ss,[(F(!0),ie(Ye,null,ta(i(f),w=>{var v,P;return F(),ie("div",{key:(P=(v=w.hops[0])==null?void 0:v.pool)==null?void 0:P.address,class:"flex justify-between mt-9 first:mt-0"},[r("div",ns,[ne(M,{name:"triangle",size:"xxs",filled:!0,class:"rotate-90 text-secondary"})]),r("div",os,[(F(!0),ie(Ye,null,ta(w.hops,b=>{var q;return F(),ie("div",{key:(q=b==null?void 0:b.pool)==null?void 0:q.address,class:"flex ml-4 first:ml-0 bg-white hover:bg-gray-50 dark:bg-gray-900 dark:hover:bg-gray-800 rounded-xl border border-gray-100 hover:border-gray-300 dark:border-gray-600 dark:hover:border-gray-400 shadow transition-colors"},[r("a",{class:"flex p-1.5",href:`/${i(at)}/pool/${b.pool.id}`,target:"_blank"},[(F(!0),ie(Ye,null,ta(b.pool.tokens,N=>(F(),Y(T,{key:N.address,class:"ml-1.5 first:ml-0",address:N.address,size:20},null,8,["address"]))),128))],8,rs)])}),128))]),r("div",ls,G(g(w.share)),1)])}),128))])])]))])):me("",!0)]),_:1})):me("",!0)}}});const Za=ea(is,[["__scopeId","data-v-9210ff21"]]);async function us(e,t,a){return await new Ge(e.getSigner()).contract.sendTransaction({contractAddress:a,abi:tt,action:"approve",params:[t,st.toString()]})}async function cs(e,t,a){return await Promise.all(a.map(n=>us(e,t,n)))}function ps(e,t,a){const n=$(!1),s=$(!1),{addTransaction:p}=ua(),{t:A}=Ze(),{getProvider:_}=Ce(),{txListener:x}=fa(),{networkConfig:f}=nt(),{approvalRequired:R,dynamicDataLoading:g}=_e(),d=o(()=>Ve(e.value,f.nativeAsset.address)?{isUnlockedV2:!0,approvedSpenders:{}}:!e.value||!t.value||s.value===!0?{isUnlockedV2:!0,approvedSpenders:{}}:{isUnlockedV2:!R(e.value,t.value)}),h=o(()=>d.value.isUnlockedV2);async function M(w){n.value=!0;try{const[v]=await cs(_(),w,[e.value]);return C(v,w),v}catch(v){return console.log(v),n.value=!1,Promise.reject(v)}}async function T(){return console.log("[TokenApproval] Unlock V2"),M(xe.network.addresses.vault)}function C(w,v){var P;p({id:w.hash,type:"tx",action:"approve",summary:A("transactionSummary.approveForSwapping",[(P=a.value[e.value])==null?void 0:P.symbol]),details:{contractAddress:e.value,spender:v}}),x(w,{onTxConfirmed:()=>{n.value=!1,s.value=!0},onTxFailed:()=>{n.value=!1}})}return He(e,async()=>{Ve(e.value,f.nativeAsset.address)?s.value=!0:s.value=!1}),{approved:s,approving:n,approveV2:T,approveSpender:M,allowanceState:d,isUnlockedV2:h,isLoading:g}}var de=(e=>(e[e.NonWrap=0]="NonWrap",e[e.Wrap=1]="Wrap",e[e.Unwrap=2]="Unwrap",e))(de||{});const Ja=(e,t)=>{const a=xe.network.nativeAsset.address,{weth:n,stETH:s,wstETH:p}=xe.network.addresses;return e===a&&t===n||e===s&&t===p?1:t===a&&e===n||t===s&&e===p?2:0},Fa=async(e,t,a)=>{if(t===0)throw new Error("Invalid wrap type");const{weth:n,wstETH:s}=xe.network.addresses;if(e===n)return be.from(a);if(e===s)return Ma({amount:a,isWrap:t===1});throw new Error("Unknown wrapper")};async function ds(e,t,a,n){try{if(a===De[e].addresses.weth)return ms(e,t,n);if(a===De[e].addresses.wstETH)return fs(e,t,n);throw new Error("Unrecognised wrapper contract")}catch(s){return console.log("[Wrapper] Wrap error:",s),Promise.reject(s)}}async function vs(e,t,a,n){try{if(a===De[e].addresses.weth)return ws(e,t,n);if(a===De[e].addresses.wstETH)return gs(e,t,n);throw new Error("Unrecognised wrapper contract")}catch(s){return console.log("[Wrapper] Unwrap error:",s),Promise.reject(s)}}const ms=async(e,t,a)=>await new Ge(t.getSigner()).contract.sendTransaction({contractAddress:De[e].addresses.weth,abi:["function deposit() payable"],action:"deposit",options:{value:a}}),ws=async(e,t,a)=>await new Ge(t.getSigner()).contract.sendTransaction({contractAddress:De[e].addresses.weth,abi:["function withdraw(uint256 wad)"],action:"withdraw",params:[a]}),fs=async(e,t,a)=>await new Ge(t.getSigner()).contract.sendTransaction({contractAddress:De[e].addresses.wstETH,abi:["function wrap(uint256 _stETHAmount) returns (uint256)"],action:"wrap",params:[a]}),gs=async(e,t,a)=>await new Ge(t.getSigner()).contract.sendTransaction({contractAddress:De[e].addresses.wstETH,abi:["function unwrap(uint256 _wstETHAmount) returns (uint256)"],action:"unwrap",params:[a]}),hs={class:"w-full"},Ss={class:"p-3 w-full text-sm bg-gray-50 dark:bg-gray-800 rounded-t-lg border-b dark:border-gray-800"},ys={class:"relative p-3 border-b border-gray-100 dark:border-gray-900"},bs={class:"flex items-center"},Es={class:"mr-3"},ks={class:"font-medium"},As={class:"text-sm text-secondary"},_s={class:"arrow-down"},xs={class:"p-3"},Ts={class:"flex items-center"},Cs={class:"mr-3"},$s={class:"font-medium"},Fs={class:"text-sm text-secondary"},Ps={key:0},Os={class:"flex justify-between items-center p-3 w-full border-b dark:border-gray-900"},Bs={class:"font-semibold"},Ls={class:"flex text-xs uppercase divide-x dark:divide-gray-500"},Rs={key:0,class:"p-3 text-sm"},Ds={class:"summary-item-row"},Ms=["innerHTML"],Us={class:"summary-item-row"},Ws={class:"text-green-400"},Ns={class:"summary-item-row"},Is=["innerHTML"],Vs={class:"p-3 w-full text-sm bg-white dark:bg-gray-800 rounded-b-lg"},Hs={class:"font-medium summary-item-row"},qs={class:"w-64"},zs=["innerHTML"],Qs={class:"summary-item-row text-secondary"},js={class:"w-64"},Gs=["innerHTML"],Zs=je({__name:"SwapPreviewModal",props:{swapping:null,error:null,warning:null},emits:["swap","close"],setup(e,{emit:t}){const a=e,n=.02,{t:s}=Ze(),{fNum:p,toFiat:A}=Me(),{tokens:_,balanceFor:x,approvalRequired:f}=_e(),{relayerSignature:R,relayerApprovalAction:g}=qa(Xe.BATCH_V4),{isUnlocked:d}=da(Xe.BATCH_V4),{blockNumber:h,account:M,startConnectWithInjectedProvider:T}=Ce(),{slippage:C}=Wa(),w=$(a.swapping.isWrapUnwrapSwap.value?null:a.swapping.getQuote()),v=$(!1),P=$(!1),b=$(!1),q=o(()=>p(C.value,K.percent)),N=o(()=>a.swapping.tokenIn.value.address),l=o(()=>p(A(a.swapping.tokenInAmountInput.value,a.swapping.tokenIn.value.address),K.fiat)),E=o(()=>p(A(a.swapping.tokenOutAmountInput.value,a.swapping.tokenOut.value.address),K.fiat)),L=o(()=>a.swapping.isBalancerSwap.value),re=o(()=>b.value?p("0",K.fiat):"0.0 ETH"),X=o(()=>M.value&&oe(a.swapping.tokenInAmountInput.value).isGreaterThan(x(a.swapping.tokenInAddressInput.value))),B=o(()=>!!X.value||!!a.error),S=o(()=>{const c={amountBeforeFees:"",swapFees:"",totalWithoutSlippage:"",totalWithSlippage:""},y=a.swapping.exactIn.value,z=a.swapping.tokenIn.value,Q=a.swapping.tokenOut.value,I=a.swapping.tokenInAmountInput.value,H=a.swapping.tokenOutAmountInput.value;if(a.swapping.isWrapUnwrapSwap.value)c.amountBeforeFees=H,c.swapFees="0",c.totalWithoutSlippage=H,c.totalWithSlippage=H;else{const V=a.swapping.getQuote();y?(c.amountBeforeFees=H,c.swapFees=le(V.feeAmountOutToken,Q.decimals),c.totalWithoutSlippage=oe(c.amountBeforeFees).minus(c.swapFees).toString(),c.totalWithSlippage=le(V.minimumOutAmount,Q.decimals)):(c.amountBeforeFees=I,c.swapFees=le(V.feeAmountInToken,z.decimals),c.totalWithoutSlippage=oe(c.amountBeforeFees).plus(c.swapFees).toString(),c.totalWithSlippage=le(V.maximumInAmount,z.decimals))}return b.value?Ea.mapValues(c,V=>`${p(A(V,y?Q.address:z.address),K.fiat)}`):Ea.mapValues(c,V=>`${p(V,K.token)} ${y||a.swapping.isWrapUnwrapSwap.value?Q.symbol:z.symbol}`)}),O=o(()=>a.swapping.isWrap.value?{modalTitle:s("previewWrap",[a.swapping.tokenIn.value.symbol]),confirmSwap:s("confirmWrap",[a.swapping.tokenIn.value.symbol]),swapSummary:{title:s("swapSummary.wrap.title"),swapFees:s("swapSummary.wrap.swapFees"),totalBeforeFees:s("swapSummary.wrap.totalBeforeFees"),totalAfterFees:s("swapSummary.wrap.totalAfterFees"),totalWithSlippage:s("swapSummary.wrap.totalWithSlippage",[a.swapping.tokenIn.value.symbol])}}:a.swapping.isUnwrap.value?{modalTitle:s("previewUnwrap",[a.swapping.tokenOut.value.symbol]),confirmSwap:s("confirmUnwrap",[a.swapping.tokenOut.value.symbol]),swapSummary:{title:s("swapSummary.unwrap.title"),swapFees:s("swapSummary.unwrap.swapFees"),totalBeforeFees:s("swapSummary.unwrap.totalBeforeFees"),totalAfterFees:s("swapSummary.unwrap.totalAfterFees"),totalWithSlippage:s("swapSummary.unwrap.totalWithSlippage",[a.swapping.tokenOut.value.symbol])}}:a.swapping.exactIn.value?{modalTitle:s("previewSwap"),confirmSwap:s("confirmSwap"),swapSummary:{title:s("swapSummary.exactIn.title",[a.swapping.tokenIn.value.symbol]),swapFees:s("swapSummary.exactIn.swapFees"),totalBeforeFees:s("swapSummary.exactIn.totalBeforeFees"),totalAfterFees:s("swapSummary.exactIn.totalAfterFees"),totalWithSlippage:s("swapSummary.exactIn.totalWithSlippage",[q.value])}}:{modalTitle:s("previewSwap"),confirmSwap:s("confirmSwap"),swapSummary:{title:s("swapSummary.exactOut.title",[a.swapping.tokenOut.value.symbol]),swapFees:s("swapSummary.exactOut.swapFees"),totalBeforeFees:s("swapSummary.exactOut.totalBeforeFees"),totalAfterFees:s("swapSummary.exactOut.totalAfterFees"),totalWithSlippage:s("swapSummary.exactOut.totalWithSlippage",[q.value])}}),k=ps(N,a.swapping.tokenInAmountInput,_),D=da(Xe.COWSWAP,a.swapping.isCowswapSwap),U=o(()=>a.swapping.sor.pools.value),we=o(()=>Ja(a.swapping.tokenIn.value.address,a.swapping.tokenOut.value.address)),he=o(()=>ot(N.value,a.swapping.tokenOut.value.address)&&we.value===de.NonWrap),ae=da(Xe.LIDO,he),ce=o(()=>a.swapping.isWrap.value&&!a.swapping.isEthSwap.value?f(a.swapping.tokenIn.value.address,a.swapping.tokenInAmountInput.value,a.swapping.tokenOut.value.address):a.swapping.requiresTokenApproval.value?!k.isUnlockedV2.value:!1),m=o(()=>a.swapping.isJoinExitSwap.value&&!d.value&&!R.value),W=o(()=>a.swapping.isCowswapSwap.value&&a.swapping.requiresTokenApproval.value&&!D.isUnlocked.value),Z=o(()=>a.swapping.isBalancerSwap.value&&!ae.isUnlocked.value),te=o(()=>ce.value||k.approved.value||k.approving.value),se=o(()=>a.swapping.isJoinExitSwap.value&&!d.value),ue=o(()=>W.value||D.init.value||D.approved.value||D.approving.value),J=o(()=>!a.swapping.isJoinExitSwap.value&&(Z.value||ae.init.value||ae.approved.value||ae.approving.value)),fe=o(()=>m.value||W.value||Z.value||ce.value),ve=o(()=>!fe.value&&v.value&&!P.value),Ee=o(()=>D.init.value||D.approving.value||ae.init.value||ae.approving.value||k.approving.value||a.swapping.isConfirming.value),$e=o(()=>W.value?`${s("approvingCowswapRelayer")}...`:Z.value?`${s("approvingLidoRelayer")}...`:m.value?`${s("approvingBatchRelayer")}...`:ce.value?`${s("approving")} ${a.swapping.tokenIn.value.symbol}...`:s("confirming")),Fe=o(()=>[...ue.value?[{label:s("approveCowswapRelayer"),loadingLabel:s("approvingCowswapRelayer"),confirmingLabel:s("approveCowswapRelayer"),action:D.approve,stepTooltip:s("swapSummary.transactionTypesTooltips.cowswapRelayerApproval.content")}]:[],...J.value?[{label:s("approveLidoRelayer"),loadingLabel:s("approvingLidoRelayer"),confirmingLabel:s("approveLidoRelayer"),action:ae.approve,stepTooltip:s("swapSummary.transactionTypesTooltips.lidoRelayerApproval.content")}]:[],...se.value?[g.value]:[],...te.value?[{label:`${s("approve")} ${a.swapping.tokenIn.value.symbol}`,loadingLabel:`${s("approving")} ${a.swapping.tokenIn.value.symbol}...`,confirmingLabel:`${s("confirming")} ${a.swapping.tokenIn.value.symbol}`,action:u,stepTooltip:s("swapSummary.transactionTypesTooltips.tokenApproval.content")}]:[],{label:O.value.confirmSwap,loadingLabel:`${s("approving")} ${a.swapping.tokenIn.value.symbol}...`,confirmingLabel:s("confirming"),action:Ue,stepTooltip:a.swapping.isCowswapSwap.value&&!a.swapping.isJoinExitSwap?s("swapSummary.transactionTypesTooltips.sign.content"):s("swapSummary.transactionTypesTooltips.swap.content")}]);function Ue(){t("swap")}function We(){t("close")}function Pe(){v.value=!1,P.value=!0,w.value=a.swapping.getQuote()}function Qe(){if(w.value!=null){const c=a.swapping.getQuote();if(a.swapping.exactIn.value){const y=oe(w.value.minimumOutAmount.toString()),z=oe(c.minimumOutAmount.toString());if(y.eq(sa))z.eq(sa)?v.value=!1:v.value=!0;else{const Q=y.minus(z).abs().div(y);v.value=Q.gt(n)}}else{const y=oe(w.value.maximumInAmount.toString()),z=oe(c.maximumInAmount.toString());if(y.eq(sa))z.eq(sa)?v.value=!1:v.value=!0;else{const Q=y.minus(z).abs().div(y);v.value=Q.gt(n)}}v.value&&(P.value=!1)}}async function u(){return a.swapping.isWrap.value&&!a.swapping.isEthSwap.value?k.approveSpender(a.swapping.tokenOut.value.address):k.approveV2()}return He(h,()=>{Qe()}),(c,y)=>{const z=La,Q=lt,I=Va,H=Ha,V=Ft,ee=wa,j=Na,ke=$t,Ka=it;return F(),Y(Ka,{show:"",onClose:We},{default:ye(()=>[r("div",null,[ne(Q,{horizontal:"",align:"center",spacing:"xs",class:"mb-4"},{default:ye(()=>[r("button",{class:"flex text-blue-500 hover:text-blue-700",onClick:We},[ne(z,{class:"flex",name:"chevron-left"})]),r("h4",null,G(i(O).modalTitle),1)]),_:1}),ne(ee,{noPad:"",class:"overflow-auto relative mb-6"},{header:ye(()=>[r("div",hs,[r("div",null,[e.error?(F(),Y(I,{key:0,class:"p-3 mb-2",type:"error",size:"sm",title:e.error.header,description:e.error.body,actionLabel:e.error.label,block:""},null,8,["title","description","actionLabel"])):e.warning?(F(),Y(I,{key:1,class:"p-3 mb-2",type:"warning",size:"sm",title:e.warning.header,description:e.warning.body,block:""},null,8,["title","description"])):me("",!0)]),r("div",Ss,[r("span",null,G(c.$t("effectivePrice"))+" "+G(e.swapping.exactIn.value?e.swapping.effectivePriceMessage.value.tokenIn:e.swapping.effectivePriceMessage.value.tokenOut),1)])])]),default:ye(()=>[r("div",null,[i(X)?(F(),Y(I,{key:0,class:"p-3",type:"error",size:"sm",title:`${i(s)("exceedsBalance")} ${i(p)(i(x)(a.swapping.tokenInAddressInput.value),i(K).token)} ${a.swapping.tokenIn.value.symbol}`,block:"",square:""},null,8,["title"])):me("",!0),r("div",ys,[r("div",bs,[r("div",Es,[ne(H,{address:e.swapping.tokenIn.value.address,size:36},null,8,["address"])]),r("div",null,[r("div",ks,G(i(p)(e.swapping.tokenInAmountInput.value,i(K).token))+" "+G(e.swapping.tokenIn.value.symbol),1),r("div",As,G(i(l)),1)])])]),r("div",_s,[ne(V)]),r("div",xs,[r("div",Ts,[r("div",Cs,[ne(H,{address:e.swapping.tokenOut.value.address,size:36},null,8,["address"])]),r("div",null,[r("div",$s,G(i(p)(e.swapping.tokenOutAmountInput.value,i(K).token))+" "+G(e.swapping.tokenOut.value.symbol),1),r("div",Fs,[ka(G(i(E))+" ",1),e.swapping.isBalancerSwap.value||e.swapping.isWrapUnwrapSwap.value?(F(),ie("span",Ps," / "+G(c.$t("priceImpact"))+": "+G(i(p)(e.swapping.sor.priceImpact.value,i(K).percent)),1)):me("",!0)])])])])])]),_:1}),ne(ee,{noPad:"",shadow:"none",class:"mb-3"},{header:ye(()=>[r("div",Os,[r("div",Bs,G(i(O).swapSummary.title),1),r("div",Ls,[r("div",{class:va(["pr-2 cursor-pointer font-medium",{"text-blue-600":!b.value}]),onClick:y[0]||(y[0]=Ya=>b.value=!1)},G(c.$t("tokens")),3),r("div",{class:va(["pl-2 cursor-pointer font-medium uppercase",{"text-blue-600":b.value}]),onClick:y[1]||(y[1]=Ya=>b.value=!0)},G(i(rt).usd),3)])])]),footer:ye(()=>[r("div",Vs,[r("div",Hs,[r("div",qs,G(i(O).swapSummary.totalAfterFees),1),r("div",{innerHTML:i(S).totalWithoutSlippage},null,8,zs)]),r("div",Qs,[r("div",js,G(i(O).swapSummary.totalWithSlippage),1),r("div",{innerHTML:e.swapping.isWrapUnwrapSwap.value?"":i(S).totalWithSlippage},null,8,Gs)])])]),default:ye(()=>[e.swapping.isCowswapSwap.value?(F(),ie("div",Rs,[r("div",Ds,[r("div",null,G(i(O).swapSummary.totalBeforeFees),1),r("div",{innerHTML:i(S).amountBeforeFees},null,8,Ms)]),r("div",Us,[r("div",null,G(c.$t("swapSummary.gasCosts")),1),r("div",Ws,"-"+G(i(re)),1)]),r("div",Ns,[r("div",null,G(i(O).swapSummary.swapFees),1),r("div",{innerHTML:e.swapping.isWrapUnwrapSwap.value?i(re):e.swapping.exactIn.value?`-${i(S).swapFees}`:`+${i(S).swapFees}`},null,8,Is)])])):me("",!0)]),_:1}),i(ve)?(F(),Y(I,{key:0,class:"p-3 mb-4",type:"error",size:"md",title:c.$t("priceUpdatedAlert.title"),description:c.$t("priceUpdatedAlert.description",[i(p)(n,i(K).percent)]),actionLabel:c.$t("priceUpdatedAlert.actionLabel"),block:"",onActionClick:Pe},null,8,["title","description","actionLabel"])):me("",!0),i(M)?(F(),Y(ke,{key:2,actions:i(Fe),isLoading:i(Ee),loadingLabel:i($e),disabled:i(B)||i(ve)},null,8,["actions","isLoading","loadingLabel","disabled"])):(F(),Y(j,{key:1,color:"gradient",block:"",onClick:Ua(i(T),["prevent"])},{default:ye(()=>[ka(G(c.$t("connectWallet")),1)]),_:1},8,["onClick"])),e.swapping.submissionError.value!=null?(F(),Y(I,{key:3,class:"p-3 mt-4",type:"error",size:"md",title:c.$t("swapSubmissionError.title"),description:e.swapping.submissionError.value,block:"",actionLabel:c.$t("swapSubmissionError.actionLabel"),onActionClick:e.swapping.resetSubmissionError},null,8,["title","description","actionLabel","onActionClick"])):me("",!0),e.swapping.isJoinExitSwap.value?(F(),Y(I,{key:4,class:"p-3 mt-4",type:"tip",size:"md",title:"",description:i(se)?c.$t("isJoinExitTipDescription.withApproval"):c.$t("isJoinExitTipDescription.withoutApproval"),block:""},null,8,["description"])):me("",!0)]),i(L)?(F(),Y(Za,{key:0,addressIn:e.swapping.tokenIn.value.address,amountIn:e.swapping.tokenInAmountInput.value,addressOut:e.swapping.tokenOut.value.address,amountOut:e.swapping.tokenOutAmountInput.value,pools:i(U),sorReturn:e.swapping.sor.sorReturn.value,class:"mt-3"},null,8,["addressIn","amountIn","addressOut","amountOut","pools","sorReturn"])):me("",!0)]),_:1})}}});const Js=ea(Zs,[["__scopeId","data-v-fd559722"]]),Pa=pe("0.2",18),Ks={}.VITE_GNOSIS_APP_DATA??"0xE9F29AE547955463ED535162AEFEE525D8D309571A2B18BC26086C8C35D781EB",ge=ha({warnings:{highFees:!1},validationError:null,submissionError:null});function Ys({exactIn:e,tokenInAddressInput:t,tokenInAmountInput:a,tokenOutAddressInput:n,tokenOutAmountInput:s,tokenInAmountScaled:p,tokenOutAmountScaled:A,tokenIn:_,tokenOut:x,slippageBufferRate:f}){const{transactionDeadline:R}=vt(),{account:g,getSigner:d}=Ce(),{addTransaction:h}=ua(),{fNum:M}=Me(),{balanceFor:T}=_e(),{isUserRejected:C}=ya(),{t:w}=Ze(),v=$(!1),P=$(!1),b=$(null),q=$(0),N=o(()=>ge.validationError!=null);function l(){const B=b.value??"0",S=p.value.isZero()?"0":A.value.mul(B).div(p.value).toString();return{feeAmountInToken:B,feeAmountOutToken:S}}function E(){const{feeAmountInToken:B,feeAmountOutToken:S}=l(),O=p.value.add(B).mul(pe(String(1+f.value),18)).div(Te),k=A.value.sub(S).mul(Te).div(pe(String(1+f.value),18));return{feeAmountInToken:B,feeAmountOutToken:S,maximumInAmount:O,minimumOutAmount:k}}async function L(B){try{P.value=!0,ge.submissionError=null;const S=E(),O={sellToken:t.value,buyToken:n.value,sellAmount:(e.value?p.value:S.maximumInAmount).sub(S.feeAmountInToken).toString(),buyAmount:e.value?S.minimumOutAmount.toString():A.value.toString(),validTo:Rt(R.value),appData:Ks,feeAmount:S.feeAmountInToken,kind:e.value?na.SELL:na.BUY,receiver:g.value,partiallyFillable:!1,sellTokenBalance:ut.EXTERNAL},{signature:k,signingScheme:D}=await ct(O,d()),U=await Aa.sendSignedOrder({order:{...O,signature:k,receiver:g.value,signingScheme:D},owner:g.value}),we=e.value?a.value:le(S.maximumInAmount,_.value.decimals).toString(),he=e.value?le(S.minimumOutAmount,x.value.decimals).toString():s.value,ae=e.value?"":"~",ce=e.value?"~":"",m=`${ae}${M(we,K.token)} ${_.value.symbol} -> ${ce}${M(he,K.token)} ${x.value.symbol}`,{validTo:W,partiallyFillable:Z}=O;h({id:U,type:"order",action:"swap",summary:m,details:{tokenIn:_.value,tokenOut:x.value,tokenInAddress:t.value,tokenOutAddress:n.value,tokenInAmount:a.value,tokenOutAmount:s.value,exactIn:e.value,quote:S,slippageBufferRate:f.value,order:{validTo:W,partiallyFillable:Z}}}),B!=null&&B(),P.value=!1,pt(dt.CowswapSwap)}catch(S){C(S)||(console.trace(S),ge.submissionError=w("swapException",["Cowswap"]),Sa(new Error(ge.submissionError,{cause:S}))),P.value=!1}}function re(B=!0){ge.warnings.highFees=!1,ge.validationError=null,ge.submissionError=null,B&&(b.value=null)}async function X(){if(e.value&&!a.value||!e.value&&!s.value)return;const B=e.value?p.value:A.value;if(B===void 0)return;if(B.isZero()){e.value?s.value="0":a.value="0";return}v.value=!0,ge.validationError=null,q.value+=1;const S=q.value;try{const O={sellToken:t.value,buyToken:n.value,kind:e.value?na.SELL:na.BUY,fromDecimals:_.value.decimals,toDecimals:x.value.decimals,from:g.value||Re,receiver:g.value||Re,[e.value?"sellAmountAfterFee":"buyAmountAfterFee"]:B.toString(),partiallyFillable:!1},k=await Aa.getPriceQuote(O);if(e.value&&!a.value||!e.value&&!s.value){v.value=!1;return}if(k&&S===q.value)if(b.value=k.feeAmount,e.value){s.value=oe(le(k.buyAmount??"0",x.value.decimals)).toFixed(6,Be.ROUND_DOWN);const{feeAmountInToken:D}=E();ge.warnings.highFees=be.from(D).gt(B.mul(Pa).div(Te))}else{a.value=oe(le(k.sellAmount??"0",_.value.decimals)).toFixed(6,Be.ROUND_DOWN);const{feeAmountOutToken:D,maximumInAmount:U}=E();ge.warnings.highFees=be.from(D).gt(B.mul(Pa).div(Te)),g.value&&oe(le(U,_.value.decimals)).gt(T(_.value.address))&&(ge.validationError=ra.PriceExceedsBalance)}}catch(O){console.log("[CoWswap Quotes] Failed to update quotes",O)}v.value=!1}return{swap:L,handleAmountChange:X,resetState:re,...ga(ge),feeQuote:b,updatingQuotes:v,hasValidationError:N,confirming:P,getQuote:E}}const Oa={}.VITE_SWAP_COST||"100000";class Xs{constructor(t,a,n,s,p){Oe(this,"sorV2");Oe(this,"weth");Oe(this,"fetchStatus",{v2finishedFetch:!1,v2success:!1});Oe(this,"isFetching");Oe(this,"maxPools");Oe(this,"gasPrice");Oe(this,"selectedPools",[]);this.sorV2=la().sor,this.weth=p,this.gasPrice=a,this.maxPools=n,this.isFetching=!1}async setCostOutputToken(t,a,n=null){t=t===Le?this.weth:t,n&&await this.sorV2.swapCostCalculator.setNativeAssetPriceInToken(t,n);const s=await this.sorV2.getCostOfSwapInToken(t,a,this.gasPrice,be.from(Oa));return console.log(`[SorManager] Cost for token ${t}: ${s.toString()}`),s}async fetchPools(){if(!this.isFetching){this.isFetching=!0,console.time("[SorManager] fetchPools");try{const t=await this.sorV2.fetchPools();this.fetchStatus.v2finishedFetch=!0,this.fetchStatus.v2success=t}catch(t){console.log(`[SorManager] V2 fetchPools issue: ${t.message}`),this.fetchStatus.v2finishedFetch=!0,this.fetchStatus.v2success=!1}console.log(`[SorManager] V2 fetchPools result: ${this.fetchStatus.v2success}`),console.timeEnd("[SorManager] V2 fetchPools"),this.selectedPools=this.sorV2.getPools(),this.isFetching=!1}}async getBestSwap(t,a,n,s,p,A){const _=t===Le?Re:t,x=a===Le?Re:a,f=Math.floor(Date.now()/1e3),R={maxPools:this.maxPools,gasPrice:this.gasPrice,swapGas:be.from(Oa),poolTypeFilter:mt.All,timestamp:f,forceRefresh:!0},g=await this.sorV2.getSwaps(_.toLowerCase(),x.toLowerCase(),p,A,R);return console.log(`[SorManager] ${g.returnAmount.toString()}: V2 return amount`),console.log(`[SorManager] ${g.returnAmountConsideringFees.toString()}: V2 return amount with fees`),{tokenIn:t,tokenOut:a,returnDecimals:p===ze.SwapExactIn?s:n,hasSwaps:g.swaps.length>0,returnAmount:g.returnAmount,result:g,marketSpNormalised:g.marketSp}}hasPoolData(){return this.fetchStatus.v2finishedFetch?this.fetchStatus.v2success===!1?(console.log("[SorManager] Error Fetching V2 Pools - No Liquidity Sources."),!1):!0:(console.log("[SorManager] Not finished fetching pools."),!1)}}const en={}.VITE_GAS_PRICE||"100000000000",an={}.VITE_MAX_POOLS||"4",Ba=1e-4,tn=.05,Ae=ha({validationErrors:{highPriceImpact:!1,noSwaps:!1},submissionError:null});function sn({exactIn:e,tokenInAddressInput:t,tokenInAmountInput:a,tokenOutAddressInput:n,tokenOutAmountInput:s,wrapType:p,tokenInAmountScaled:A,tokenOutAmountScaled:_,sorConfig:x={handleAmountsOnFetchPools:!0},tokenIn:f,tokenOut:R,slippageBufferRate:g,isCowswapSwap:d}){let h;const M=$([]),T=$({hasSwaps:!1,tokenIn:"",tokenOut:"",returnDecimals:18,returnAmount:Se,marketSpNormalised:"0",result:{tokenAddresses:[],swaps:[],swapAmount:Se,returnAmount:Se,returnAmountConsideringFees:Se,tokenIn:"",tokenOut:"",marketSp:"0",swapAmountForSwaps:Se,returnAmountFromSwaps:Se}}),C=$(!1),w=$(!1),v=$(0),P=$(""),b=$(!0),{getProvider:q,appNetworkConfig:N}=Ce(),l=o(()=>q()),{trackGoal:E,Goals:L}=ft(),{txListener:re}=fa(),{addTransaction:X}=ua(),{fNum:B,toFiat:S}=Me(),{t:O}=Ze(),{injectTokens:k,priceFor:D,getToken:U}=_e(),{isUserRejected:we}=ya();aa(async()=>{const u=[];t.value&&!U(t.value)&&u.push(t.value),n.value&&!U(n.value)&&u.push(n.value),await k(u),await ae(),await te()});function he(){Ae.validationErrors.highPriceImpact=!1,Ae.validationErrors.noSwaps=!1,Ae.submissionError=null}async function ae(){h=new Xs(wt.jsonProvider,be.from(en),Number(an),xe.network.chainId,xe.network.addresses.weth),ce()}async function ce(){h&&(console.time("[SOR] fetchPools"),await h.fetchPools(),console.timeEnd("[SOR] fetchPools"),b.value=!1,x.handleAmountsOnFetchPools&&te())}function m(){E(L.BalancerSwap),xa.value&&E(L.BalancerSwapMainnet)}async function W(){if(h&&T.value.hasSwaps&&!w.value){const{result:u}=T.value,c=e.value?oa.SwapExactIn:oa.SwapExactOut,y=await la().swaps.queryBatchSwap({kind:c,swaps:u.swaps,assets:u.tokenAddresses});if(u!==T.value.result)return;if(y.length>=2){const z=We(t.value),Q=We(n.value);let I=t.value===Le?Re:t.value,H=n.value===Le?Re:n.value;Ta(t.value)&&(I=xe.network.addresses.wstETH),Ta(n.value)&&(H=xe.network.addresses.wstETH);const V=u.tokenAddresses.indexOf(I.toLowerCase()),ee=u.tokenAddresses.indexOf(H.toLowerCase());let j=be.from(y[V]).abs(),ke=be.from(y[ee]).abs();c===oa.SwapExactOut&&(j=await Pe({amount:j,address:t.value,isInputToken:!1}),a.value=j.gt(0)?Ue(le(j,z)):""),c===oa.SwapExactIn&&(ke=await Pe({amount:ke,address:n.value,isInputToken:!1}),s.value=ke.gt(0)?Ue(le(ke,Q)):"")}}}function Z(u){a.value=u,s.value=u,v.value=0,T.value.hasSwaps=!1,T.value.returnAmount=Se}async function te(){if(d.value)return;let u=e.value?a.value:s.value;if(u===""||u==="0"){Z(u);return}const y=t.value,z=n.value;if(!y||!z){e.value?s.value="":a.value="";return}const Q=We(t.value),I=We(n.value),H=e.value?Q:I;if(u=Ut(u,H),p.value!==de.NonWrap){const V=p.value===de.Wrap?z:y;if(e.value){a.value=u;const ee=await Fa(V,p.value,pe(u,Q));s.value=_a(ee,Q)}else{s.value=u;const ee=await Fa(V,p.value===de.Wrap?de.Unwrap:de.Wrap,pe(u,I));a.value=_a(ee,I)}T.value.hasSwaps=!1,v.value=0;return}if(!h||!h.hasPoolData()){e.value?s.value="":a.value="";return}if(e.value){await ve(n.value,I,h);let V=ca(u,Q);console.log("[SOR Manager] swapExactIn");const ee=await h.getBestSwap(y,z,Q,I,ze.SwapExactIn,V);T.value=ee;let j=ee.returnAmount;if(s.value=j.gt(0)?Ue(le(j,I)):"",!T.value.hasSwaps)v.value=0,Ae.validationErrors.noSwaps=!0;else{V=await Pe({amount:V,address:y,isInputToken:!0}),j=await Pe({amount:j,address:z,isInputToken:!1});const ke=se(I,j,V,ee);v.value=Math.max(Number(le(ke)),Ba)}}else{await ve(t.value,Q,h);let V=ca(u,I);console.log("[SOR Manager] swapExactOut");const ee=await h.getBestSwap(y,z,Q,I,ze.SwapExactOut,V);T.value=ee;let j=ee.returnAmount;if(a.value=j.gt(0)?Ue(le(j,Q)):"",!T.value.hasSwaps)v.value=0,Ae.validationErrors.noSwaps=!0;else{V=await Pe({amount:V,address:z,isInputToken:!0}),j=await Pe({amount:j,address:y,isInputToken:!1});const ke=se(Q,j,V,ee);v.value=Math.max(Number(le(ke)),Ba)}}M.value=h.selectedPools,Ae.validationErrors.highPriceImpact=v.value>=tn}function se(u,c,y,z){const Q=be.from(10).pow(u),I=be.from(10).pow(18);return y.mul(Q).div(c).mul(I).div(ca(Number(z.marketSpNormalised).toFixed(18))).sub(Te)}function ue(u,c){w.value=!1;let y="";const z=B(a.value,{...K.token,maximumSignificantDigits:6}),Q=B(s.value,{...K.token,maximumSignificantDigits:6}),I=f.value.symbol,H=R.value.symbol;["wrap","unwrap"].includes(c)?y=O("transactionSummary.wrapUnwrap",[z,I,H]):y=`${z} ${I} -> ${Q} ${H}`,X({id:u.hash,type:"tx",action:c,summary:y,details:{tokenIn:f.value,tokenOut:R.value,tokenInAddress:t.value,tokenOutAddress:n.value,tokenInAmount:a.value,tokenOutAmount:s.value,exactIn:e.value,quote:Fe(),priceImpact:v.value,slippageBufferRate:g.value}});const V=S(a.value,t.value)||"0";re(u,{onTxConfirmed:()=>{E(L.Swapped,oe(V).times(100).toNumber()||0),C.value=!1,P.value=u.hash},onTxFailed:()=>{C.value=!1}})}async function J(u){E(L.ClickSwap),C.value=!0,w.value=!0,Ae.submissionError=null;const c=t.value,y=n.value,z=U(c).decimals,Q=U(y).decimals,I=pe(a.value,z);if(p.value==de.Wrap){try{const H=await ds(N.key,l.value,y,I);console.log("Wrap tx",H),ue(H,"wrap"),u!=null&&u(),m()}catch(H){Qe(H)}return}else if(p.value==de.Unwrap){try{const H=await vs(N.key,l.value,c,I);console.log("Unwrap tx",H),ue(H,"unwrap"),u!=null&&u(),m()}catch(H){Qe(H)}return}if(e.value){const H=pe(s.value,Q),V=$e(H),ee=T.value;try{const j=await Dt(ee,I,V);console.log("Swap in tx",j),ue(j,"swap"),u!=null&&u(),m()}catch(j){Qe(j)}}else{const H=Ee(I),V=T.value,ee=pe(s.value,Q);try{const j=await Mt(V,H,ee);console.log("Swap out tx",j),ue(j,"swap"),u!=null&&u(),m()}catch(j){Qe(j)}}}function fe(u){const c=D(N.nativeAsset.address),y=D(u);return y===0?0:c/y}async function ve(u,c,y){await y.setCostOutputToken(u,c,fe(u).toString())}function Ee(u){return u.mul(pe(String(1+g.value),18)).div(Te)}function $e(u){return u.mul(Te).div(pe(String(1+g.value),18))}function Fe(){const u=A!=null?Ee(A.value):Se,c=_!=null?$e(_.value):Se;return{feeAmountInToken:"0",feeAmountOutToken:"0",maximumInAmount:u,minimumOutAmount:c}}function Ue(u){return B(u,{maximumSignificantDigits:6,useGrouping:!1,fixedFormat:!0})}function We(u){var c;return(c=U(u))==null?void 0:c.decimals}async function Pe({amount:u,address:c,isInputToken:y}){return Ve(c,N.addresses.stETH)&&xa.value?Ma({amount:u,isWrap:y}):u}function Qe(u){we(u)||(console.trace(u),Ae.submissionError=O("swapException",["Balancer"]),Sa(new Error(Ae.submissionError,{cause:u}))),C.value=!1,w.value=!1}return{...ga(Ae),sorManager:h,sorReturn:T,pools:M,initSor:ae,handleAmountChange:te,exactIn:e,swap:J,swapping:C,priceImpact:v,latestTxHash:P,fetchPools:ce,poolsLoading:b,getQuote:Fe,resetState:he,confirming:w,updateSwapAmounts:W,resetInputAmounts:Z,setSwapCost:ve}}const Ne=ha({validationErrors:{highPriceImpact:!1},submissionError:null});function nn({exactIn:e,tokenInAddressInput:t,tokenInAmountInput:a,tokenOutAddressInput:n,tokenOutAmountInput:s,tokenInAmountScaled:p,tokenOutAmountScaled:A,tokenIn:_,tokenOut:x,slippageBufferRate:f,pools:R}){const g=$(null),d=$(!1),h=$(!1),M=$(0),T=$(""),C=$(!1),{account:w,getSigner:v}=Ce(),{injectTokens:P,getToken:b}=_e(),{relayerSignature:q}=qa(Xe.BATCH_V4),N=Pt($(xe.network.addresses.batchRelayerV4)),{addTransaction:l}=ua(),{txListener:E}=fa(),{fNum:L}=Me(),{isUserRejected:re}=ya(),{t:X}=Ze(),B=o(()=>Ne.validationErrors.highPriceImpact!=!1);function S(){Ne.validationErrors.highPriceImpact=!1,Ne.submissionError=null}function O(m){a.value=m,s.value=m,M.value=0}async function k(){C.value=!0,g.value=await la().sor.getSwaps(t.value,n.value,e.value?ze.SwapExactIn:ze.SwapExactOut,pe(a.value||s.value||"0",18),void 0,!0),C.value=!1}async function D(){var se;if(e.value&&!a.value||!e.value&&!s.value||R.value.length===0)return;const m=e.value?p.value:A.value;if(m===void 0)return;if(m.isZero()){a.value="0",s.value="0";return}await k();const W=ce(t.value),Z=ce(n.value),te=((se=g.value)==null?void 0:se.returnAmount)||be.from("0");te.isZero()||(e.value?s.value=oe(le(te,Z)).toFixed(6,Be.ROUND_DOWN):a.value=oe(le(te,W)).toFixed(6,Be.ROUND_DOWN))}async function U(m){var Z,te;const W=la();try{if(h.value=!0,Ne.submissionError=null,!g.value)return;const se=gt(g.value,R.value,w.value,((Z=W.contracts.relayerV4)==null?void 0:Z.address)??"",W.networkConfig.addresses.tokens.wrappedNativeAsset,String(f.value*1e4),q.value||void 0),J=await new Ge(v()).contract.sendTransaction({contractAddress:((te=W.contracts.relayerV4)==null?void 0:te.address)??"",abi:ht,action:"multicall",params:[se.rawCalls]});console.log(J);const fe=L(a.value,{...K.token,maximumSignificantDigits:6}),ve=L(s.value,{...K.token,maximumSignificantDigits:6});l({id:J.hash,type:"tx",action:"swap",summary:`${fe} ${_.value.symbol} -> ${ve} ${x.value.symbol}`,details:{tokenIn:_.value,tokenOut:x.value,tokenInAddress:t.value,tokenOutAddress:n.value,tokenInAmount:a.value,tokenOutAmount:s.value,exactIn:e.value,quote:ae(),priceImpact:M.value,slippageBufferRate:f.value}}),m!=null&&m(),await E(J,{onTxConfirmed:()=>{h.value=!1,N.refetch()},onTxFailed:()=>{h.value=!1}})}catch(se){re(se)||(console.trace(se),Ne.submissionError=X("swapException",["Relayer"]),Sa(new Error(Ne.submissionError,{cause:se}))),d.value=!1,h.value=!1}}function we(m){return m.mul(pe(String(1+f.value),18)).div(Te)}function he(m){return m.mul(Te).div(pe(String(1+f.value),18))}function ae(){const m=p!=null?we(p.value):Se,W=A!=null?he(A.value):Se;return{feeAmountInToken:"0",feeAmountOutToken:"0",maximumInAmount:m,minimumOutAmount:W}}function ce(m){var W;return(W=b(m))==null?void 0:W.decimals}return aa(async()=>{const m=[];t.value&&!b(t.value)&&m.push(t.value),n.value&&!b(n.value)&&m.push(n.value),await P(m)}),He(R,()=>{D()}),{...ga(Ne),pools:R,hasValidationError:B,handleAmountChange:D,exactIn:e,swap:U,swapInfo:g,swapping:d,priceImpact:M,latestTxHash:T,getQuote:ae,resetState:S,confirming:h,swapInfoLoading:C,resetInputAmounts:O}}const Ke=$(ia(Ia.Swap.Gasless,!0));function on(e,t,a,n,s){const{fNum:p}=Me(),{getToken:A,tokens:_}=_e(),{blockNumber:x}=Ce(),{slippage:f}=Wa(),{setInputAsset:R,setOutputAsset:g}=Ga(),d=o(()=>parseFloat(f.value)),h=o(()=>Ja(t.value,n.value)),M=o(()=>h.value===de.Wrap),T=o(()=>h.value===de.Unwrap),C=o(()=>A(t.value)),w=o(()=>A(n.value)),v=o(()=>t.value===Le),P=o(()=>pe(a.value||"0",C.value.decimals)),b=o(()=>pe(s.value||"0",w.value.decimals)),q=o(()=>!(h.value===de.Unwrap||v.value)),N=o(()=>{var ve,Ee,$e,Fe;const J=parseFloat(a.value),fe=parseFloat(s.value);return J>0&&fe>0?{tokenIn:`1 ${(ve=C.value)==null?void 0:ve.symbol} = ${p(oe(fe).div(J).toString(),K.token)} ${(Ee=w.value)==null?void 0:Ee.symbol}`,tokenOut:`1 ${($e=w.value)==null?void 0:$e.symbol} = ${p(oe(J).div(fe).toString(),K.token)} ${(Fe=C.value)==null?void 0:Fe.symbol}`}:{tokenIn:"",tokenOut:""}}),l=o(()=>St.includes(qe.value)),E=o(()=>{var J,fe,ve,Ee;return h.value!==de.NonWrap?"wrapUnwrap":v.value?"balancer":Ke.value&&l.value?"cowswap":((((J=U.swapInfo.value)==null?void 0:J.returnAmount)&&!((fe=U.swapInfo.value)!=null&&fe.returnAmount.isZero())?yt(e.value?ze.SwapExactIn:ze.SwapExactOut,t.value,n.value):!1)?bt(k.pools.value,((ve=U.swapInfo.value)==null?void 0:ve.swaps)??[],((Ee=U.swapInfo.value)==null?void 0:Ee.tokenAddresses)??[]):!1)?"joinExit":"balancer"}),L=o(()=>E.value==="cowswap"),re=o(()=>E.value==="balancer"),X=o(()=>E.value==="joinExit"),B=o(()=>E.value==="wrapUnwrap"),S=o(()=>v.value||B.value),O=o(()=>parseFloat(a.value)>0&&parseFloat(s.value)>0),k=sn({exactIn:e,tokenInAddressInput:t,tokenInAmountInput:a,tokenOutAddressInput:n,tokenOutAmountInput:s,wrapType:h,tokenInAmountScaled:P,tokenOutAmountScaled:b,sorConfig:{handleAmountsOnFetchPools:!0},tokenIn:C,tokenOut:w,slippageBufferRate:d,isCowswapSwap:L}),D=Ys({exactIn:e,tokenInAddressInput:t,tokenInAmountInput:a,tokenOutAddressInput:n,tokenOutAmountInput:s,tokenInAmountScaled:P,tokenOutAmountScaled:b,tokenIn:C,tokenOut:w,slippageBufferRate:d}),U=nn({exactIn:e,tokenInAddressInput:t,tokenInAmountInput:a,tokenOutAddressInput:n,tokenOutAmountInput:s,tokenInAmountScaled:P,tokenOutAmountScaled:b,tokenIn:C,tokenOut:w,slippageBufferRate:d,pools:k.pools}),we=o(()=>O.value||B.value?!1:L.value?D.updatingQuotes.value:U.swapInfoLoading.value||k.poolsLoading.value),he=o(()=>k.confirming.value||D.confirming.value||U.confirming.value),ae=o(()=>k.submissionError.value||D.submissionError.value||U.submissionError.value);function ce(J){return L.value?D.swap(()=>{J&&J(),D.resetState()}):X.value?U.swap(()=>{J&&J(),U.resetState()}):k.swap(()=>{J&&J(),k.resetState()})}function m(){k.submissionError.value=null,D.submissionError.value=null,U.submissionError.value=null}function W(J){Ke.value=J,ma(Ia.Swap.Gasless,Ke.value)}function Z(){W(!Ke.value),ue()}function te(){return L.value?D.getQuote():X.value?U.getQuote():k.getQuote()}function se(){k.resetInputAmounts("")}async function ue(){e.value?s.value="":a.value="",D.resetState(!1),k.resetState(),U.resetState(),L.value?D.handleAmountChange():(await k.handleAmountChange(),await U.handleAmountChange())}return He(t,async()=>{R(t.value),ue()}),He(n,()=>{g(n.value),ue()}),aa(()=>{window.location.href.includes("gasless=false")&&W(!1)}),He(x,()=>{L.value?D.hasValidationError.value||D.handleAmountChange():X.value?U.hasValidationError.value||U.handleAmountChange():re.value&&k.updateSwapAmounts()}),He(d,()=>{ue()}),{isWrap:M,isUnwrap:T,isEthSwap:v,tokenIn:C,tokenOut:w,tokenInAmountScaled:P,tokenOutAmountScaled:b,tokens:_,requiresTokenApproval:q,effectivePriceMessage:N,swapRoute:E,exactIn:e,isLoading:we,cowswap:D,sor:k,joinExit:U,isCowswapSwap:L,isBalancerSwap:re,isJoinExitSwap:X,wrapType:h,isWrapUnwrapSwap:B,tokenInAddressInput:t,tokenInAmountInput:a,tokenOutAddressInput:n,tokenOutAmountInput:s,slippageBufferRate:d,isConfirming:he,submissionError:ae,resetSubmissionError:m,swapGasless:Ke,toggleSwapGasless:Z,isGaslessSwappingDisabled:S,isCowswapSupportedOnNetwork:l,resetAmounts:se,getQuote:te,swap:ce,handleAmountChange:ue}}function rn(e,t,a,n){const{isWalletReady:s}=Ce(),{balances:p}=_e(),A=o(()=>!R(t.value)&&!R(n.value)),_=o(()=>!e.value||!a.value),x=o(()=>!p.value[e.value]||oe(p.value[e.value]).lt(t.value)),f=o(()=>A.value||_.value?2:s.value&&x.value?4:0);function R(d){return oe(d).gt(0)&&d.trim()!==""}const g=o(()=>f.value);return{validationStatus:f,errorMessage:g,isValidTokenAmount:R}}const ln=je({emits:["toggle"],setup(e,{emit:t}){const a=$(!1);function n(){a.value=!a.value,t("toggle")}return{isRotated:a,toggle:n}}});const un=e=>(Ra("data-v-45cf2bd1"),e=e(),Da(),e),cn=un(()=>r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 21 18",class:"w-5 h-3 icon-swap-toggle"},[r("path",{d:"M6.26693 16.2421L6.26693 3.5252L8.70412 5.96238C9.03943 6.29801 9.58349 6.29801 9.91943 5.96238C10.2554 5.62676 10.2551 5.08301 9.91943 4.74707L6.01537 0.843008C5.97568 0.80332 5.93193 0.767695 5.88537 0.736133C5.87349 0.728633 5.86037 0.72332 5.84849 0.716445C5.81287 0.694883 5.77693 0.67332 5.73787 0.657383C5.72005 0.650195 5.70099 0.646758 5.68287 0.640195C5.64818 0.628633 5.6138 0.615508 5.57724 0.608008C5.52162 0.596758 5.46505 0.59082 5.40724 0.59082C5.34943 0.59082 5.29287 0.596758 5.23724 0.608008C5.20068 0.615195 5.1663 0.62832 5.13162 0.640195C5.11349 0.646758 5.09443 0.649883 5.07662 0.657383C5.03787 0.673633 5.00193 0.694883 4.96599 0.716445C4.95412 0.72332 4.94099 0.728633 4.92912 0.736133C4.88255 0.767695 4.8388 0.80332 4.79912 0.843008L0.895679 4.74645C0.727866 4.91426 0.643804 5.13395 0.643804 5.35395C0.643804 5.57395 0.727866 5.79363 0.895679 5.96145C1.23099 6.29707 1.77505 6.29707 2.11099 5.96145L4.54787 3.52488L4.54787 16.2418C4.54787 16.7164 4.93255 17.1011 5.40724 17.1011C5.88193 17.1011 6.26693 16.7168 6.26693 16.2421Z",class:"fill-current text-secondary"}),r("path",{d:"M15.7625 17.2669C15.7987 17.2597 15.8328 17.2469 15.8672 17.235C15.8856 17.2284 15.905 17.2253 15.9231 17.2175C15.9612 17.2013 15.9966 17.1806 16.0322 17.1591C16.0447 17.1519 16.0584 17.1462 16.0706 17.1384C16.1172 17.1069 16.1609 17.0713 16.2006 17.0316L20.1037 13.1284C20.4394 12.7928 20.4394 12.2491 20.1037 11.9131C19.7684 11.5775 19.2244 11.5775 18.8884 11.9131L16.4516 14.3497V1.63281C16.4516 1.15813 16.0669 0.773438 15.5922 0.773438C15.1175 0.773438 14.7328 1.15813 14.7328 1.63281V14.3497L12.2956 11.9125C11.9603 11.5769 11.4163 11.5769 11.0803 11.9125C10.9125 12.0803 10.8284 12.3 10.8284 12.52C10.8284 12.74 10.9125 12.9597 11.0803 13.1275L14.9841 17.0316C15.0238 17.0713 15.0675 17.1069 15.1141 17.1384C15.1262 17.1462 15.14 17.1519 15.1525 17.1591C15.1878 17.1803 15.2234 17.2013 15.2616 17.2175C15.2797 17.225 15.2991 17.2284 15.3175 17.235C15.3519 17.2466 15.3859 17.2594 15.4222 17.2669C15.4778 17.2778 15.5344 17.2841 15.5922 17.2841C15.65 17.2841 15.7069 17.2778 15.7625 17.2669Z",class:"text-blue-600 group-hover:text-pink-500 dark:text-blue-400 dark:group-hover:text-yellow-500 dark:group-focus:text-yellow-500 fill-current"})],-1)),pn=[cn];function dn(e,t,a,n,s,p){return F(),ie("div",{class:"group flex justify-center items-center w-9 h-9 bg-gray-50 dark:bg-gray-900 rounded-full shadow cursor-pointer toggle-btn",onClick:t[0]||(t[0]=(...A)=>e.toggle&&e.toggle(...A)),style:{"background-color":"#1d5264",background:"#07394a","border-radius":"50%",height:"38px","z-index":"1"}},[r("div",{class:va(["duration-300 ease-in-out",{"rotate-180":e.isRotated}])},pn,2)])}const vn=ea(ln,[["render",dn],["__scopeId","data-v-45cf2bd1"]]),mn={class:"flex items-center my-2"},wn=r("div",{class:"mx-2 h-px bg-gray-100 dark:bg-gray-700 grow",style:{"background-color":"#ffffff00"}},null,-1),fn=r("div",{class:"mx-2 h-px bg-gray-100 dark:bg-gray-700 grow",style:{"background-color":"#ffffff00"}},null,-1),gn=["innerHTML"],hn=je({__name:"SwapPair",props:{tokenInAmount:null,tokenInAddress:null,tokenOutAmount:null,tokenOutAddress:null,exactIn:{type:Boolean},priceImpact:null,effectivePriceMessage:null,swapLoading:{type:Boolean}},emits:["update:tokenInAmount","update:tokenInAddress","update:tokenOutAmount","update:tokenOutAddress","update:exactIn","amountChange"],setup(e,{emit:t}){const a=e,{fNum:n}=Me(),{getToken:s}=_e(),{veBalTokenInfo:p}=Et(),A=$(""),_=$(""),x=$(""),f=$(""),R=$(!0),g=$(void 0),d=o(()=>!_.value||!f.value),h=o(()=>!A.value||!x.value),M=o(()=>s(_.value)),T=o(()=>s(f.value)),C=o(()=>{if(d.value||h.value)return"";if(a.effectivePriceMessage)return R.value?a.effectivePriceMessage.value.tokenIn:a.effectivePriceMessage.value.tokenOut;let l,E,L;return R.value?(l=oe(x.value).div(A.value).toString(),E=M.value.symbol,L=T.value.symbol):(l=oe(A.value).div(x.value).toString(),E=T.value.symbol,L=M.value.symbol),`1 ${E} = ${n(l,K.token)} ${L}`});function w(l){g.value&&clearTimeout(g.value),g.value=setTimeout(()=>{l()},300)}function v(l){t("update:tokenInAmount",l),w(()=>{t("amountChange")})}function P(l){t("update:tokenOutAmount",l),w(()=>{t("amountChange")})}function b(){t("update:exactIn",!a.exactIn),t("update:tokenInAmount",x.value),t("update:tokenInAddress",f.value),t("update:tokenOutAmount",A.value),t("update:tokenOutAddress",_.value),t("amountChange")}async function q(l){if(l===f.value){b();return}t("update:tokenInAddress",l)}async function N(l){if(l===_.value){b();return}t("update:tokenOutAddress",l)}return kt(()=>{A.value=a.tokenInAmount,_.value=a.tokenInAddress,x.value=a.tokenOutAmount,f.value=a.tokenOutAddress}),aa(()=>{a.tokenOutAmount&&P(a.tokenOutAmount)}),(l,E)=>{var L,re;return F(),ie("div",null,[ne($a,{amount:i(A),address:i(_),name:"tokenIn",excludedTokens:[(L=i(p))==null?void 0:L.address],ignoreWalletBalance:e.swapLoading,autoFocus:"","onUpdate:amount":v,"onUpdate:address":q,onInput:E[0]||(E[0]=X=>t("update:exactIn",!0)),onSetMax:E[1]||(E[1]=X=>t("update:exactIn",!0))},null,8,["amount","address","excludedTokens","ignoreWalletBalance"]),r("div",mn,[wn,ne(vn,{onToggle:b}),fn,i(C)?(F(),ie("div",{key:0,class:"flex items-center text-xs text-gray-600 dark:text-gray-400 cursor-pointer",onClick:E[2]||(E[2]=X=>R.value=!i(R)),innerHTML:i(C)},null,8,gn)):me("",!0)]),ne($a,{amount:i(x),address:i(f),name:"tokenOut",priceImpact:e.priceImpact,noRules:"",noMax:"",disableNativeAssetBuffer:"",excludedTokens:[(re=i(p))==null?void 0:re.address],"onUpdate:amount":P,"onUpdate:address":N,onInput:E[3]||(E[3]=X=>t("update:exactIn",!1))},null,8,["amount","address","priceImpact","excludedTokens"])])}}}),Sn=je({components:{SwapPair:hn,SwapPreviewModal:Js,SwapRoute:Za,SwapSettingsPopover:Ot},setup(){const{inputAsset:e,outputAsset:t}=Ga(),a=Tt(),{t:n}=Ze(),{bp:s}=At(),{fNum:p}=Me(),{appNetworkConfig:A,isMismatchedNetwork:_}=Ce(),{nativeAsset:x}=_e(),{tokenInAddress:f,tokenOutAddress:R,tokenInAmount:g,tokenOutAmount:d,setTokenInAddress:h,setTokenOutAddress:M,setTokenInAmount:T,setTokenOutAmount:C,setInitialized:w}=Lt(),v=$(!0),P=$(!1),b=$({highPriceImpact:!1}),q=ia("alwaysShowRoutes",!1),N=o(()=>{switch(s.value){case"xs":return"none";case"sm":return"lg";default:return"xl"}}),l=on(v,f,g,R,d),{errorMessage:E}=rn(f,g,R,d),L=o(()=>l.sor.validationErrors.value.highPriceImpact&&!b.value.highPriceImpact),re=o(()=>{const m=_.value,W=!g.value||!d.value,Z=l.isCowswapSwap.value&&l.cowswap.hasValidationError.value,te=l.isBalancerSwap.value&&L.value;return W||Z||te||m}),X=o(()=>l.wrapType.value===de.Wrap?`${n("wrap")} ${l.tokenIn.value.symbol}`:l.wrapType.value===de.Unwrap?`${n("unwrap")} ${l.tokenOut.value.symbol}`:n("Swap")),B=o(()=>l.sor.pools.value),S=o(()=>{if(_.value)return{header:n("switchNetwork"),body:n("networkMismatch",[A.name])};if(l.isBalancerSwap.value&&!l.isLoading.value&&l.sor.validationErrors.value.noSwaps)return{header:n("insufficientLiquidity"),body:n("insufficientLiquidityDetailed")};if(l.isCowswapSwap.value){if(l.cowswap.validationError.value!=null){const m=l.cowswap.validationError.value;return m===ra.SellAmountDoesNotCoverFee?{header:n("cowswapErrors.lowAmount.header"),body:n("cowswapErrors.lowAmount.body")}:m===ra.PriceExceedsBalance?{header:n("cowswapErrors.lowBalance.header",[l.tokenIn.value.symbol]),body:n("cowswapErrors.lowBalance.body",[l.tokenIn.value.symbol,p(le(l.getQuote().maximumInAmount,l.tokenIn.value.decimals),K.token),p(l.slippageBufferRate.value,K.percent)])}:m===ra.NoLiquidity?{header:n("cowswapErrors.noLiquidity.header",[l.tokenIn.value.symbol]),body:n("cowswapErrors.noLiquidity.body")}:{header:n("cowswapErrors.genericError.header"),body:l.cowswap.validationError.value}}}else if(l.isBalancerSwap.value&&L.value)return{header:n("highPriceImpact"),body:n("highPriceImpactDetailed"),label:n("accept")}}),O=o(()=>{if(l.isCowswapSwap.value&&l.cowswap.warnings.value.highFees)return{header:n("cowswapWarnings.highFees.header"),body:n("cowswapWarnings.highFees.body")}});function k(){l.swap(()=>{l.resetAmounts(),P.value=!1})}function D(){l.sor.validationErrors.value.highPriceImpact&&(b.value.highPriceImpact=!0)}function U(m){var W,Z;return(m==null?void 0:m.toLowerCase())===((W=x.deeplinkId)==null?void 0:W.toLowerCase())||(m==null?void 0:m.toLowerCase())===((Z=x.symbol)==null?void 0:Z.toLowerCase())}async function we(){var se,ue;let m=a.currentRoute.value.params.assetIn;U(m)?m=x.address:Ca(m)&&(m=Ie(m));let W=a.currentRoute.value.params.assetOut;U(W)?W=x.address:Ca(W)&&(W=Ie(W)),h(m||e),M(W||t);let Z=(se=a.currentRoute.value.query)==null?void 0:se.inAmount,te=(ue=a.currentRoute.value.query)==null?void 0:ue.outAmount;Z&&T(Z),!Z&&te&&C(te)}function he(){f.value=A.addresses.weth}function ae(){l.resetSubmissionError(),P.value=!0}function ce(){l.resetSubmissionError(),P.value=!1}return _t(()=>{we(),w(!0)}),{TOKENS:xt,SwapSettingsContext:Bt,tokenInAddress:f,tokenInAmount:g,tokenOutAddress:R,tokenOutAmount:d,modalSwapPreviewIsOpen:P,alwaysShowRoutes:q,exactIn:v,swapping:l,pools:B,title:X,error:S,warning:O,errorMessage:E,isRequired:Wt,swapDisabled:re,swapCardShadow:N,handlePreviewButton:ae,handlePreviewModalClose:ce,swap:k,switchToWETH:he,handleErrorButtonClick:D}}});const yn={style:{"padding-top":"20px"}};function bn(e,t,a,n,s,p){const A=pa("SwapPair"),_=Va,x=Na,f=pa("SwapRoute"),R=wa,g=pa("SwapPreviewModal");return F(),ie(Ye,null,[ne(R,{class:"relative card-container",shadow:e.swapCardShadow,noBorder:""},{default:ye(()=>[r("div",yn,[ne(A,{tokenInAmount:e.tokenInAmount,"onUpdate:tokenInAmount":t[0]||(t[0]=d=>e.tokenInAmount=d),tokenInAddress:e.tokenInAddress,"onUpdate:tokenInAddress":t[1]||(t[1]=d=>e.tokenInAddress=d),tokenOutAmount:e.tokenOutAmount,"onUpdate:tokenOutAmount":t[2]||(t[2]=d=>e.tokenOutAmount=d),tokenOutAddress:e.tokenOutAddress,"onUpdate:tokenOutAddress":t[3]||(t[3]=d=>e.tokenOutAddress=d),exactIn:e.exactIn,"onUpdate:exactIn":t[4]||(t[4]=d=>e.exactIn=d),swapLoading:e.swapping.isBalancerSwap.value?e.swapping.isLoading.value:!1,effectivePriceMessage:e.swapping.effectivePriceMessage,class:"mb-4",onAmountChange:e.swapping.handleAmountChange},null,8,["tokenInAmount","tokenInAddress","tokenOutAmount","tokenOutAddress","exactIn","swapLoading","effectivePriceMessage","onAmountChange"]),e.error?(F(),Y(_,{key:0,class:"p-3 mb-4",type:"error",size:"sm",title:e.error.header,description:e.error.body,actionLabel:e.error.label,block:"",onActionClick:e.handleErrorButtonClick},null,8,["title","description","actionLabel","onActionClick"])):e.warning?(F(),Y(_,{key:1,class:"p-3 mb-4",type:"warning",size:"sm",title:e.warning.header,description:e.warning.body,block:""},null,8,["title","description"])):me("",!0),e.swapping.isLoading.value?(F(),Y(x,{key:2,loading:"",disabled:"",loadingLabel:e.swapping.isCowswapSwap.value?e.$t("loadingBestPrice"):e.$t("loading"),block:""},null,8,["loadingLabel"])):(F(),Y(x,{key:3,label:e.$t("preview"),disabled:e.swapDisabled,color:"gradient",block:"",onClick:Ua(e.handlePreviewButton,["prevent"])},null,8,["label","disabled","onClick"])),e.alwaysShowRoutes?(F(),Y(f,{key:4,addressIn:e.swapping.tokenIn.value.address,amountIn:e.swapping.tokenInAmountInput.value,addressOut:e.swapping.tokenOut.value.address,amountOut:e.swapping.tokenOutAmountInput.value,pools:e.pools,sorReturn:e.swapping.sor.sorReturn.value,class:"mt-4"},null,8,["addressIn","amountIn","addressOut","amountOut","pools","sorReturn"])):me("",!0)])]),_:1},8,["shadow"]),(F(),Y(Ct,{to:"#modal"},[e.modalSwapPreviewIsOpen?(F(),Y(g,{key:0,swapping:e.swapping,error:e.error,warning:e.warning,onSwap:e.swap,onClose:e.handlePreviewModalClose},null,8,["swapping","error","warning","onSwap","onClose"])):me("",!0)]))],64)}const En=ea(Sn,[["render",bn],["__scopeId","data-v-c6871482"]]),kn=je({__name:"swap",setup(e){const{setSelectedTokens:t}=It();return aa(()=>{t([])}),(a,n)=>(F(),ie("div",null,[ne(Nt,{offsetGutters:"",mobileHideGutters:"",class:"mt-8"},{default:ye(()=>[ne(En)]),_:1})]))}});const Nn=ea(kn,[["__scopeId","data-v-8001fe94"]]);export{Nn as default};
//# sourceMappingURL=swap-dd1b8f34.js.map
