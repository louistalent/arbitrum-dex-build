import{_ as ye}from"./BalLoadingBlock.vue_vue_type_style_index_0_lang-3fa460ee.js";import{C as he}from"./Col3Layout-4539059c.js";import{u as Ae}from"./usePoolQuery-b97c571a.js";import{an as Q,ao as ae,ap as Be,aq as Ee,ar as we,d as B,o as W,c as k,s,t as f,B as h,D as n,H as c,C as y,a1 as C,v as e,G as L,a0 as V,a2 as H,j as se,a8 as G,a9 as ce,ak as U,b as Y,p as R,z as O,F as x,_ as de,e as me,as as Pe,at as $e,au as le,av as xe,u as ie,ag as Ve,af as De,y as E,aw as oe,Z as Ie,$ as ke,ax as Ce,a as _e,U as M,ay as Se,a7 as pe,az as Z,a6 as Me,aA as ve,aB as fe,aC as Ne,aD as Le,aE as Fe,aF as Oe,x as Re,aG as Ke}from"./index-4a1c513c.js";import{_ as je}from"./BalAccordion.vue_vue_type_script_setup_true_lang-b50b54c6.js";import{_ as qe}from"./MyVeBAL.vue_vue_type_script_setup_true_lang-68c0fe06.js";import{M as We,a as He,f as z,P as ne,I as Ue}from"./constants-f98f285a.js";import{g as Xe,n as ze,u as Qe}from"./useVotingGauges-615a5ed4.js";import{_ as Ge}from"./BalCircle-e6fd1d55.js";import{_ as Ye}from"./useTransactionErrors-09c4ac25.js";import{_ as Ze}from"./BalActionSteps.vue_vue_type_script_setup_true_lang-78b4efb6.js";import{u as Je,A as eo}from"./useTokenApprovalActions-8e0c610b.js";import{_ as oo}from"./BalAsset-fe687731.js";import{_ as to}from"./TokenInput.vue_vue_type_script_setup_true_lang-d6685049.js";import{_ as lo}from"./validations-f14f6fca.js";import"./tslib.es6-b45817b3.js";import"./numeral-7364357d.js";function te(o,l){Q(2,arguments);var t=Be(l),a=t*7;return ae(o,a)}function no(o){return Q(1,arguments),Ee(o).getDay()===4}function ao(o,l){Q(2,arguments);var t=Xe(o)-l;return t<=0&&(t+=7),we(o,t)}function so(o){return Q(1,arguments),ao(o,4)}const co={class:"group flex justify-between items-center p-4 w-full rounded-xl"},io={class:"group-hover:text-blue-500 transition-colors"},ro={class:"p-4 border-t dark:border-gray-900"},uo={class:"text-secondary"},mo={class:"text-sm steps"},ko=["innerHTML"],_o=B({__name:"HowToLock",props:{lockablePool:null,lockablePoolTokenInfo:null},setup(o){const l=o,{t}=W(),{networkSlug:a}=se(),r=k(()=>[t("getVeBAL.howToLock.steps.lock",[l.lockablePoolTokenInfo.symbol]),t("getVeBAL.howToLock.earn.boost"),t("getVeBAL.howToLock.earn.voting")]);return(i,d)=>{const m=G,p=ce,v=je;return s(),f(v,{class:"mt-4",showSectionBorder:!1,sections:[{title:i.$t("getVeBAL.howToLock.title"),id:"how-to-lock",handle:"how-to-lock-handle"}]},{"how-to-lock-handle":h(()=>[n("button",co,[n("h6",io,c(i.$t("getVeBAL.howToLock.title")),1),y(m,{name:"chevron-down",class:"text-blue-500 group-hover:text-pink-500 transition-colors"})])]),"how-to-lock":h(()=>[n("div",ro,[n("div",uo,[n("ol",mo,[n("li",null,[C(c(i.$t("getVeBAL.howToLock.steps.investPart1"))+" ",1),y(p,{tag:"router-link",to:{name:"add-liquidity",params:{networkSlug:e(a),id:o.lockablePool.id}},external:""},{default:h(()=>[C(c(o.lockablePoolTokenInfo.symbol),1)]),_:1},8,["to"]),C(" "+c(i.$t("getVeBAL.howToLock.steps.investPart2")),1)]),(s(!0),L(V,null,H(e(r),(u,T)=>(s(),L("li",{key:T,innerHTML:u},null,8,ko))),128))])])])]),_:1},8,["sections"])}}});const ue=U(_o,[["__scopeId","data-v-52f15134"]]),po={class:"p-4 w-full border-b dark:border-gray-900"},vo={class:"p-4 -mt-2"},fo={class:"flex justify-between"},Lo={class:"flex justify-between text-secondary"},bo=B({__name:"LockableTokens",props:{lockablePool:null,lockablePoolTokenInfo:null,veBalLockInfo:null},setup(o){const l=o,{balanceFor:t}=Y(),{fNum:a}=R(),{networkSlug:r}=se(),i=k(()=>t(l.lockablePool.address)),d=k(()=>O(l.lockablePool.totalLiquidity).div(l.lockablePool.totalShares).times(i.value).toString());return(m,p)=>{const v=ce,u=de;return s(),f(u,{noPad:"",shadow:"none"},{default:h(()=>[n("div",po,[n("h6",null,c(m.$t("getVeBAL.lockableTokens.title")),1)]),n("div",vo,[n("div",fo,[n("div",null,c(o.lockablePoolTokenInfo.symbol),1),n("div",null,c(e(a)(e(i),e(x).token)),1)]),n("div",Lo,[n("div",null,c(o.lockablePoolTokenInfo.name),1),n("div",null,c(e(a)(e(d),e(x).fiat)),1)]),y(v,{tag:"router-link",to:{name:"add-liquidity",params:{networkSlug:e(r),id:o.lockablePool.id}},external:"",class:"block mt-2 text-sm"},{default:h(()=>[C(c(m.$t("getVeBAL.lockableTokens.getMoreVeBAL",[o.lockablePoolTokenInfo.symbol])),1)]),_:1},8,["to"])])]),_:1})}}});var A=(o=>(o.CREATE_LOCK="createLock",o.EXTEND_LOCK="extendLock",o.INCREASE_LOCK="increaseLock",o))(A||{});const be=me({lockAmount:"",lockEndDate:""});function go(){be.lockAmount=""}function K(){return{...Pe(be),resetState:go}}function To(o){const{lockAmount:l}=K(),t=k(()=>O(l.value||"0").gt(0)),a=k(()=>{var i;return((i=o==null?void 0:o.value)==null?void 0:i.hasExistingLock)&&t.value}),r=k(()=>{var i;return(i=o==null?void 0:o.value)!=null&&i.hasExistingLock?O(o.value.lockedAmount).plus(l.value||"0").toString():l.value||"0"});return{isValidLockAmount:t,isIncreasedLockAmount:a,totalLpTokens:r}}function yo(o){const l=ae(o,He),t=no(l)?l:so(l);return le(t).getTime()}function ho(o){const l=$e(new Date),t=le(ze(ae(o!=null&&o.hasExistingLock?o.lockedEndDate:l,We))).getTime(),a=yo(l),{lockEndDate:r}=K(),i=k(()=>r.value===""?0:le(new Date(r.value)).getTime()),d=k(()=>i.value>=t&&i.value<=a),m=k(()=>(o==null?void 0:o.hasExistingLock)&&d.value);return{todaysDate:l,minLockEndDateTimestamp:t,maxLockEndDateTimestamp:a,isValidLockEndDate:d,isExtendedLockEndDate:m}}const Ao={class:"flex items-center"},Bo={class:"ml-2"},Eo=B({__name:"LockActions",props:{lockablePoolTokenInfo:null,lockAmount:null,lockEndDate:null,lockType:null,lockConfirmed:{type:Boolean},veBalLockInfo:null},emits:["success"],setup(o,{emit:l}){const t=o,a=me(t.lockType.map(()=>({init:!1,confirming:!1,confirmed:!1,confirmedAt:""}))),{t:r}=W(),{networkConfig:i}=xe(),{getProvider:d,explorerLinks:m}=ie(),{addTransaction:p}=Ve(),{txListener:v,getTxConfirmedAt:u}=De(),{getTokenApprovalActionsForSpender:T}=Je(E([t.lockablePoolTokenInfo.address]),E([t.lockAmount]),eo.Locking),{fNum:w}=R(),{totalVotes:P,unallocatedVotes:D}=Qe(),{networkSlug:N}=se(),$=t.lockType.map((_,b)=>({label:r(`getVeBAL.previewModal.actions.${_}.label`,[z(new Date(t.lockEndDate),ne)]),loadingLabel:r(`getVeBAL.previewModal.actions.${_}.loadingLabel`),confirmingLabel:r(`getVeBAL.previewModal.actions.${_}.confirming`),action:()=>q(_,b),stepTooltip:r(`getVeBAL.previewModal.actions.${_}.tooltip`)})),I=E([...$]),F=k(()=>a.every(_=>_.confirmed)),X=k(()=>P!==D.value);async function j(_,b,g){p({id:_.hash,type:"tx",action:b,summary:b===A.EXTEND_LOCK?r("transactionSummary.extendLock",[z(new Date(t.lockEndDate),ne)]):`${w(t.lockAmount,x.token)} ${t.lockablePoolTokenInfo.symbol}`,details:{lockAmount:t.lockAmount,lockEndDate:t.lockEndDate,lockType:b}}),a[g].confirmed=await v(_,{onTxConfirmed:async S=>{a[g].confirming=!1,a[g].receipt=S;const J=await u(S);a[g].confirmedAt=Se(J)},onTxFailed:()=>{a[g].confirming=!1}})}async function q(_,b){try{let g;if(a[b].init=!0,_===A.CREATE_LOCK)g=await oe.veBAL.createLock(d(),t.lockAmount,t.lockEndDate);else if(_===A.EXTEND_LOCK)g=await oe.veBAL.extendLock(d(),t.lockEndDate);else if(_===A.INCREASE_LOCK)g=await oe.veBAL.increaseLock(d(),t.lockAmount);else throw new Error("Unsupported lockType provided");return a[b].init=!1,a[b].confirming=!0,console.log("Receipt",g),j(g,_,b),g}catch(g){return console.error(g),Promise.reject(g)}}return Ie(F,()=>{F.value&&l("success",a)}),ke(async()=>{const _=Ce(t.lockAmount,t.lockablePoolTokenInfo.decimals).toString(),b=await T(_e.network.addresses.veBAL,_);I.value.unshift(...b)}),(_,b)=>{const g=Ze,S=G,J=ce,re=Ye,ge=pe;return s(),L("div",null,[e(F)?(s(),L(V,{key:1},[(s(!0),L(V,null,H(a,(ee,Te)=>(s(),L("div",{key:Te,class:"flex justify-between items-center mt-4 text-sm text-gray-400 dark:text-gray-600"},[n("div",Ao,[y(S,{name:"clock"}),n("span",Bo,c(ee.confirmedAt),1)]),ee.receipt?(s(),f(J,{key:0,href:e(m).txLink(ee.receipt.transactionHash),external:"",noStyle:"",class:"group flex items-center"},{default:h(()=>[C(c(e(i).explorerName)+" ",1),y(S,{name:"arrow-up-right",size:"sm",class:"ml-px group-hover:text-pink-500 transition-colors"})]),_:2},1032,["href"])):M("",!0)]))),128)),o.lockConfirmed&&!o.veBalLockInfo.hasExistingLock?(s(),f(re,{key:0,class:"mt-4",type:"tip",title:e(r)("getVeBAL.previewModal.firstVeBALReceived.title"),description:e(r)("getVeBAL.previewModal.firstVeBALReceived.description")},null,8,["title","description"])):e(X)?(s(),f(re,{key:1,class:"mt-4",type:"warning",title:e(r)("veBAL.liquidityMining.resubmit.hint.title"),description:e(r)("veBAL.liquidityMining.resubmit.hint.description")},null,8,["title","description"])):M("",!0),y(ge,{tag:"router-link",to:{name:"vebal",params:{networkSlug:e(N)}},color:"gray",outline:"",block:"",class:"mt-4"},{default:h(()=>[C(c(_.$t("getVeBAL.previewModal.returnToVeBalPage")),1)]),_:1},8,["to"])],64)):(s(),f(g,{key:0,actions:I.value},null,8,["actions"]))])}}}),wo={class:"container"},Po={class:"flex justify-between items-center p-3"},$o={class:"font-semibold"},xo={class:"text-gray-400 dark:text-gray-600"},Vo={class:"grid grid-cols-2 gap-1"},Do=B({__name:"LockAmount",props:{lockablePool:null,totalLpTokens:null},setup(o){const l=o,{getToken:t}=Y(),{fNum:a}=R(),r=k(()=>l.lockablePool.tokens.map(d=>{const m=i(d.weight),p=d.symbol??t(d.address).symbol;return`${m} ${p}`}).join(" / "));function i(d){return a(d||"0",{style:"percent",maximumFractionDigits:0})}return(d,m)=>{const p=oo;return s(),L("div",wo,[n("div",Po,[n("div",null,[n("div",$o,c(d.$t("getVeBAL.previewModal.lpTokens",[e(a)(o.totalLpTokens,e(x).token)])),1),n("div",xo,c(e(r)),1)]),n("div",Vo,[(s(!0),L(V,null,H(o.lockablePool.tokensList,v=>(s(),f(p,{key:v,address:v,size:30},null,8,["address"]))),128))])])])}}});const Io=U(Do,[["__scopeId","data-v-19ac0f78"]]),Co={class:"text-sm divide-y dark:divide-gray-900"},So={class:"p-3 bg-gray-50 dark:bg-gray-700 rounded-t"},Mo={class:"p-3"},No={class:"mb-3 text-secondary"},Fo={class:"flex items-center mb-1 whitespace-nowrap"},Oo={class:"w-full table-fixed"},Ro={class:"table-header-cell"},Ko={class:"table-header-cell"},jo={class:"table-body-cell"},qo={class:"table-body-cell"},Wo=B({__name:"VeBalTooltipExplainer",props:{totalLpTokens:null,lockEndDate:null,expectedVeBalAmount:null},setup(o){const{fNum:l}=R(),{veBalTokenInfo:t}=Z(),{t:a}=W(),r=k(()=>[{label:a("getVeBAL.lockForm.lockPeriods.1y"),value:`~1 ${t.value.symbol}`},{label:a("getVeBAL.lockForm.lockPeriods.6m"),value:`~0.5 ${t.value.symbol}`},{label:a("getVeBAL.lockForm.lockPeriods.3m"),value:`~0.25 ${t.value.symbol}`}]);return(i,d)=>{const m=G,p=Me;return s(),f(p,{width:"72",noPad:"",class:"ml-2"},{activator:h(()=>[y(m,{name:"info",size:"sm",class:"text-secondary"})]),default:h(()=>[n("div",Co,[n("div",So,[n("h5",null,c(e(l)(o.expectedVeBalAmount,e(x).token))+" "+c(e(t).symbol),1)]),n("div",Mo,[n("div",No,c(i.$t("getVeBAL.previewModal.summary.totalVotingEscrowTooltip.explainer")),1),n("div",Fo,[n("table",Oo,[n("thead",null,[n("tr",null,[n("th",Ro,c(i.$t("getVeBAL.previewModal.summary.totalVotingEscrowTooltip.table.lockPeriod")),1),n("th",Ko,c(i.$t("getVeBAL.previewModal.summary.totalVotingEscrowTooltip.table.totalVeBAL")),1)])]),n("tbody",null,[(s(!0),L(V,null,H(e(r),(v,u)=>(s(),L("tr",{key:u},[n("td",jo,c(v.label),1),n("td",qo,c(v.value),1)]))),128))])])])])])]),_:1})}}});const Ho=U(Wo,[["__scopeId","data-v-b1cc880d"]]),Uo={class:"summary-table"},Xo={class:"p-2"},zo={class:"p-2"},Qo={class:"summary-item-row"},Go={key:0,class:"summary-item-row"},Yo={class:"summary-item-row"},Zo={class:"summary-item-row"},Jo={class:"flex items-center"},et=B({__name:"LockSummary",props:{lockablePool:null,totalLpTokens:null,lockEndDate:null,lockAmount:null,expectedVeBalAmount:null,lockType:null,veBalLockInfo:null},setup(o){const l=o,{fNum:t}=R(),{veBalTokenInfo:a}=Z(),r=k(()=>O(l.lockablePool.totalLiquidity).div(l.lockablePool.totalShares)),i=k(()=>r.value.times(l.veBalLockInfo.lockedAmount).toString()),d=k(()=>r.value.times(l.lockAmount).toString()),m=k(()=>r.value.times(l.totalLpTokens).toString()),p=k(()=>l.lockType.length===1&&l.lockType.includes(A.EXTEND_LOCK)),v=k(()=>l.lockType.length===1&&l.lockType.includes(A.INCREASE_LOCK));return(u,T)=>(s(),L("div",Uo,[n("h6",Xo,c(u.$t("getVeBAL.previewModal.summary.title")),1),n("div",zo,[n("div",Qo,[n("div",null,c(e(p)||e(v)?u.$t("getVeBAL.previewModal.summary.totalAlreadyLocked"):u.$t("getVeBAL.previewModal.summary.totalToLock")),1),n("div",null,c(e(t)(e(v)?e(i):e(m),e(x).fiat)),1)]),e(v)?(s(),L("div",Go,[n("div",null,c(u.$t("getVeBAL.previewModal.summary.increasedLockAmount")),1),n("div",null,c(e(t)(e(d),e(x).fiat)),1)])):M("",!0),n("div",Yo,[n("div",null,c(e(p)?u.$t("getVeBAL.previewModal.summary.newLockEndDate"):u.$t("getVeBAL.previewModal.summary.lockEndDate")),1),n("div",null,c(e(z)(new Date(o.lockEndDate),e(ne))),1)]),n("div",Zo,[n("div",null,c(u.$t("getVeBAL.previewModal.summary.totalVotingEscrow")),1),n("div",Jo,[C(c(e(t)(o.expectedVeBalAmount,e(x).token))+" "+c(e(a).symbol)+" ",1),y(Ho,{expectedVeBalAmount:o.expectedVeBalAmount,lockEndDate:o.lockEndDate,totalLpTokens:o.totalLpTokens},null,8,["expectedVeBalAmount","lockEndDate","totalLpTokens"])])])])]))}});const ot=U(et,[["__scopeId","data-v-e42967d7"]]),tt={class:"flex items-center"},lt=B({__name:"LockPreviewModal",props:{lockablePool:null,lockablePoolTokenInfo:null,lockAmount:null,lockEndDate:null,lockType:null,veBalLockInfo:null,totalLpTokens:null},emits:["close"],setup(o,{emit:l}){const t=o,a=E(!1),r=E(t.lockablePool),i=E(t.lockablePoolTokenInfo),d=E(t.lockAmount),m=E(t.lockEndDate),p=E(t.lockType),v=E(t.veBalLockInfo),u=E(t.totalLpTokens),T=ve(u.value,m.value),{t:w}=W(),{refetch:P}=fe(),{resetState:D}=K(),N=k(()=>p.value.length===1?a.value?w(`getVeBAL.previewModal.titles.${p.value[0]}.confirmed`):w(`getVeBAL.previewModal.titles.${p.value[0]}.default`):a.value?w(`getVeBAL.previewModal.titles.${A.CREATE_LOCK}.confirmed`):w(`getVeBAL.previewModal.titles.${A.CREATE_LOCK}.default`));function $(){l("close")}function I(){a.value=!0,P(),D()}return(F,X)=>{const j=G,q=Ge,_=Ne;return s(),f(_,{show:"",fireworks:a.value,onClose:$},{header:h(()=>[n("div",tt,[a.value?(s(),f(q,{key:0,size:"8",color:"green",class:"mr-2 text-white"},{default:h(()=>[y(j,{name:"check"})]),_:1})):M("",!0),n("h4",null,c(e(N)),1)])]),default:h(()=>[y(Io,{lockablePool:r.value,totalLpTokens:u.value},null,8,["lockablePool","totalLpTokens"]),y(ot,{lockablePool:r.value,totalLpTokens:u.value,lockAmount:d.value,lockEndDate:m.value,expectedVeBalAmount:e(T),lockType:p.value,veBalLockInfo:v.value},null,8,["lockablePool","totalLpTokens","lockAmount","lockEndDate","expectedVeBalAmount","lockType","veBalLockInfo"]),y(Eo,{veBalLockInfo:v.value,lockConfirmed:a.value,lockAmount:d.value,lockEndDate:m.value,lockType:p.value,lockablePoolTokenInfo:i.value,class:"mt-4",onSuccess:I},null,8,["veBalLockInfo","lockConfirmed","lockAmount","lockEndDate","lockType","lockablePoolTokenInfo"])]),_:1},8,["fireworks"])}}}),nt={class:"mb-6"},at={class:"pb-2 font-semibold"},st=B({__name:"LockAmount",props:{lockablePool:null,lockablePoolTokenInfo:null},setup(o){const l=o,{lockAmount:t}=K(),a=k(()=>O(l.lockablePool.totalLiquidity).div(l.lockablePool.totalShares).times(t.value).toString());return(r,i)=>(s(),L("div",nt,[n("div",null,[n("p",at,c(r.$t("getVeBAL.lockForm.lockAmount.title")),1)]),y(to,{amount:e(t),"onUpdate:amount":i[0]||(i[0]=d=>Le(t)?t.value=d:null),address:o.lockablePoolTokenInfo.address,tokenValue:e(a),fixedToken:"",name:"lockAmount"},null,8,["amount","address","tokenValue"])]))}}),ct={class:"mb-6"},it={class:"pb-2 font-semibold"},rt={class:"flex px-1 mt-2 text-sm text-secondary"},ut=["onClick"],dt=B({__name:"LockEndDate",props:{minLockEndDateTimestamp:null,maxLockEndDateTimestamp:null,veBalLockInfo:{default:null}},setup(o){const l=o,{t}=W(),{lockEndDate:a}=K(),r=k(()=>[{label:t("getVeBAL.lockForm.lockPeriods.2w"),action:()=>i(l.minLockEndDateTimestamp)},{label:t("getVeBAL.lockForm.lockPeriods.1m"),action:()=>i(te(l.minLockEndDateTimestamp,4).getTime())},{label:t("getVeBAL.lockForm.lockPeriods.3m"),action:()=>i(te(l.minLockEndDateTimestamp,12).getTime())},{label:t("getVeBAL.lockForm.lockPeriods.6m"),action:()=>i(te(l.minLockEndDateTimestamp,24).getTime())},{label:t("getVeBAL.lockForm.lockPeriods.1y"),action:()=>{a.value=d(l.maxLockEndDateTimestamp)}}]);ke(()=>{var m;a.value=(m=l.veBalLockInfo)!=null&&m.hasExistingLock?d(l.veBalLockInfo.lockedEndDate):d(l.maxLockEndDateTimestamp)});function i(m){a.value=d(Math.min(m,l.maxLockEndDateTimestamp))}function d(m){return z(m,Ue)}return(m,p)=>{const v=lo;return s(),L("div",ct,[n("div",null,[n("p",it,c(m.$t("getVeBAL.lockForm.lockEndDate.title")),1)]),y(v,{modelValue:e(a),"onUpdate:modelValue":p[0]||(p[0]=u=>Le(a)?a.value=u:null),name:"lockEndDate",type:"date",min:d(o.minLockEndDateTimestamp),max:d(o.maxLockEndDateTimestamp),step:"7"},null,8,["modelValue","min","max"]),n("div",rt,[(s(!0),L(V,null,H(e(r),(u,T)=>(s(),L("div",{key:T,class:"mr-3 hover:text-pink-500 focus:text-pink-500 cursor-pointer",onClick:u.action}," ~"+c(u.label),9,ut))),128))])])}}}),mt={class:"container"},kt={class:"row"},_t=B({__name:"Summary",props:{expectedVeBalAmount:null},setup(o){const{fNum:l}=R(),{veBalTokenInfo:t}=Z();return(a,r)=>(s(),L("div",mt,[n("div",kt,[n("div",null,c(a.$t("getVeBAL.lockForm.summary.receive.title")),1),n("div",null,c(o.expectedVeBalAmount!=null?e(l)(o.expectedVeBalAmount,e(x).token):"-")+" "+c(e(t).symbol),1)])]))}});const pt=U(_t,[["__scopeId","data-v-7bfd40cc"]]),vt={class:"w-full"},ft={class:"pb-1.5 text-xs leading-none text-secondary"},Lt={class:"flex justify-between items-center"},bt={class:"mt-6"},gt=B({__name:"VeBalForm",props:{lockablePool:null,lockablePoolTokenInfo:null,veBalLockInfo:null},setup(o){const l=o,t=E(!1),{lockEndDate:a,lockAmount:r}=K(),{isWalletReady:i,startConnectWithInjectedProvider:d,isMismatchedNetwork:m}=ie(),{isValidLockAmount:p,isIncreasedLockAmount:v,totalLpTokens:u}=To(Fe(l,"veBalLockInfo")),{minLockEndDateTimestamp:T,maxLockEndDateTimestamp:w,isValidLockEndDate:P,isExtendedLockEndDate:D}=ho(l.veBalLockInfo),{balanceFor:N}=Y(),$=k(()=>N(l.lockablePool.address)),I=k(()=>{var _,b;return m.value?!0:(_=l.veBalLockInfo)!=null&&_.hasExistingLock&&!((b=l.veBalLockInfo)!=null&&b.isExpired)?!v.value&&!D.value:!O($.value).gt(0)||!p.value||!P.value}),F=k(()=>I.value?"0":ve(u.value,a.value)),X=k(()=>{var _,b;if((_=l.veBalLockInfo)!=null&&_.hasExistingLock&&!((b=l.veBalLockInfo)!=null&&b.isExpired)){if(v.value&&D.value)return[A.INCREASE_LOCK,A.EXTEND_LOCK];if(D.value)return[A.EXTEND_LOCK];if(v.value)return[A.INCREASE_LOCK]}return[A.CREATE_LOCK]});function j(){t.value=!1}function q(){I.value||(t.value=!0)}return(_,b)=>{const g=pe,S=de;return s(),L(V,null,[y(S,{shadow:"xl",exposeOverflow:"",noBorder:""},{header:h(()=>[n("div",vt,[n("div",ft,c(e(_e).network.chainName),1),n("div",Lt,[n("h4",null,c(_.$t("getVeBAL.lockForm.title")),1)])])]),default:h(()=>[y(st,{lockablePool:o.lockablePool,lockablePoolTokenInfo:o.lockablePoolTokenInfo},null,8,["lockablePool","lockablePoolTokenInfo"]),y(dt,{minLockEndDateTimestamp:e(T),maxLockEndDateTimestamp:e(w),veBalLockInfo:o.veBalLockInfo},null,8,["minLockEndDateTimestamp","maxLockEndDateTimestamp","veBalLockInfo"]),y(pt,{expectedVeBalAmount:e(F)},null,8,["expectedVeBalAmount"]),n("div",bt,[e(i)?(s(),f(g,{key:1,color:"gradient",block:"",disabled:e(I),onClick:q},{default:h(()=>[C(c(_.$t("preview")),1)]),_:1},8,["disabled"])):(s(),f(g,{key:0,label:_.$t("connectWallet"),color:"gradient",block:"",onClick:e(d)},null,8,["label","onClick"]))])]),_:1}),(s(),f(Oe,{to:"#modal"},[t.value&&o.veBalLockInfo?(s(),f(lt,{key:0,lockablePool:o.lockablePool,lockablePoolTokenInfo:o.lockablePoolTokenInfo,lockAmount:e(r),lockEndDate:e(a),lockType:e(X),veBalLockInfo:o.veBalLockInfo,totalLpTokens:e(u),onClose:j},null,8,["lockablePool","lockablePoolTokenInfo","lockAmount","lockEndDate","lockType","veBalLockInfo","totalLpTokens"])):M("",!0)]))],64)}}}),Tt=B({__name:"LockForm",setup(o){const{getToken:l}=Y(),{isWalletReady:t}=ie(),{lockablePoolId:a}=Z(),{isDesktop:r,isMobile:i}=Re(),d=Ae(a.value),m=fe(),p=k(()=>d.isLoading.value),v=k(()=>m.isLoading.value),u=k(()=>d.data.value),T=k(()=>u.value!=null?l(u.value.address):null),w=k(()=>m.data.value),P=k(()=>t.value?p.value||v.value:p.value);return(D,N)=>{const $=ye;return s(),f(he,{offsetGutters:""},{gutterLeft:h(()=>[e(P)||!e(u)||!e(T)?(s(),f($,{key:0,class:"h-36"})):(s(),f(bo,{key:1,lockablePool:e(u),lockablePoolTokenInfo:e(T)},null,8,["lockablePool","lockablePoolTokenInfo"])),e(r)?(s(),L(V,{key:2},[e(P)||!e(u)||!e(T)?(s(),f($,{key:0,class:"mt-4 h-12"})):(s(),f(ue,{key:1,lockablePool:e(u),lockablePoolTokenInfo:e(T)},null,8,["lockablePool","lockablePoolTokenInfo"]))],64)):M("",!0)]),gutterRight:h(()=>[e(P)?(s(),f($,{key:0,class:"h-64"})):(s(),f(qe,{key:1,veBalLockInfo:e(w)},null,8,["veBalLockInfo"])),e(i)?(s(),L(V,{key:2},[e(P)||!e(u)||!e(T)?(s(),f($,{key:0,class:"mt-4 h-12"})):(s(),f(ue,{key:1,lockablePool:e(u),lockablePoolTokenInfo:e(T)},null,8,["lockablePool","lockablePoolTokenInfo"]))],64)):M("",!0)]),default:h(()=>[e(P)||!e(u)||!e(T)?(s(),f($,{key:0,class:"h-96"})):(s(),f(gt,{key:1,lockablePool:e(u),lockablePoolTokenInfo:e(T),veBalLockInfo:e(w)},null,8,["lockablePool","lockablePoolTokenInfo","veBalLockInfo"]))]),_:1})}}}),yt={key:1,class:"text-center"},ht={class:"text-lg font-semibold"},Kt=B({__name:"get-vebal",setup(o){return(l,t)=>e(Ke)?(s(),f(Tt,{key:0})):(s(),L("div",yt,[n("div",ht,c(l.$t("veBAL.notSupported.title")),1),n("div",null,c(l.$t("veBAL.notSupported.description")),1)]))}});export{Kt as default};
//# sourceMappingURL=get-vebal-2f1f8f3c.js.map
