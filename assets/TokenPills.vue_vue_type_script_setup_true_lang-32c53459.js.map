{"version":3,"file":"TokenPills.vue_vue_type_script_setup_true_lang-32c53459.js","sources":["../../src/components/tables/PoolsTable/TokenPills/BalanceTooltip.vue","../../src/components/tables/PoolsTable/TokenPills/TokenPills.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { computed } from 'vue';\r\n\r\nimport BalAsset from '@/components/_global/BalAsset/BalAsset.vue';\r\nimport useNumbers, { FNumFormats } from '@/composables/useNumbers';\r\nimport { useTokens } from '@/providers/tokens.provider';\r\nimport { shortenLabel } from '@/lib/utils';\r\nimport useWeb3 from '@/services/web3/useWeb3';\r\nimport { PoolToken } from '@balancer-labs/sdk';\r\n\r\n/**\r\n * TYPES\r\n */\r\ntype Props = {\r\n  token: PoolToken;\r\n  symbol: string;\r\n};\r\n\r\nconst props = defineProps<Props>();\r\n\r\n/**\r\n * COMPOSABLES\r\n */\r\nconst { fNum, toFiat } = useNumbers();\r\nconst { account } = useWeb3();\r\nconst { balanceFor } = useTokens();\r\n\r\n/**\r\n * COMPUTED\r\n */\r\nconst tokenBalance = computed(() => balanceFor(props.token.address));\r\nconst shortenedAccount = computed(() => shortenLabel(account.value));\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <div class=\"mb-2 text-secondary\">\r\n      {{ $t('tokenPills.balanceTooltip.title', [shortenedAccount]) }}\r\n    </div>\r\n    <div class=\"flex\">\r\n      <BalAsset :address=\"token.address\" :size=\"36\" class=\"mr-2\" />\r\n      <div>\r\n        <div class=\"text-sm font-semibold\">\r\n          {{ fNum(tokenBalance, FNumFormats.token) }}\r\n          {{ symbol }}\r\n        </div>\r\n        <div class=\"text-secondary\">\r\n          {{ fNum(toFiat(tokenBalance, token.address), FNumFormats.fiat) }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n","<script setup lang=\"ts\">\r\nimport { computed } from 'vue';\r\n\r\nimport useNumbers from '@/composables/useNumbers';\r\nimport { useTokens } from '@/providers/tokens.provider';\r\nimport { includesAddress } from '@/lib/utils';\r\nimport { PoolToken } from '@/services/pool/types';\r\n\r\nimport HiddenTokensPills from './HiddenTokensPills.vue';\r\nimport StableTokenPill from './StableTokenPill.vue';\r\nimport WeightedTokenPill from './WeightedTokenPill.vue';\r\n\r\ntype Props = {\r\n  tokens: PoolToken[];\r\n  isStablePool?: boolean;\r\n  selectedTokens?: string[];\r\n  pickedTokens?: string[];\r\n};\r\n\r\nconst props = withDefaults(defineProps<Props>(), {\r\n  isStablePool: false,\r\n  selectedTokens: () => [],\r\n  pickedTokens: () => [],\r\n});\r\n\r\nconst { fNum } = useNumbers();\r\nconst { getToken, hasBalance } = useTokens();\r\n\r\n/**\r\n * COMPUTED\r\n */\r\nconst visibleTokens = computed(() => props.tokens.slice(0, MAX_PILLS));\r\n\r\nconst hiddenTokens = computed(() => props.tokens.slice(MAX_PILLS));\r\n\r\nconst hasBalanceInHiddenTokens = computed(() =>\r\n  hiddenTokens.value.some(token => hasBalance(token.address))\r\n);\r\n\r\nconst isSelectedInHiddenTokens = computed(() =>\r\n  hiddenTokens.value.some(token =>\r\n    includesAddress(props.selectedTokens, token.address)\r\n  )\r\n);\r\n\r\nconst isSelectedInPickedTokens = computed(() =>\r\n  hiddenTokens.value.some(token =>\r\n    includesAddress(props.pickedTokens, token.address)\r\n  )\r\n);\r\n\r\n/**\r\n * METHODS\r\n */\r\nfunction symbolFor(token: PoolToken): string {\r\n  return getToken(token.address)?.symbol || token.symbol || '---';\r\n}\r\n\r\nfunction weightFor(token: PoolToken): string {\r\n  return fNum(token.weight || '0', {\r\n    style: 'percent',\r\n    maximumFractionDigits: 0,\r\n  });\r\n}\r\n\r\nconst MAX_PILLS = 8;\r\n</script>\r\n\r\n<template>\r\n  <div class=\"flex flex-wrap gap-y-2 -mt-1\">\r\n    <template v-if=\"isStablePool\">\r\n      <StableTokenPill\r\n        v-for=\"token in visibleTokens\"\r\n        :key=\"token.address\"\r\n        :hasBalance=\"hasBalance(token.address)\"\r\n        :symbol=\"symbolFor(token)\"\r\n        :token=\"token\"\r\n        :isSelected=\"includesAddress(selectedTokens, token.address)\"\r\n        :isPicked=\"includesAddress(pickedTokens, token.address)\"\r\n      />\r\n    </template>\r\n    <template v-else>\r\n      <WeightedTokenPill\r\n        v-for=\"token in visibleTokens\"\r\n        :key=\"token.address\"\r\n        :hasBalance=\"hasBalance(token.address)\"\r\n        :symbol=\"symbolFor(token)\"\r\n        :weight=\"weightFor(token)\"\r\n        :token=\"token\"\r\n        :isSelected=\"includesAddress(selectedTokens, token.address)\"\r\n        :isPicked=\"includesAddress(pickedTokens, token.address)\"\r\n      />\r\n      <HiddenTokensPills\r\n        v-if=\"hiddenTokens.length > 0\"\r\n        :tokens=\"hiddenTokens\"\r\n        :hasBalance=\"hasBalanceInHiddenTokens\"\r\n        :isSelected=\"isSelectedInHiddenTokens\"\r\n        :isPicked=\"isSelectedInPickedTokens\"\r\n      />\r\n    </template>\r\n  </div>\r\n</template>\r\n"],"names":["fNum","toFiat","useNumbers","account","useWeb3","balanceFor","useTokens","tokenBalance","computed","props","shortenedAccount","shortenLabel","getToken","hasBalance","visibleTokens","MAX_PILLS","hiddenTokens","hasBalanceInHiddenTokens","token","isSelectedInHiddenTokens","includesAddress","isSelectedInPickedTokens","symbolFor","_a","weightFor"],"mappings":"4qCAuBA,CAAA,KAAAA,EAAA,OAAAC,CAAA,EAAAC,EAAA,EACA,CAAA,QAAAC,GAAAC,IACA,CAAA,WAAAC,GAAAC,IAKAC,EAAAC,EAAA,IAAAH,EAAAI,EAAA,MAAA,OAAA,CAAA,EACAC,EAAAF,EAAA,IAAAG,EAAAR,EAAA,KAAA,CAAA,qmECNA,CAAA,KAAAH,GAAAE,IACA,CAAA,SAAAU,EAAA,WAAAC,CAAA,EAAAP,EAAA,EAKAQ,EAAAN,EAAA,IAAAC,EAAA,OAAA,MAAA,EAAAM,CAAA,CAAA,EAEAC,EAAAR,EAAA,IAAAC,EAAA,OAAA,MAAAM,CAAA,CAAA,EAEAE,EAAAT,EAAiC,IAAAQ,EAAA,MAAA,KAAAE,GAAAL,EAAAK,EAAA,OAAA,CAAA,CAC2B,EAG5DC,EAAAX,EAAiC,IAAAQ,EAAA,MAAA,KACZE,GAAAE,EAAAX,EAAA,eAAAS,EAAA,OAAA,CACkC,CACrD,EAGFG,EAAAb,EAAiC,IAAAQ,EAAA,MAAA,KACZE,GAAAE,EAAAX,EAAA,aAAAS,EAAA,OAAA,CACgC,CACnD,EAMF,SAAAI,EAAAJ,EAAA,OACE,QAAAK,EAAAX,EAAAM,EAAA,OAAA,IAAA,YAAAK,EAAA,SAAAL,EAAA,QAAA,KAA0D,CAG5D,SAAAM,EAAAN,EAAA,CACE,OAAAlB,EAAAkB,EAAA,QAAA,IAAA,CAAiC,MAAA,UACxB,sBAAA,CACgB,CAAA,CACxB,CAGH,MAAAH,EAAA"}