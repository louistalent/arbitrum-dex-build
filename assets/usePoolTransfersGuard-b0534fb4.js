import{b as D,c,e as x,Q as M,f as C,l as P,cr as L,aS as j,ba as Z,bg as q,y as N,bq as E,d as F,p as I,z as S,s as v,G as p,H as _,U as T,a0 as O,a2 as V,D as A,v as f,F as k,a1 as B,C as z,ak as K,aH as R,Z as W,$ as G,K as H,j as U}from"./index-4a1c513c.js";import{_ as Y}from"./BalAsset-fe687731.js";import{u as $}from"./usePoolQuery-b97c571a.js";import{i as J}from"./useQueryHelpers-8cb4e6d7.js";function X(e,t={}){const{tokens:n}=D(),r=c(()=>{var l;return(l=e.value)==null?void 0:l.id}),o=x(M.Pool.Decorated(r)),a=c(()=>!!e.value),u=async()=>{if(!e.value)return;const l=P.cloneDeep(e.value),d=new L([l]),[i]=await d.decorate(n.value,!1);return i},s=x({enabled:a,...t});return C(o,u,s)}const ee=N(!1),te=N(!0);function se(){const t=E().params.id.toLowerCase(),{prices:n}=D(),r=$(t),o=c(()=>r.data.value),a=X(o),u=c(()=>J(r)),s=c(()=>u.value||!o.value),l=c(()=>a.data.value||o.value),d=c(()=>o.value?j(o.value)?o.value.mainTokens||[]:Z(o.value):[]),i=c(()=>{const m=Object.keys(n.value).map(h=>h.toLowerCase());return!d.value.every(h=>q(m,h))});return{pool:l,poolQuery:r,poolDecorationQuery:a,loadingPool:s,useNativeAsset:ee,missingPrices:i,transfersAllowed:te}}function ge(){const e=x({init:!1,confirming:!1,confirmed:!1,confirmedAt:""}),t=c(()=>e.init||e.confirming||e.confirmed);function n(){Object.assign(e,{init:!1,confirming:!1,confirmed:!1,confirmedAt:""})}return{txState:e,txInProgress:t,resetTxState:n}}var ye=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=void 0,a=void 0,u=void 0,s=[];return function(){var i=oe(n),m=new Date().getTime(),h=!o||m-o>i;o=m;for(var w=arguments.length,g=Array(w),y=0;y<w;y++)g[y]=arguments[y];if(h&&r.leading)return r.accumulate?Promise.resolve(t.call(this,[g])).then(function(b){return b[0]}):Promise.resolve(t.call.apply(t,[this].concat(g)));if(a?clearTimeout(u):a=ne(),s.push(g),u=setTimeout(l.bind(this),i),r.accumulate){var Q=s.length-1;return a.promise.then(function(b){return b[Q]})}return a.promise};function l(){var d=a;clearTimeout(u),Promise.resolve(r.accumulate?t.call(this,s):t.apply(this,s[s.length-1])).then(d.resolve,d.reject),s=[],a=null}};function oe(e){return typeof e=="function"?e():e}function ne(){var e={};return e.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}),e}const ae={class:"token-amount-table"},re={key:0,class:"title"},ue={class:"token-amount-table-content"},ie={class:"flex flex-col self-center mr-3"},ce={class:"font-medium"},le={class:"font-numeric"},de={key:0,class:"text-sm text-secondary font-numeric"},me={key:0},fe=F({__name:"TokenAmounts",props:{amountMap:null,fiatAmountMap:null,tokenMap:null,fiatTotal:null,title:{default:""},hideAmountShare:{type:Boolean,default:!1},showZeroAmounts:{type:Boolean,default:!1}},setup(e){const t=e,{fNum:n}=I(),r=c(()=>P.orderBy(Object.entries(t.fiatAmountMap),([,s])=>Number(s),"desc").map(([s,l])=>({amount:t.amountMap[s],fiatAmount:l,address:s}))),o=c(()=>P.groupBy(r.value,s=>S(s.amount||"0").isZero()?"zeroAmounts":"nonZeroAmounts")),a=c(()=>t.showZeroAmounts?r.value:o.value.nonZeroAmounts);function u(s){return S(t.fiatAmountMap[s]).div(t.fiatTotal).toString()}return(s,l)=>{const d=Y;return v(),p("div",ae,[t.title?(v(),p("div",re,_(t.title),1)):T("",!0),(v(!0),p(O,null,V(f(a),i=>{var m;return v(),p("div",{key:i.address,class:"relative"},[A("div",ue,[A("div",ie,[A("div",ce,[A("span",le,_(f(n)(i.amount,f(k).token)),1),B(" "+_((m=e.tokenMap[i.address])==null?void 0:m.symbol),1)]),Number(i.fiatAmount)>0?(v(),p("div",de,[B(_(f(n)(i.fiatAmount,f(k).fiat))+" ",1),e.hideAmountShare?T("",!0):(v(),p("span",me," ("+_(f(n)(u(i.address),f(k).percent))+") ",1))])):T("",!0)]),z(d,{address:i.address,size:36},null,8,["address"])])])}),128))])}}});const Ae=K(fe,[["__scopeId","data-v-a7d79351"]]);function be(){const e=H(),{pool:t,transfersAllowed:n}=se(),{noInitLiquidity:r}=R(t),{networkSlug:o}=U();function a(u){return!!r(u)}W(t,u=>{u&&a(u)&&(n.value=!1,e.push({name:"pool",params:{id:u.id,networkSlug:o}}))}),G(()=>{n.value=!1,t.value&&a(t.value)?e.push({name:"pool",params:{id:t.value.id,networkSlug:o}}):n.value=!0})}export{Ae as T,se as a,be as b,ye as d,ge as u};
//# sourceMappingURL=usePoolTransfersGuard-b0534fb4.js.map
