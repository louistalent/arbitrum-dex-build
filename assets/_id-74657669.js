var Lt=Object.defineProperty;var Pt=(s,o,t)=>o in s?Lt(s,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[o]=t;var le=(s,o,t)=>(Pt(s,typeof o!="symbol"?o+"":o,t),t);import{an as je,ap as dt,aq as pt,d as E,aE as ye,aH as be,u as oe,c as _,aI as He,aJ as Tt,aK as $t,s as r,G as B,v as e,t as P,C as v,aL as ot,aM as st,j as ce,a7 as xe,b as ue,p as ae,z as U,aN as Ue,aO as At,B as y,D as i,H as k,F as J,a1 as K,aP as Ct,U as M,_ as _e,K as mt,aQ as St,ak as re,as as ft,aR as vt,ah as te,a0 as Y,a2 as fe,a8 as ne,a9 as de,am as Bt,aS as It,aT as Mt,x as we,o as pe,aU as Vt,y as X,aV as Ye,aW as Nt,aX as gt,l as me,Z as Se,aY as Ft,aZ as ht,a_ as Dt,a$ as Ot,b0 as Re,b1 as Ee,b2 as Rt,b3 as at,b4 as Et,b5 as nt,a6 as Pe,e as ie,Q as ke,b6 as Ie,P as j,b7 as Te,b8 as We,b9 as _t,q as Le,ba as Be,bb as qe,bc as $e,aF as qt,a4 as zt,bd as jt,be as Ht,bf as ze,al as Ut,bg as Qe,bh as Yt,bi as Ge,f as Ke,bj as Wt,a as Qt,bk as lt,bl as Gt,X as it,k as Kt,bm as Jt,bn as Zt,bo as Xt,bp as eo,I as to,bq as oo,ai as so,aj as ao,br as no,bs as lo,bt as io,bu as ro}from"./index-4a1c513c.js";import{_ as he}from"./BalLoadingBlock.vue_vue_type_style_index_0_lang-3fa460ee.js";import{u as co}from"./useWithdrawMath-4e11940a.js";import{u as Me,p as uo}from"./pool-staking.provider-fee39c11.js";import{u as Je,_ as po}from"./useLock-d1f81127.js";import"./exchange.service-4f09193f.js";import"./useTokenHelpers-ddc69531.js";import{_ as Ze}from"./BalTabs.vue_vue_type_style_index_0_lang-df57e740.js";import{_ as Ae}from"./BalAsset-fe687731.js";import{n as De}from"./numeral-7364357d.js";import{i as mo,S as fo,L as vo}from"./echarts-2ea23fbb.js";import{_ as go}from"./BalBlankSlate.vue_vue_type_style_index_0_lang-b4891eef.js";import{b as ho,f as Ce,P as _o}from"./constants-f98f285a.js";import{_ as Ve}from"./useTransactionErrors-09c4ac25.js";import{_ as yt}from"./APRTooltip.vue_vue_type_script_setup_true_lang-0e752bc5.js";import{_ as Xe}from"./BalTable.vue_vue_type_style_index_0_lang-bfff8f7a.js";import{_ as bt}from"./BalAccordion.vue_vue_type_script_setup_true_lang-b50b54c6.js";import{A as se}from"./BalActionSteps.vue_vue_type_script_setup_true_lang-78b4efb6.js";import{_ as kt}from"./StakePreviewModal.vue_vue_type_script_setup_true_lang-225d7685.js";import{_ as yo}from"./UnlockPreviewModal.vue_vue_type_script_setup_true_lang-5fc1f8ef.js";import{u as bo}from"./usePoolWarning-b134504b.js";import{u as Ne}from"./usePoolQuery-b97c571a.js";import"./poolLiquidity-de5c7424.js";import"./useRelayerApprovalTx-95afc1c6.js";import"./useQueryHelpers-8cb4e6d7.js";import"./tslib.es6-b45817b3.js";import"./BalAssetSet-1d81bc3d.js";import"./BalCircle-e6fd1d55.js";import"./ConfirmationIndicator.vue_vue_type_script_setup_true_lang-5746d56d.js";import"./useTokenApprovalActions-8e0c610b.js";import"./BalDataListRow.vue_vue_type_script_setup_true_lang-03b32597.js";var ko=6e4;function rt(s,o){je(2,arguments);var t=dt(o);return ho(s,t*ko)}function xo(s){je(1,arguments);var o=dt(s);return pt(o*1e3)}function wo(s){je(1,arguments);var o=pt(s);return o.setMinutes(0,0,0),o}const Lo={class:"p-4 w-full bg-gray-50 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-900"},Po={key:1,class:"grid grid-cols-2 gap-2"},To=E({__name:"PoolActionsCard",props:{pool:null,missingPrices:{type:Boolean}},setup(s){const o=s,{hasBpt:t}=co(ye(o,"pool")),{isMigratablePool:u,hasNonApprovedRateProviders:c}=be(ye(o,"pool")),{isWalletReady:m,startConnectWithInjectedProvider:n}=oe(),{networkSlug:l}=ce(),a=_(()=>{var d;return((d=He(o.pool.id))==null?void 0:d.joinsDisabled)||Tt(o.pool.id)||c.value||u(o.pool)&&!$t(o.pool.id)});return(d,g)=>{const p=xe;return r(),B("div",Lo,[e(m)?(r(),B("div",Po,[v(p,{tag:e(a)?"div":"router-link",to:{name:"add-liquidity",params:{networkSlug:e(l)}},label:d.$t("addLiquidity"),color:"gradient",disabled:e(a),block:"",onClick:g[0]||(g[0]=T=>e(ot)(e(st).ClickAddLiquidity))},null,8,["tag","to","label","disabled"]),v(p,{tag:e(t)?"router-link":"div",to:{name:"withdraw",params:{networkSlug:e(l)}},label:d.$t("withdraw.label"),disabled:!e(t),color:"blue",outline:"",block:"",onClick:g[1]||(g[1]=T=>e(ot)(e(st).ClickWithdraw))},null,8,["tag","to","label","disabled"])])):(r(),P(p,{key:0,label:d.$t("connectWallet"),color:"gradient",block:"",onClick:e(n)},null,8,["label","onClick"]))])}}}),$o={class:"card-header"},Ao={class:"text-2xl"},Co={key:0,class:"py-2 px-4"},So=E({__name:"MyPoolBalancesCard",props:{pool:null,missingPrices:{type:Boolean}},setup(s){const o=s,{balanceFor:t}=ue(),{fNum:u}=ae(),{isWalletReady:c}=oe(),{isMigratablePool:m}=be(ye(o,"pool")),{stakedShares:n}=Me(),{networkSlug:l}=ce(),a=mt(),{totalLockedValue:d}=Je(),g=_(()=>U(t(o.pool.address)).plus(n.value).toString()),p=_(()=>Ue(o.pool.id)?d.value:At(o.pool,g.value)),T=_(()=>(U(g.value).gt(0)||U(n.value).gt(0))&&m(o.pool));function w(x){a.push({name:"migrate-pool",params:{from:x.id,to:St[x.id].toPoolId},query:{returnRoute:"pool",returnParams:JSON.stringify({id:x.id,networkSlug:l})}})}return(x,b)=>{const h=xe,f=_e;return r(),P(f,{shadow:"2xl",noPad:"",class:"rounded-xl"},{header:y(()=>[i("div",$o,[i("h5",null,k(x.$t("poolTransfer.myPoolBalancesCard.title")),1),i("h5",Ao,k(e(c)?e(u)(e(p),e(J).fiat):"-"),1)])]),footer:y(()=>[v(To,{pool:s.pool,missingPrices:s.missingPrices},null,8,["pool","missingPrices"])]),default:y(()=>[e(T)?(r(),B("div",Co,[v(h,{color:"blue",block:"",onClick:b[0]||(b[0]=Ct($=>w(o.pool),["prevent"]))},{default:y(()=>[K(k(x.$t("migratePool.migrateLiquidity")),1)]),_:1})])):M("",!0)]),_:1})}}});const Bo=re(So,[["__scopeId","data-v-545e3f58"]]);function xt(s){const{balanceFor:o}=ue(),{stakedShares:t}=Me(),u=_(()=>Ue(s.value.id)),{totalLockedShares:c}=Je({enabled:u.value}),{fNum:m}=ae(),n=_(()=>{let a=U(o(s.value.address)).plus(t.value);return u.value&&c.value&&(a=a.plus(c.value)),a.div(U(s.value.totalShares)).multipliedBy(100)}),l=_(()=>m(n.value.toString(),{maximumFractionDigits:4,minimumFractionDigits:0})+"%");return{userPoolPercentage:n,userPoolPercentageLabel:l}}const Io={class:"group-hover:text-purple-500 dark:group-hover:text-yellow-500 transition-colors"},Mo={key:0,class:"justify-self-end"},Vo={class:"justify-self-end"},No={class:"justify-self-end"},Fo={class:"justify-self-end"},Do=E({__name:"TokenBreakdown",props:{token:null,parentLevel:{default:0},showUserShares:{type:Boolean},rootPool:null,tokensData:null},setup(s){const o=s,{token:t,showUserShares:u,rootPool:c}=ft(o),m=_(()=>o.tokensData[t.value.address]),{explorerLinks:n}=oe(),{isDeepPool:l}=be(c),a=vt(c.value.poolType),{getToken:d}=ue(),g=_(()=>o.parentLevel+1),p=_(()=>{switch(g.value){case 1:return"level-1";case 2:return"level-2";case 3:return"level-3";case 4:return"level-4";default:return"pl-4"}});function T(w){var x;return((x=d(w.address))==null?void 0:x.symbol)||w.symbol||"---"}return(w,x)=>{var A,L;const b=Ae,h=ne,f=de,$=Bt("TokenBreakdown",!0);return r(),B(Y,null,[i("div",{class:te(["grid gap-y-4 px-4 w-full",e(a)?"grid-cols-5":"grid-cols-4",e(p)])},[v(f,{href:e(n).addressLink(e(t).address),external:"",noStyle:"",class:"group flex items-center"},{default:y(()=>[v(b,{address:e(t).address,class:te(e(l)&&e(g)>1?"nested-token":"mr-2 shrink-0 z-10"),size:e(l)&&e(g)>1?28:36},null,8,["address","class","size"]),i("span",Io,k(T(e(t))),1),v(h,{name:"arrow-up-right",size:"sm",class:"ml-1 text-gray-500 group-hover:text-purple-500 dark:group-hover:text-yellow-500 transition-colors"})]),_:1},8,["href"]),e(a)?(r(),B("div",Mo,k(e(m).tokenWeightLabel),1)):M("",!0),i("div",Vo,k(e(u)?e(m).userBalanceLabel:e(m).balanceLabel),1),i("div",No,k(e(u)?e(m).userFiatLabel:e(m).fiatLabel),1),i("div",Fo,k(e(m).getTokenPercentageLabel()),1)],2),e(l)?(r(!0),B(Y,{key:0},fe((L=(A=e(t).token)==null?void 0:A.pool)==null?void 0:L.tokens,C=>(r(),P($,{key:C.address,token:C,parentLevel:e(g),showUserShares:e(u),rootPool:e(c),tokensData:s.tokensData},null,8,["token","parentLevel","showUserShares","rootPool","tokensData"]))),128)):M("",!0)],64)}}});const Oo=re(Do,[["__scopeId","data-v-c5b65864"]]);function Oe(s){return s===""?!1:!Number.isNaN(Number(s))}function Ro(s){const{fNum:o,toFiat:t}=ae(),{userPoolPercentage:u}=xt(s),c=_(()=>It(s.value));let m={},n=0;return _(()=>l(s));function l(d){return n=0,m={},d.value.tokens.forEach(g=>{a(g,1)}),m}function a(d,g){var D,O,H,Q,q,Z,z,ee;const p=U(d.balance).times(g).toString(),w=((O=(D=d==null?void 0:d.token)==null?void 0:D.pool)==null?void 0:O.tokens)&&c.value,x=W();Oe(x)&&(n+=Number(x));const b=I(),h=N(x),f=x===""?"":S(h),$=b===""?"":R(N(b)),A=d!=null&&d.weight?o(d.weight,J.percent):"";function L(){if(n===0)return"0%";const V=Number(x)/Number(n);return V===0?"":o(V,J.percent)}if(m[d.address]={balanceLabel:R(I()),fiatLabel:S(x),userFiatLabel:f,userBalanceLabel:$,tokenWeightLabel:A,getTokenPercentageLabel:L},!((H=d.token)!=null&&H.pool)||!c.value)return;const F=U((d==null?void 0:d.balance)||"0").div(((q=(Q=d.token)==null?void 0:Q.pool)==null?void 0:q.totalShares)||1).times(g).toNumber();(ee=(z=(Z=d.token)==null?void 0:Z.pool)==null?void 0:z.tokens)==null||ee.forEach(V=>a(V,F));function I(){return w?"":d.priceRate&&c?U(p).times(d.priceRate).toString():d.balance}function R(V){return Oe(V)?o(V,J.token):V}function W(){var ve;if(w)return"";let V=t(p,d.address);return V==="0"&&((ve=d.token)!=null&&ve.latestUSDPrice)&&(V=U(p).times(d.token.latestUSDPrice).toString()),V}function S(V){return V=V.toString(),Oe(V)?o(V,J.fiat):V}function N(V){return Number(V)*Number(u.value)/100}}}const Eo=E({__name:"PercentagePill",props:{isActive:{type:Boolean,default:!1}},setup(s){const o=s,t=_(()=>o.isActive?"text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-500/20":"text-secondary bg-gray-200 dark:bg-gray-800");return(u,c)=>(r(),B("div",{class:te(["flex p-1 text-sm rounded",[e(t)]])},[Mt(u.$slots,"default")],2))}}),qo={class:"flex justify-start items-center mx-4 lg:mx-0 mb-6 border-b dark:border-gray-900"},zo={key:0,class:"justify-self-end"},jo={class:"justify-self-end"},Ho={class:"justify-self-end"},Uo={class:"justify-self-end"},Yo={class:"grid gap-y-4 py-4"},Wo=E({__name:"PoolCompositionCard",props:{pool:null},setup(s){const o=s,{pool:t}=ft(o),u=vt(t.value.poolType),{upToLargeBreakpoint:c}=we(),{userPoolPercentage:m,userPoolPercentageLabel:n}=xt(t),{t:l}=pe(),a=_(()=>Vt(t.value)),d=Ro(a),g="TOTAL_COMPOSITION",p="MY_POOL_SHARE",T={value:g,label:l("poolComposition.tabs.totalComposition")},w={value:p,label:l("poolComposition.tabs.myPoolShare")},x=X(g),b=_(()=>m.value.gt(0)),h=_(()=>b.value?[T,w]:[T]),f=_(()=>x.value===p);return Ye(async()=>{await Nt(),b.value&&(x.value=p)}),($,A)=>{const L=Ze,C=_e;return r(),B(Y,null,[i("div",qo,[v(L,{modelValue:x.value,"onUpdate:modelValue":A[0]||(A[0]=F=>x.value=F),tabs:e(h),noPad:"",class:"-mb-px"},{default:y(()=>[e(b)?(r(),P(Eo,{key:0,isActive:e(f)},{default:y(()=>[K(k(e(n)),1)]),_:1},8,["isActive"])):M("",!0)]),_:1},8,["modelValue","tabs"])]),v(C,{class:"overflow-x-auto whitespace-nowrap",square:e(c),noBorder:e(c),noPad:""},{header:y(()=>[i("div",{class:te(["grid p-4 w-full text-base font-semibold border-b dark:border-gray-900",[e(u)?"grid-cols-5":"grid-cols-4"]])},[i("div",null,k($.$t("token")),1),e(u)?(r(),B("div",zo,k($.$t("weight")),1)):M("",!0),i("div",jo,k($.$t("balance")),1),i("div",Ho,k($.$t("value")),1),i("div",Uo,k($.$t("poolComposition.token%")),1)],2)]),default:y(()=>[i("div",Yo,[(r(!0),B(Y,null,fe(e(a).tokens,F=>(r(),B("div",{key:F.address,class:"grid gap-y-4"},[v(Oo,{token:F,showUserShares:e(f),rootPool:e(t),tokensData:e(d)},null,8,["token","showUserShares","rootPool","tokensData"])]))),128))])]),_:1},8,["square","noBorder"])],64)}}}),Qo={key:0,id:"lineChartHeader",class:"mb-4"},Go={class:"text-xl tracking-wider text-gray-800 dark:text-gray-400"},Ko=E({__name:"BalChart",props:{data:null,chartType:null,onAxisMoved:null,isLoading:{type:Boolean,default:!1},hideYAxis:{type:Boolean,default:!1},hideXAxis:{type:Boolean,default:!1},xAxisMinInterval:null,showHeader:{type:Boolean,default:!1},needChartValue:{type:Boolean,default:!1},axisLabelFormatter:{default:()=>({})},color:null,hoverColor:null,hoverBorderColor:null,height:null,showLegend:{type:Boolean,default:!1},legendState:null,forceResizeTick:null,isLastValueChipVisible:{type:Boolean},customGrid:null,chartClass:null,wrapperClass:null,showTooltip:{type:Boolean,default:!0},showTooltipLayer:{type:Boolean,default:!0},useMinMax:{type:Boolean,default:!1},areaStyle:null},emits:["periodSelected","setCurrentChartValue","mouseLeaveEvent","mouseEnterEvent"],setup(s,{emit:o}){const t=s;mo();const u=X(),c=X("$0,00"),m=X(0),{fNum:n}=ae(),l=gt(),{darkMode:a}=ht(),d=_(()=>({legend:{show:t.showLegend,left:0,top:0,icon:"roundRect",itemHeight:5,formatter:b=>{var f;const h=me.last((f=t.data.find($=>$.name===b))==null?void 0:f.values);return`${b}: ${n(h[1],t.axisLabelFormatter.yAxis)}`},selected:t.legendState||{},textStyle:{color:a.value?l.theme.colors.gray[100]:l.theme.colors.gray[800]},inactiveColor:a.value?l.theme.colors.gray[700]:l.theme.colors.gray[300]},xAxis:{type:"time",show:!t.hideXAxis,axisTick:{show:!1},axisLine:{show:!1},minInterval:t.xAxisMinInterval,axisLabel:{formatter:t.axisLabelFormatter.xAxis?b=>n(b,t.axisLabelFormatter.xAxis):void 0,color:l.theme.colors.gray[400]},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},yAxis:{axisLine:{show:!1},axisTick:{show:!1},min:t.useMinMax?"dataMin":null,max:t.useMinMax?"dataMax":null,type:"value",show:!t.hideYAxis,splitNumber:4,splitLine:{show:!1},position:"left",axisLabel:{show:!t.hideYAxis,formatter:t.axisLabelFormatter.yAxis?b=>n(b,t.axisLabelFormatter.yAxis):void 0,color:l.theme.colors.gray[400]},nameGap:25},color:t.color,grid:t.customGrid||{left:"2.5%",right:0,top:"10%",bottom:"5%",containLabel:!0},tooltip:{show:t.showTooltip,showContent:t.showTooltipLayer,trigger:"axis",confine:!0,axisPointer:{type:"shadow",label:{show:!1}},backgroundColor:a.value?l.theme.colors.gray[800]:l.theme.colors.white,borderColor:a.value?l.theme.colors.gray[900]:l.theme.colors.white,formatter:b=>`
            <div class='flex flex-col font-body bg-white dark:bg-gray-850 dark:text-white'>
              <span>${b[0].value[0]}</span>
              ${b.map(h=>`
                    <span>
                      ${h.marker} ${h.seriesName}
                      <span class='font-semibold'>
                        ${n(h.value[1],t.axisLabelFormatter.yAxis)}
                      </span>
                    </span>
                  `).join("")}
            </div>
          `},series:t.data.map((b,h)=>{var f,$;return{data:b.values,type:t.chartType,smooth:.3,showSymbol:!1,name:b.name,silent:!0,animationEasing:function(A){return A===1?1:1-Math.pow(2,-10*A)},lineStyle:{width:2},areaStyle:t.areaStyle,itemStyle:{borderRadius:100},emphasis:{itemStyle:{color:t.hoverColor,borderColor:t.hoverBorderColor}},markLine:{symbol:"roundRect",symbolSize:0,lineStyle:{color:"rgba(0, 0, 0, 0)"},precision:5,label:{backgroundColor:(t.color||[])[h]||"black",borderRadius:3,padding:4,formatter:A=>n(A.data.yAxis,t.axisLabelFormatter.yAxis),color:"#FFF",fontSize:10},data:t.isLastValueChipVisible?[{name:"Latest",yAxis:((f=t.data[h])==null?void 0:f.values.length)>0?(me.last(($=t.data[h])==null?void 0:$.values)||[])[1]:0}]:[],animation:!1}}})})),g=_(()=>{let b={};return t.height&&typeof t.height=="number"&&(b.height=`${t.height}px`),b});Se(()=>t.forceResizeTick,()=>{u.value&&u.value.resize()});function p(b){const h=De((t.data[0].values[t.data[0].values.length-1]||[])[1]);if(b){c.value=n(h.value()||0,t.axisLabelFormatter.yAxis||{style:"currency",currency:"USD",fixedFormat:!0});const $=t.data[0].values[0];$&&o("setCurrentChartValue",{chartDate:$[0],chartValue:$[1]})}const f=De((t.data[0].values[0]||[])[1]);m.value=((h.value()||0)-(f.value()||0))/(f.value()||0)}Se(()=>t.data,()=>{p(!0)}),Ye(()=>{p(!0)});function T(){p(!0),o("mouseLeaveEvent")}function w(){o("mouseEnterEvent")}const x=({dataIndex:b,seriesIndex:h})=>{var f;if(!(!t.showHeader&&!t.needChartValue)&&(f=t.data[h])!=null&&f.values){t.onAxisMoved&&t.onAxisMoved(t.data[h].values[b]);const $=t.data[h].values[b];o("setCurrentChartValue",{chartDate:$[0],chartValue:$[1]});const A=U(t.data[h].values[b][1]).toFixed(6);if(c.value=n(A,t.axisLabelFormatter.yAxis||{style:"currency",currency:"USD",fixedFormat:!0}),b===0){const L=Number(t.data[h].values[0][1]),C=t.data[h].values[t.data[h].values.length-1][1];m.value=(C-L)/L}else{const L=t.data[h].values[b-1][1],C=t.data[h].values[b][1],F=(C-L)/L;if(L===0&&C!==0){m.value=1;return}if(isNaN(F)){m.value=0;return}m.value=F}}};return(b,h)=>{const f=he;return s.isLoading?(r(),P(f,{key:0,class:"mt-16 h-96"})):(r(),B("div",{key:1,class:te(s.wrapperClass),onMouseenter:w,onTouchstartPassive:w,onMouseleave:T,onTouchend:T},[s.showHeader?(r(),B("div",Qo,[i("h3",Go,k(e(c)),1),i("span",{class:te({"text-green-400":e(m)>=0,"text-red-400":e(m)<0,"font-medium":!0})},k(e(De)(e(m)).format("+0.0%")),3)])):M("",!0),v(e(fo),{ref_key:"chartInstance",ref:u,class:te([s.height&&typeof(s.height==="string")?`h-${s.height}`:"","w-full",s.chartClass]),option:e(d),autoresize:"",updateOptions:{replaceMerge:"series"},style:Ft([e(g)]),onUpdateAxisPointer:x},null,8,["class","option","style"])],34))}}}),Jo={class:"h-10 text-base period-select-input"},Zo={class:"flex flex-1 justify-between items-center h-full"},Xo={class:"period-select-input__selected"},es=["onClick"],ts={class:"py-2 px-3 text-sm font-medium text-gray-500 whitespace-nowrap bg-gray-50 dark:bg-gray-800 border-b dark:border-gray-900"},os=["onClick"],ss={class:"flex items-center ml-1 font-medium"},as=E({__name:"PoolChartPeriodSelect",props:{options:null,activeOption:null},emits:["change-option"],setup(s,{emit:o}){return(t,u)=>{const c=ne,m=Dt;return r(),P(m,{noPad:""},{activator:y(()=>[i("div",Jo,[i("div",Zo,[i("div",Xo,k(s.activeOption.text),1),v(c,{name:"chevron-down"})])])]),default:y(({close:n})=>[i("div",{class:"flex overflow-hidden flex-col w-44 rounded-lg",onClick:n},[i("div",ts,k(t.$t("poolChart.period.title"))+": ",1),(r(!0),B(Y,null,fe(s.options,l=>(r(),B("div",{key:l.days,class:"flex justify-between items-center p-3 hover:bg-gray-50 dark:hover:bg-gray-850 cursor-pointer",onClick:a=>o("change-option",l)},[i("div",ss,k(l.text),1),s.activeOption.days===l.days?(r(),P(c,{key:0,name:"check",class:"text-blue-500"})):M("",!0)],8,os))),128))],8,es)]),_:1})}}});const ns=re(as,[["__scopeId","data-v-38864c37"]]),ls={},is={class:"flex flex-col text-sm"},rs={class:"flex items-center text-blue-600"};function cs(s,o){const t=ne,u=de,c=Ve;return r(),P(c,{class:"py-2 px-2.5 mb-5",type:"tip",size:"md",block:"",title:""},{default:y(()=>[i("div",is,[i("span",null,k(s.$t("poolChart.fxPoolWarning")),1),v(u,{href:"https://docs.xave.co/product-overview-1/amm#mechanism",external:"",noStyle:""},{default:y(()=>[i("div",rs,[i("span",null,k(s.$t("learnMore")),1),v(t,{name:"arrow-up-right",size:"sm"})])]),_:1})])]),_:1})}const us=re(ls,[["render",cs]]),ds={key:1,class:"chart"},ps={class:"flex flex-col xs:flex-row xs:flex-wrap justify-between mb-6 dark:border-gray-900"},ms={class:"flex mb-4"},fs={class:"flex items-center"},vs={class:"flex flex-col items-start xs:items-end text-2xl font-semibold tabular-nums"},gs=E({__name:"PoolChart",props:{historicalPrices:{default:null},snapshots:{default:null},loading:{type:Boolean,default:!1},poolPremintedBptIndex:null,totalLiquidity:null,tokensList:null,poolType:null},setup(s){const o=s,{t}=pe(),u=gt(),{fNum:c}=ae(),{isMobile:m}=we(),{darkMode:n}=ht(),l=2,a=[{value:"volume",label:t("poolChart.tabs.volume")},{value:"tvl",label:t("poolChart.tabs.tvl")},{value:"fees",label:t("poolChart.tabs.fees")}],d=X(a[0].value),g=X({num:"",isNegative:!1}),p=X(""),T=X(!1),w=_(()=>Object.values(o.snapshots||[])),x=_(()=>[{text:t("poolChart.period.days",[90]),days:90},{text:t("poolChart.period.days",[180]),days:180},{text:t("poolChart.period.days",[365]),days:365},{text:t("poolChart.period.all"),days:w.value.length}]),b=X(x.value[0]),h=_(()=>w.value.map(S=>Ce(rt(S.timestamp,new Date(S.timestamp).getTimezoneOffset()),"yyyy/MM/dd")));function f(S){const N=[];return o.poolType===Re.StablePhantom?S.forEach((D,O)=>{const H=h.value[O];if(O===0){N.push(Object.freeze([H,Number(o.totalLiquidity||0)]));return}N.push(Object.freeze([H,Number(D.liquidity)]))}):S.forEach((D,O)=>{var z;const H=h.value[O];if(O===0){N.push(Object.freeze([H,Number(o.totalLiquidity||0)]));return}const Q=o.historicalPrices&&o.historicalPrices[D.timestamp];if(!Q||Q.length<(((z=o.tokensList)==null?void 0:z.length)||0)){if(!D.liquidity)return;N.push(Object.freeze([H,Number(D.liquidity)]));return}let q=[...D.amounts];D.amounts.length>Q.length&&(q=q.filter((ee,V)=>V!==o.poolPremintedBptIndex));const Z=q.reduce((ee,V,ve)=>(ee+=Number(V)*Q[ve],ee),0);N.push(Object.freeze([H,Z]))}),{color:[u.theme.colors.blue[600]],hoverBorderColor:u.theme.colors.pink[500],hoverColor:n.value?u.theme.colors.gray[900]:u.theme.colors.white,areaStyle:{color:new vo(0,0,0,1,[{offset:0,color:"rgba(14, 165, 233, 0.08)"},{offset:1,color:"rgba(68, 9, 236, 0)"}])},chartType:"line",data:[{name:"TVL",values:N}],defaultHeaderStateValue:c(N[0][1],{style:"currency"})}}function $(S,N,D){const O=S.map((Q,q)=>{const Z=parseFloat(Q.swapFees);let z;return q===w.value.length-1?z=0:q===D?z=parseFloat(w.value[q+1].swapFees):z=parseFloat(S[q+1].swapFees),Object.freeze([h.value[q],Z-z])});S.length<30&&O.push(...W());const H=Number(S[0].swapFees)-(N?0:Number(S[D].swapFees));return{color:[u.theme.colors.yellow[400]],chartType:"bar",hoverColor:u.theme.colors.pink[500],data:[{name:"Fees",values:O}],defaultHeaderStateValue:c(H,{style:"currency"})}}function A(S,N,D){const O=S.map((Q,q)=>{const Z=parseFloat(Q.swapVolume);let z;return q===w.value.length-1?z=0:q===D?z=parseFloat(w.value[q+1].swapVolume):z=parseFloat(S[q+1].swapVolume),Object.freeze([h.value[q],Z-z])});S.length<30&&O.push(...W());const H=Number(S[0].swapVolume)-(N?0:Number(S[D].swapVolume));return{color:[u.theme.colors.green[400]],chartType:"bar",hoverColor:u.theme.colors.pink[500],data:[{name:"Volume",values:O}],defaultHeaderStateValue:c(H,{style:"currency"})}}const L=_(()=>{const S=b.value.days===w.value.length?w.value:w.value.slice(0,b.value.days-1),N=S.length===w.value.length,D=S.length-1;return d.value==="tvl"?f(S):d.value==="fees"?$(S,N,D):A(S,N,D)}),C=_(()=>{const S=x.value.find(D=>D.days===b.value.days);let N=`${S==null?void 0:S.text} ${d.value}`;return d.value==="tvl"&&(N=t("poolChart.defaultTitle.tvl")),{title:N,value:L.value.defaultHeaderStateValue}}),F=_(()=>{const{poolType:S}=o;return S&&Ot(S)&&d.value==="fees"});function I(S){b.value=S}function R(S){g.value.num=c(S.chartValue,{style:"currency",maximumFractionDigits:0,fixedFormat:!0}),g.value.isNegative=S.chartValue<0,p.value=Ce(new Date(S.chartDate),_o)}function W(){const S=w.value[w.value.length-1].timestamp/1e3,N=30-w.value.length,D=[];for(let O=1;O<=N;O++){const H=S-O*Ee;D.push(H*1e3)}return D.map(O=>Object.freeze([Ce(rt(O,new Date(O).getTimezoneOffset()),"yyyy/MM/dd"),0]))}return(S,N)=>{const D=he,O=Ze,H=ne,Q=go,q=Ko;return s.loading?(r(),P(D,{key:0,class:"chart-loading-block"})):e(w).length>=l?(r(),B("div",ds,[i("div",ps,[i("div",ms,[v(O,{modelValue:d.value,"onUpdate:modelValue":N[0]||(N[0]=Z=>d.value=Z),tabs:a,noPad:"",class:"mr-6 -mb-px"},null,8,["modelValue"]),i("div",fs,[v(ns,{options:e(x),activeOption:b.value,onChangeOption:I},null,8,["options","activeOption"])])]),i("div",vs,[i("p",{class:te(["tracking-tighter",{"text-red-500":g.value.isNegative&&T.value}])},k(T.value?g.value.num:e(C).value),3),i("div",{class:te(["text-sm font-medium text-secondary",{"text-pink-500":T.value}])},[i("p",null,k(T.value?p.value:e(C).title),1)],2)])]),e(L).data[0].values.length<=l?(r(),P(Q,{key:0,class:"h-96"},{default:y(()=>[v(H,{name:"bar-chart"}),K(" "+k(S.$t("noPriceInfo")),1)]),_:1})):(r(),P(q,{key:1,height:"96",data:e(L).data,axisLabelFormatter:{yAxis:{style:"currency",maximumFractionDigits:0,fixedFormat:!0,abbreviate:!0}},areaStyle:e(L).areaStyle,color:e(L).color,hoverColor:e(L).hoverColor,hoverBorderColor:e(L).hoverBorderColor,xAxisMinInterval:3600*1e3*24*30,showLegend:!1,needChartValue:"",chartType:e(L).chartType,showTooltipLayer:!1,hideYAxis:e(m),onSetCurrentChartValue:R,onMouseLeaveEvent:N[1]||(N[1]=Z=>T.value=!1),onMouseEnterEvent:N[2]||(N[2]=Z=>T.value=!0)},null,8,["data","areaStyle","color","hoverColor","hoverBorderColor","chartType","hideYAxis"])),e(F)?(r(),P(us,{key:2})):M("",!0)])):(r(),P(Q,{key:2,class:"h-96",align:"center"},{default:y(()=>[v(H,{name:"bar-chart"}),K(" "+k(S.$t("insufficientData")),1)]),_:1}))}}});const hs=re(gs,[["__scopeId","data-v-d826b9a4"]]),_s={class:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-4"},ys={class:"flex mb-2 text-sm font-medium text-secondary"},bs=E({__name:"PoolStatCards",props:{pool:{default:null},poolApr:{default:null},loading:{type:Boolean,default:!1},loadingApr:{type:Boolean}},setup(s){const o=s,{fNum:t}=ae(),{t:u}=pe(),c=_(()=>{var l;const n=o.poolApr;return n?Rt(n,(l=o.pool)==null?void 0:l.boost):"0"}),m=_(()=>{var a,d,g,p;const n=Number(((a=o.pool)==null?void 0:a.volumeSnapshot)||"0"),l=Number(((d=o.pool)==null?void 0:d.feesSnapshot)||"0");return[{id:"poolValue",label:u("poolValue"),value:t(((g=o.pool)==null?void 0:g.totalLiquidity)||"0",J.fiat),loading:o.loading},{id:"volumeTime",label:u("volumeTime",["24h"]),value:t(n>at?"-":n,J.fiat),loading:o.loading},{id:"feesTime",label:u("feesTime",["24h"]),value:t(l>at?"-":l,J.fiat),loading:o.loading},{id:"apr",label:"APR",value:Number(((p=o.poolApr)==null?void 0:p.swapFees)||"0")>Et?"-":c.value,loading:o.loadingApr}]});return(n,l)=>{const a=he,d=Pe,g=_e;return r(),B("div",_s,[(r(!0),B(Y,null,fe(e(m),p=>(r(),B(Y,{key:p.id},[p.loading||!s.pool?(r(),P(a,{key:0,class:"h-24"})):(r(),P(g,{key:1},{default:y(()=>[i("div",ys,[i("span",null,k(p.label),1),p.id==="apr"&&s.poolApr?(r(),B(Y,{key:0},[e(nt)(s.pool.poolType)?(r(),P(d,{key:0,width:"36",text:n.$t("lbpAprTooltip"),iconSize:"sm",iconClass:"ml-1"},null,8,["text"])):(r(),P(yt,{key:1,pool:s.pool,poolApr:s.poolApr},null,8,["pool","poolApr"]))],64)):M("",!0)]),i("div",{class:te(["flex items-center text-xl font-medium",{"text-gray-300 dark:text-gray-600 line-through":p.id==="apr"&&e(nt)(s.pool.poolType)}])},k(p.value),3)]),_:2},1024))],64))),128))])}}});function wt(s,o={},t={}){const{networkId:u}=ce(),c=ie(ke.Pools.Swaps(u,s,o)),m=async({pageParam:l=0})=>{const a=l===0?j.Pagination.PerPoolInitial:j.Pagination.PerPool,d=await Te.poolSwaps.get({first:a,skip:l,where:Object.assign({poolId:s},o)});return{poolSwaps:d,skip:d.length>=a?l+a:void 0}},n=ie({getNextPageParam:l=>l.skip,...t});return Ie(c,m,n)}function ks(s,o={}){const{account:t,isWalletReady:u}=oe(),{networkId:c}=ce(),m=_(()=>u.value&&t.value!=null),n=ie(ke.Pools.UserSwaps(c,s,t)),l=async({pageParam:d=0})=>{const g=await Te.poolSwaps.get({first:j.Pagination.PerPage,skip:d,where:{userAddress:t.value.toLowerCase(),poolId:s}});return{poolSwaps:g,skip:g.length>=j.Pagination.PerPage?d+j.Pagination.PerPage:void 0}},a=ie({enabled:m,getNextPageParam:d=>d.skip,...o});return Ie(n,l,a)}var G=(s=>(s.ALL_ACTIVITY="allActivity",s.USER_ACTIVITY="userActivity",s.SWAPS="swaps",s))(G||{});const xs={class:"py-2 px-6"},ws={class:"flex items-center"},Ls={class:"flex mr-3 center"},Ps={class:"flex flex-wrap items-center py-4 px-6 -mt-1"},Ts={class:"token-item"},$s={class:"font-numeric"},As={class:"token-item"},Cs={class:"font-numeric"},Ss={key:0,class:"flex items-center p-1 px-2 m-1 bg-gray-50 dark:bg-gray-700 rounded-lg"},Bs={class:"font-numeric"},Is={class:"flex justify-end py-4 px-6 font-numeric"},Ms={class:"py-4 px-6"},Vs={class:"flex justify-end items-center text-right whitespace-nowrap wrap"},Ns=E({__name:"Table",props:{poolSwaps:null,isLoading:{type:Boolean,default:!1},isLoadingMore:{type:Boolean,default:!1},loadMore:null,isPaginated:{type:Boolean,default:!1},noResultsLabel:{default:""},pool:null},emits:["loadMore"],setup(s,{emit:o}){const t=s,{fNum:u}=ae(),{t:c}=pe(),{priceFor:m}=ue(),{upToLargeBreakpoint:n}=we(),{explorerLinks:l}=oe(),a=_(()=>[{name:c("action"),id:"action",accessor:"tx",Cell:"actionCell",width:150,sortable:!1},{name:c("details"),id:"details",accessor:"",Cell:"detailsCell",width:325,sortable:!1},{name:c("value"),id:"value",accessor:"value",Cell:"valueCell",align:"right",className:"align-center w-40",sortKey:x=>x.value,width:125},{name:c("time"),id:"timeAgo",accessor:"timestamp",Cell:"timeCell",align:"right",sortKey:x=>x.timestamp,width:200}]),d=_(()=>t.isLoading?[]:Object.entries(me.groupBy(t.poolSwaps,"tx")).map(([b,h])=>{const{tokenIn:f,tokenOut:$,timestamp:A}=h[0];let L,C;$===t.pool.address?(L="invest",C=c("pool")):f===t.pool.address?(L="withdraw",C=c("withdraw.label")):(L="swap",C=c("swap"));const F=p(h,L),I=g(F,L);return{label:C,type:L,value:I,formattedValue:I>0?u(I,{style:"currency",abbreviate:!0}):"-",timestamp:A,formattedDate:c("timeAgo",[We(A)]),tx:b,tokenAmounts:F}}));function g(x,b){if(b==="swap"){const f=T(x[1].address),$=w(x[1].address,x[1].amount);return U(m(f)).times($).toNumber()}let h=U(0);for(const{address:f,amount:$}of x){const A=T(f),L=w(f,$),C=m(A),F=Math.abs(parseFloat(L.toString()));if(F>0&&C===0)return 0;h=h.plus(U(F).times(C))}return h.toNumber()}function p(x,b){const h=b==="invest";if(b==="swap"){const f=x[0],{tokenIn:$,tokenOut:A,tokenAmountIn:L,tokenAmountOut:C}=f;return[{address:$,amount:L},{address:A,amount:C}]}return x.map(f=>({address:h?f.tokenIn:f.tokenOut,amount:h?f.tokenAmountIn:f.tokenAmountOut}))}function T(x){var h,f;const b=(f=(h=t.pool)==null?void 0:h.onchain)==null?void 0:f.linearPools;return b!=null&&b[x]!=null?b[x].mainToken.address:x}function w(x,b){var f,$;const h=($=(f=t.pool)==null?void 0:f.onchain)==null?void 0:$.linearPools;return h!=null&&h[x]!=null?U(b).times(h[x].priceRate):U(b)}return(x,b)=>{const h=ne,f=Ae,$=de,A=Xe,L=_e;return r(),P(L,{class:"overflow-x-auto",square:e(n),noBorder:e(n),noPad:""},{default:y(()=>[v(A,{columns:e(a),data:e(d),isLoading:s.isLoading,isLoadingMore:s.isLoadingMore,isPaginated:s.isPaginated,skeletonClass:"h-64",sticky:"both",noResultsLabel:s.noResultsLabel,initialState:{sortColumn:"timeAgo",sortDirection:"desc"},onLoadMore:b[0]||(b[0]=C=>o("loadMore"))},{actionCell:y(C=>[i("div",xs,[i("div",ws,[i("div",Ls,[C.type==="invest"?(r(),P(h,{key:0,name:"plus",size:"sm",class:"text-green-500 dark:text-green-400"})):C.type==="withdraw"?(r(),P(h,{key:1,name:"minus",size:"sm",class:"text-red-500"})):(r(),P(h,{key:2,name:"repeat",size:"sm",class:"text-green-500 dark:text-green-400"}))]),i("div",null,k(C.label),1)])])]),detailsCell:y(C=>[i("div",Ps,[C.type==="swap"?(r(),B(Y,{key:0},[i("div",Ts,[v(f,{address:C.tokenAmounts[0].address,class:"mr-2 shrink-0"},null,8,["address"]),i("span",$s,k(e(u)(C.tokenAmounts[0].amount,e(J).token)),1)]),v(h,{name:"arrow-right",class:"mx-1"}),i("div",As,[v(f,{address:C.tokenAmounts[1].address,class:"mr-2 shrink-0"},null,8,["address"]),i("span",Cs,k(e(u)(C.tokenAmounts[1].amount,e(J).token)),1)])],64)):(r(!0),B(Y,{key:1},fe(C.tokenAmounts,(F,I)=>(r(),B(Y,{key:I},[F.amount!=="0"?(r(),B("div",Ss,[v(f,{address:F.address,class:"mr-2 shrink-0"},null,8,["address"]),i("span",Bs,k(e(u)(F.amount,e(J).token)),1)])):M("",!0)],64))),128))])]),valueCell:y(C=>[i("div",Is,k(C.formattedValue),1)]),timeCell:y(C=>[i("div",Ms,[i("div",Vs,[K(k(C.formattedDate)+" ",1),v($,{href:e(l).txLink(C.tx),external:"",class:"flex items-center ml-2"},{default:y(()=>[v(h,{name:"arrow-up-right",size:"sm",class:"hover:text-blue-600 dark:hover:text-blue-400 transition-colors text-secondary"})]),_:2},1032,["href"])])])]),_:1},8,["columns","data","isLoading","isLoadingMore","isPaginated","noResultsLabel"])]),_:1},8,["square","noBorder"])}}});const Fs=re(Ns,[["__scopeId","data-v-fd0f3830"]]),ct=E({__name:"Activities",props:{pool:null,loading:{type:Boolean,default:!1},poolActivityType:{default:G.ALL_ACTIVITY}},setup(s){const o=s,t=o.poolActivityType===G.ALL_ACTIVITY?wt(o.pool.id):ks(o.pool.id),u=_(()=>t.data.value?me.flatten(t.data.value.pages.map(a=>a.poolSwaps)):[]),c=_(()=>t.isLoading.value),m=_(()=>{var a;return(a=t.hasNextPage)==null?void 0:a.value}),n=_(()=>{var a;return(a=t.isFetchingNextPage)==null?void 0:a.value});function l(){t.fetchNextPage()}return(a,d)=>(r(),P(Fs,{poolSwaps:e(u),pool:s.pool,isLoading:s.loading||e(c),isLoadingMore:e(n),isPaginated:e(m),noResultsLabel:s.poolActivityType===e(G).ALL_ACTIVITY?a.$t("poolTransactions.noResults.allTransactions"):a.$t("poolTransactions.noResults.myTransactions"),onLoadMore:l},null,8,["poolSwaps","pool","isLoading","isLoadingMore","isPaginated","noResultsLabel"]))}});function Ds(s,o={}){const{networkId:t}=ce(),u=ie(ke.Pools.Activities(t,s)),c=async({pageParam:n=0})=>{const l=n===0?j.Pagination.PerPoolInitial:j.Pagination.PerPool,a=await Te.poolActivities.get({first:l,skip:n,where:{pool:s}});return{poolActivities:a,skip:a.length>=l?n+l:void 0}},m=ie({getNextPageParam:n=>n.skip,...o});return Ie(u,c,m)}function Os(s,o={}){const{account:t,isWalletReady:u}=oe(),{networkId:c}=ce(),m=_(()=>u.value&&t.value!=null),n=ie(ke.Pools.UserActivities(c,s,t)),l=async({pageParam:d=0})=>{const g=d===0?j.Pagination.PerPoolInitial:j.Pagination.PerPool,p=await Te.poolActivities.get({first:g,skip:d,where:{pool:s,sender:t.value.toLowerCase()}});return{poolActivities:p,skip:p.length>=g?d+g:void 0}},a=ie({enabled:m,getNextPageParam:d=>d.skip,...o});return Ie(n,l,a)}const Rs={class:"py-2 px-6"},Es={class:"flex items-center"},qs={class:"flex mr-3 center"},zs={class:"text-left"},js={class:"flex flex-wrap py-4 px-6 -mt-1"},Hs={key:0,class:"flex items-center p-1 px-2 m-1 bg-gray-50 dark:bg-gray-700 rounded-lg"},Us={class:"font-numeric"},Ys={class:"flex justify-end py-4 px-6 font-numeric"},Ws={class:"py-4 px-6"},Qs={class:"flex justify-end items-center text-right whitespace-nowrap wrap"},Gs=E({__name:"Table",props:{tokens:null,pool:null,poolActivities:null,isLoading:{type:Boolean,default:!1},isLoadingMore:{type:Boolean,default:!1},loadMore:null,isPaginated:{type:Boolean,default:!1},noResultsLabel:{default:""}},emits:["loadMore"],setup(s,{emit:o}){const t=s,{fNum:u}=ae(),{t:c}=pe(),{explorerLinks:m}=oe(),{upToLargeBreakpoint:n}=we(),{getToken:l,priceFor:a}=ue(),d=_(()=>[{name:c("action"),id:"action",accessor:"tx",Cell:"actionCell",width:150,sortable:!1},{name:c("value"),id:"value",accessor:"value",Cell:"valueCell",align:"right",className:"align-center w-40",sortKey:w=>w.value,width:125},{name:c("tokens"),id:"details",accessor:"",Cell:"detailsCell",width:325,sortable:!1},{name:c("time"),id:"timeAgo",accessor:"timestamp",Cell:"timeCell",align:"right",sortKey:w=>w.timestamp,width:200}]),g=_(()=>t.isLoading?[]:t.poolActivities.map(({type:w,timestamp:x,tx:b,amounts:h})=>{const f=_t(t.pool),$=h.filter((C,F)=>F!==f),A=w==="Join",L=p($);return{label:c(A?"addTokens":"withdraw.label"),value:L,formattedValue:L>0?u(L,{style:"currency",abbreviate:!0}):"-",timestamp:x,formattedDate:c("timeAgo",[We(x)]),tx:b,type:w,tokenAmounts:T($)}}));function p(w){let x=U(0);for(let b=0;b<w.length;b++){const h=w[b],f=Le(t.tokens[b]),$=l(f),A=a($==null?void 0:$.address),L=Math.abs(parseFloat(h));if(L>0&&A===0)return 0;x=x.plus(U(L).times(A))}return x.toNumber()}function T(w){return w.map((x,b)=>{const h=Le(t.tokens[b]),f=l(h),$=f?f.symbol:h,A=parseFloat(x);return{address:h,symbol:$,amount:u(A,J.token)}})}return(w,x)=>{const b=ne,h=Ae,f=de,$=Xe,A=_e;return r(),P(A,{class:"overflow-x-auto",square:e(n),noBorder:e(n),noPad:""},{default:y(()=>[v($,{columns:e(d),data:e(g),isLoading:s.isLoading,isLoadingMore:s.isLoadingMore,isPaginated:s.isPaginated,skeletonClass:"h-64",sticky:"both",noResultsLabel:s.noResultsLabel,initialState:{sortColumn:"timeAgo",sortDirection:"desc"},onLoadMore:x[0]||(x[0]=L=>o("loadMore"))},{actionCell:y(L=>[i("div",Rs,[i("div",Es,[i("div",qs,[L.type==="Join"?(r(),P(b,{key:0,name:"plus",size:"sm",class:"text-green-500 dark:text-green-400"})):(r(),P(b,{key:1,name:"minus",size:"sm",class:"text-red-500"}))]),i("div",zs,k(L.label),1)])])]),detailsCell:y(L=>[i("div",js,[(r(!0),B(Y,null,fe(L.tokenAmounts,(C,F)=>(r(),B(Y,{key:F},[C.amount!=="0"?(r(),B("div",Hs,[v(h,{address:C.address,class:"mr-2 shrink-0"},null,8,["address"]),i("span",Us,k(C.amount),1)])):M("",!0)],64))),128))])]),valueCell:y(L=>[i("div",Ys,k(L.formattedValue),1)]),timeCell:y(L=>[i("div",Ws,[i("div",Qs,[K(k(L.formattedDate)+" ",1),v(f,{href:e(m).txLink(L.tx),external:"",class:"flex items-center ml-2"},{default:y(()=>[v(b,{name:"arrow-up-right",size:"sm",class:"text-gray-500 hover:text-blue-500 transition-colors"})]),_:2},1032,["href"])])])]),_:1},8,["columns","data","isLoading","isLoadingMore","isPaginated","noResultsLabel"])]),_:1},8,["square","noBorder"])}}}),ut=E({__name:"Activities",props:{pool:null,loading:{type:Boolean,default:!1},poolActivityType:{default:G.ALL_ACTIVITY}},setup(s){const o=s,t=o.poolActivityType===G.ALL_ACTIVITY?Ds(o.pool.id):Os(o.pool.id),u=_(()=>t.data.value?me.flatten(t.data.value.pages.map(a=>a.poolActivities)):[]),c=_(()=>t.isLoading.value),m=_(()=>{var a;return(a=t.hasNextPage)==null?void 0:a.value}),n=_(()=>{var a;return(a=t.isFetchingNextPage)==null?void 0:a.value});function l(){t.fetchNextPage()}return(a,d)=>(r(),P(Gs,{pool:s.pool,tokens:e(Be)(s.pool),poolActivities:e(u),isLoading:s.loading||e(c),isLoadingMore:e(n),isPaginated:e(m),noResultsLabel:s.poolActivityType===e(G).ALL_ACTIVITY?a.$t("poolTransactions.noResults.allInvestments"):a.$t("poolTransactions.noResults.myInvestments"),onLoadMore:l},null,8,["pool","tokens","poolActivities","isLoading","isLoadingMore","isPaginated","noResultsLabel"]))}}),Ks=["textContent"],Js={class:"flex justify-between items-end mx-4 lg:mx-0 mb-6 border-b dark:border-gray-900"},Zs={key:1,class:"mb-20"},Xs=E({__name:"InvestmentTransactions",props:{pool:null,loading:{type:Boolean,default:!1}},setup(s){const o=s,{isWalletReady:t}=oe(),u=_(()=>c.value||m.value?[{value:G.ALL_ACTIVITY,label:n("poolTransactions.tabs.allTransactions")},...t.value?[{value:G.USER_ACTIVITY,label:n("poolTransactions.tabs.myTransactions")}]:[]]:[{value:G.ALL_ACTIVITY,label:n("poolTransactions.tabs.allInvestments")},...t.value?[{value:G.USER_ACTIVITY,label:n("poolTransactions.tabs.myInvestments")}]:[]]),{isDeepPool:c,isStablePhantomPool:m}=be(ye(o,"pool")),{t:n}=pe(),l=X(u.value[0].value),a=_(()=>c.value||m.value?n("poolActivity"):n("liquidityProvision"));return(d,g)=>{const p=Ze;return r(),B("div",null,[i("div",null,[i("h4",{class:"px-4 lg:px-0 mb-5",textContent:k(e(a))},null,8,Ks),i("div",Js,[v(p,{modelValue:l.value,"onUpdate:modelValue":g[0]||(g[0]=T=>l.value=T),tabs:e(u),noPad:"",class:"-mb-px"},null,8,["modelValue","tabs"])])]),e(m)||e(c)?(r(),B(Y,{key:0},[l.value===e(G).ALL_ACTIVITY?(r(),P(ct,{key:0,poolActivityType:e(G).ALL_ACTIVITY,pool:s.pool,loading:s.loading},null,8,["poolActivityType","pool","loading"])):l.value===e(G).USER_ACTIVITY?(r(),P(ct,{key:1,poolActivityType:e(G).USER_ACTIVITY,pool:s.pool,loading:s.loading},null,8,["poolActivityType","pool","loading"])):M("",!0)],64)):(r(),B("div",Zs,[l.value===e(G).ALL_ACTIVITY?(r(),P(ut,{key:0,poolActivityType:e(G).ALL_ACTIVITY,pool:s.pool,loading:s.loading},null,8,["poolActivityType","pool","loading"])):l.value===e(G).USER_ACTIVITY?(r(),P(ut,{key:1,poolActivityType:e(G).USER_ACTIVITY,pool:s.pool,loading:s.loading},null,8,["poolActivityType","pool","loading"])):M("",!0)]))])}}}),ea={class:"py-2 px-6"},ta={class:"flex items-center"},oa={class:"flex justify-end py-4 px-6 font-numeric"},sa={class:"flex flex-wrap items-center py-4 px-6 -mt-1"},aa={class:"token-item"},na={class:"font-numeric"},la={class:"token-item"},ia={class:"font-numeric"},ra={class:"py-4 px-6"},ca={class:"flex justify-end items-center text-right whitespace-nowrap wrap"},ua=E({__name:"Table",props:{poolSwaps:null,isLoading:{type:Boolean,default:!1},isLoadingMore:{type:Boolean,default:!1},loadMore:null,isPaginated:{type:Boolean,default:!1},noResultsLabel:{default:""}},emits:["loadMore"],setup(s,{emit:o}){const t=s,{fNum:u}=ae(),{t:c}=pe(),{priceFor:m}=ue(),{upToLargeBreakpoint:n}=we(),{explorerLinks:l}=oe(),a=_(()=>[{name:c("swapper"),id:"action",accessor:"tx",Cell:"actionCell",width:190,sortable:!1},{name:c("value"),id:"value",accessor:"value",Cell:"valueCell",align:"right",className:"align-center w-40",sortKey:g=>g.value,width:125},{name:c("swapDetails"),id:"details",accessor:"",Cell:"detailsCell",width:310,sortable:!1},{name:c("time"),id:"timeAgo",accessor:"timestamp",Cell:"timeCell",align:"right",sortKey:g=>g.timestamp,width:190}]),d=_(()=>t.isLoading?[]:t.poolSwaps.map(({tokenIn:g,tokenOut:p,tokenAmountIn:T,tokenAmountOut:w,timestamp:x,tx:b,userAddress:h,ensName:f,ensAvatar:$})=>{const A=U(m(p)).times(w).toNumber();return{value:A,formattedValue:A>0?u(A,{style:"currency",abbreviate:!0}):"-",tokenIn:g,tokenOut:p,tokenAmountIn:T,tokenAmountOut:w,timestamp:x,userAddress:h.id,ensName:f,ensAvatar:$,formattedDate:c("timeAgo",[We(x)]),tx:b}}));return(g,p)=>{const T=Ae,w=ne,x=de,b=Xe,h=_e;return r(),P(h,{class:"overflow-x-auto",square:e(n),noBorder:e(n),noPad:""},{default:y(()=>[v(b,{columns:e(a),data:e(d),isLoading:s.isLoading,isLoadingMore:s.isLoadingMore,isPaginated:s.isPaginated,skeletonClass:"h-64",sticky:"both",noResultsLabel:s.noResultsLabel,initialState:{sortColumn:"timeAgo",sortDirection:"desc"},onLoadMore:p[0]||(p[0]=f=>o("loadMore"))},{actionCell:y(f=>[i("div",ea,[i("div",ta,[v(T,{class:"mr-2 shrink-0",address:f.userAddress,iconURI:f.ensAvatar,size:30},null,8,["address","iconURI"]),i("span",{class:te([f.ensName&&"truncate"])},k(f.ensName||e(qe)(f.userAddress)),3)])])]),valueCell:y(f=>[i("div",oa,k(f.formattedValue),1)]),detailsCell:y(f=>[i("div",sa,[i("div",aa,[v(T,{address:f.tokenIn,class:"mr-2 shrink-0"},null,8,["address"]),i("span",na,k(e(u)(f.tokenAmountIn,e(J).token)),1)]),v(w,{name:"arrow-right",class:"mx-1"}),i("div",la,[v(T,{address:f.tokenOut,class:"mr-2 shrink-0"},null,8,["address"]),i("span",ia,k(e(u)(f.tokenAmountOut,e(J).token)),1)])])]),timeCell:y(f=>[i("div",ra,[i("div",ca,[K(k(f.formattedDate)+" ",1),v(x,{href:e(l).txLink(f.tx),external:"",class:"flex items-center ml-2"},{default:y(()=>[v(w,{name:"arrow-up-right",size:"sm",class:"text-gray-500 hover:text-blue-500 transition-colors"})]),_:2},1032,["href"])])])]),_:1},8,["columns","data","isLoading","isLoadingMore","isPaginated","noResultsLabel"])]),_:1},8,["square","noBorder"])}}});const da=re(ua,[["__scopeId","data-v-9c736478"]]),pa={class:"mb-20"},ma=["textContent"],fa=E({__name:"SwapTransactions",props:{pool:null,loading:{type:Boolean,default:!1}},setup(s){const t=wt(s.pool.id),u=_(()=>t.data.value?me.flatten(t.data.value.pages.map(a=>a.poolSwaps)):[]),c=_(()=>t.isLoading.value),m=_(()=>{var a;return(a=t.hasNextPage)==null?void 0:a.value}),n=_(()=>{var a;return(a=t.isFetchingNextPage)==null?void 0:a.value});function l(){t.fetchNextPage()}return(a,d)=>(r(),B("div",pa,[i("h4",{class:"px-4 lg:px-0 mb-5",textContent:k(a.$t("poolTransactions.tabs.swaps"))},null,8,ma),v(da,{poolSwaps:e(u),isLoading:s.loading||e(c),isLoadingMore:e(n),isPaginated:e(m),noResultsLabel:a.$t("poolTransactions.noResults.swaps"),onLoadMore:l},null,8,["poolSwaps","isLoading","isLoadingMore","isPaginated","noResultsLabel"])]))}}),va=E({__name:"PoolTransactionsCard",props:{pool:null,loading:{type:Boolean,default:!1}},setup(s){const o=s,{isDeepPool:t,isStablePhantomPool:u}=be(ye(o,"pool"));return(c,m)=>(r(),B(Y,null,[v(Xs,{pool:s.pool,loading:s.loading},null,8,["pool","loading"]),!e(u)&&!e(t)?(r(),P(fa,{key:0,pool:s.pool,loading:s.loading},null,8,["pool","loading"])):M("",!0)],64))}}),ga={key:0,class:"table-row"},ha={class:"table-row-title"},_a={class:"table-row-value"},ya=E({__name:"BalDetailsTable",props:{tableData:null},setup(s){const{upToLargeBreakpoint:o}=we();return(t,u)=>{const c=Pe,m=ne,n=de,l=_e;return r(),P(l,{class:"overflow-x-auto",square:e(o),noPad:""},{default:y(()=>[(r(!0),B(Y,null,fe(s.tableData,(a,d)=>(r(),B(Y,{key:d},[a?(r(),B("div",ga,[i("div",ha,k(a.title),1),i("div",_a,[K(k(a.value)+" ",1),a.tooltip?(r(),P(c,{key:0,text:a.tooltip,iconSize:"sm",class:"mt-1 ml-2"},null,8,["text"])):M("",!0),a.link?(r(),P(n,{key:1,href:a.link,external:"",noStyle:""},{default:y(()=>[v(m,{name:"arrow-up-right",size:"sm",class:"mt-2 ml-2 text-gray-500 hover:text-blue-500 transition-colors"})]),_:2},1032,["href"])):M("",!0)])])):M("",!0)],64))),128))]),_:1},8,["square"])}}});const ba=re(ya,[["__scopeId","data-v-2ac41114"]]),ka=["textContent"],xa=["textContent"],wa={class:"px-4 lg:px-0"},La=E({__name:"PoolContractDetails",props:{pool:null},setup(s){const o=s,{t}=pe(),{explorerLinks:u}=oe();function c(d){return d===j.ZeroAddress?t("poolAttrs.feesFixed"):d===j.DelegateOwner?t("poolAttrs.feesEditableGovernance"):t("poolAttrs.feesEditableOwner")}const m=_(()=>{var $;const{poolType:d,address:g,symbol:p,owner:T,createTime:w,swapFee:x,name:b,id:h,onchain:f}=o.pool;return[{title:t("attribute"),value:t("details")},{title:t("poolName"),value:(($=j.Metadata[h])==null?void 0:$.name)||b},{title:t("poolSymbol"),value:p||""},{title:t("poolType"),value:d},f!=null&&f.amp&&Number(f==null?void 0:f.amp)?{title:t("ampFactor.title"),value:f.amp}:null,{title:t("swapFees"),value:`${Number(x)*100}% (${c(T||"")})`},{title:t("poolManager"),value:d===Re.Managed?t("yes"):t("none")},T?{title:t("poolOwner"),value:n.value.title,link:n.value.link,tooltip:l.value}:null,{title:t("contractAddress"),value:qe(g),link:u.addressLink(g||"")},{title:t("createDate"),value:Ce((w||0)*1e3,"dd MMMM yyyy")}]}),n=_(()=>{const{owner:d}=o.pool;return d===j.ZeroAddress?{title:t("noOwner"),link:""}:d===j.DelegateOwner?{title:t("delegateOwner.title"),link:""}:{title:qe(d||""),link:u.addressLink(d||"")}}),l=_(()=>o.pool.owner===j.DelegateOwner?t("delegateOwner.tooltip"):""),a=_(()=>o.pool.poolType===Re.Managed?t(""):o.pool.owner===j.ZeroAddress?t("poolAttrs.immutable"):o.pool.owner===j.DelegateOwner?t("poolAttrs.immutableFeesEditableByGovernance"):t("poolAttrs.immutableFeesEditableByOwner"));return(d,g)=>{const p=ba;return r(),B("div",null,[i("h3",{class:"px-4 lg:px-0 mb-5",textContent:k(d.$t("poolDetails"))},null,8,ka),v(p,{class:"mb-12",tableData:e(m)},null,8,["tableData"]),e(a)?(r(),B(Y,{key:0},[i("h4",{class:"px-4 lg:px-0 mb-2",textContent:k(d.$t("poolManagement"))},null,8,xa),i("div",wa,k(e(a)),1)],64)):M("",!0)])}}}),Pa=E({__name:"PoolDeprecatedWarning",props:{pool:null},setup(s){const o=s,{networkSlug:t}=ce(),u=mt(),c=_(()=>{var l;return(l=He(o.pool.id))==null?void 0:l.newPool}),m=_(()=>c.value?"deprecatedPool.hasNewPool":"deprecatedPool.generic"),n=_(()=>{if(c.value)return u.resolve({name:"pool",params:{id:c.value,networkSlug:t}}).fullPath});return(l,a)=>{const d=de,g=Ve;return r(),P(g,{type:"tip",class:"mb-4",title:l.$t(`${e(m)}.title`)},{default:y(()=>[i("span",null,k(l.$t(`${e(m)}.description`)),1),K(" Â  "),e(c)?(r(),P(d,{key:0,tag:"router-link",to:e(n)},{default:y(()=>[K(k(l.$t("incentivizedPool")),1)]),_:1},8,["to"])):M("",!0),K(". ")]),_:1},8,["title"])}}}),Ta={class:"relative"},$a={class:"p-4 w-full hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl transition-colors"},Aa={class:"relative bg-white dark:bg-gray-850 rounded-b-lg"},Ca=E({__name:"StakingIncentivesCard",props:{pool:null},setup(s){const o=s,t=X(!1),u=X("stake"),{fNum:c}=ae(),{balanceFor:m}=ue(),{isStakablePool:n,isLoading:l,isRefetchingStakedShares:a,stakedShares:d,hasNonPrefGaugeBalance:g}=Me(),p=_(()=>U(o.pool.totalLiquidity).div(o.pool.totalShares).times((d.value||0).toString()).toString()),T=_(()=>U(o.pool.totalLiquidity).div(o.pool.totalShares).times(m(Le(o.pool.address))).toString()),w=_(()=>{var f;return((f=He(o.pool.id))==null?void 0:f.stakingDisabled)||T.value==="0"||g.value});function x(){T.value!=="0"&&(u.value="stake",t.value=!0)}function b(){p.value!=="0"&&(u.value="unstake",t.value=!0)}function h(){t.value=!1}return(f,$)=>{const A=ne,L=$e,C=Pe,F=xe,I=Ve,R=bt;return r(),B("div",null,[v(se,{isVisible:!e(l)},{default:y(()=>[i("div",Ta,[v(R,{class:te(["shadow-2xl",{handle:e(n)}]),sections:[{title:f.$t("staking.stakingIncentives"),id:"staking-incentives",handle:"staking-handle",isDisabled:!e(n)}],reCalcKey:e(g)?0:1},{"staking-handle":y(()=>[i("button",$a,[v(L,{horizontal:"",justify:"between",align:"center"},{default:y(()=>[v(L,{spacing:"sm",align:"center"},{default:y(()=>[i("div",{class:te(["flex items-center p-1 text-white rounded-full",{"bg-green-500":e(n),"bg-gray-400":!e(n)}])},[e(n)?(r(),P(A,{key:0,size:"sm",name:"check"})):(r(),P(A,{key:1,size:"sm",name:"x"}))],2),i("h6",null,k(f.$t("staking.stakingIncentives")),1)]),_:1}),e(n)?(r(),P(L,{key:0,horizontal:"",spacing:"sm",align:"center"},{default:y(()=>[v(A,{name:"chevron-down",class:"text-blue-500"})]),_:1})):M("",!0)]),_:1})])]),"staking-incentives":y(()=>[i("div",Aa,[v(L,{vertical:"",spacing:"sm",class:"p-4 rounded-b-lg border-t dark:border-gray-900"},{default:y(()=>[v(L,{horizontal:"",justify:"between",class:"rounded-b-lg"},{default:y(()=>[i("span",null,k(f.$t("staked"))+" "+k(f.$t("lpTokens")),1),v(L,{horizontal:"",spacing:"sm",align:"center"},{default:y(()=>[v(se,{isVisible:e(a)},{default:y(()=>[v(he,{class:"h-5"})]),_:1},8,["isVisible"]),v(se,{isVisible:!e(a)},{default:y(()=>[i("span",null,k(e(c)(e(p),e(J).fiat)),1)]),_:1},8,["isVisible"]),v(C,{text:f.$t("staking.stakedLpTokensTooltip")},null,8,["text"])]),_:1})]),_:1}),v(L,{horizontal:"",justify:"between"},{default:y(()=>[i("span",null,k(f.$t("unstaked"))+" "+k(f.$t("lpTokens")),1),v(L,{horizontal:"",spacing:"sm",align:"center"},{default:y(()=>[v(se,{isVisible:e(a)},{default:y(()=>[v(he,{class:"h-5"})]),_:1},8,["isVisible"]),v(se,{isVisible:!e(a)},{default:y(()=>[i("span",null,k(e(c)(e(T),e(J).fiat)),1)]),_:1},8,["isVisible"]),v(C,{text:f.$t("staking.unstakedLpTokensTooltip")},null,8,["text"])]),_:1})]),_:1}),v(L,{horizontal:"",spacing:"sm",class:"mt-2"},{default:y(()=>[v(F,{color:"gradient",size:"sm",disabled:e(w),onClick:x},{default:y(()=>[K(k(f.$t("stake")),1)]),_:1},8,["disabled"]),v(F,{outline:"",color:"blue",size:"sm",disabled:e(p)==="0",onClick:b},{default:y(()=>[K(k(f.$t("unstake")),1)]),_:1},8,["disabled"])]),_:1}),e(g)?(r(),P(I,{key:0,title:f.$t("staking.restakeGauge"),class:"mt-2"},{default:y(()=>[K(k(f.$t("staking.restakeGaugeDescription")),1)]),_:1},8,["title"])):M("",!0)]),_:1})])]),_:1},8,["class","sections","reCalcKey"])])]),_:1},8,["isVisible"]),v(se,{isVisible:e(l),unmountInstantly:""},{default:y(()=>[v(he,{class:"h-12"})]),_:1},8,["isVisible"]),v(kt,{isVisible:t.value,pool:s.pool,action:u.value,onClose:h},null,8,["isVisible","pool","action"])])}}});const Sa={key:0},Ba={class:"relative"},Ia={class:"p-4 w-full hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl transition-colors"},Ma={class:"flex items-center p-1 text-white bg-green-500 rounded-full"},Va={class:"overflow-visible relative bg-white dark:bg-gray-850 rounded-b-lg"},Na={key:0},Fa={key:1,class:"text-red-500"},Da=E({__name:"PoolLockingCard",props:{pool:null},setup(s){const o=s,t=X(!1),{fNum:u}=ae(),{balanceFor:c}=ue(),{totalLockedValue:m,lock:n,isLoadingLockInfo:l,lockPool:a,lockPoolToken:d}=Je(),{isWalletReady:g}=oe(),p=_(()=>U(o.pool.totalLiquidity).div(o.pool.totalShares)),T=_(()=>c(o.pool.address)),w=_(()=>p.value.times(T.value).toString()),x=_(()=>{var h;return(h=n.value)!=null&&h.isExpired?n.value.lockedAmount:"0"}),b=_(()=>{var h,f;return U(((h=a.value)==null?void 0:h.totalLiquidity)||"0").div(((f=a.value)==null?void 0:f.totalShares)||"0").times(x.value).toString()});return(h,f)=>{const $=ne,A=$e,L=he,C=Pe,F=xe,I=de,R=bt;return e(g)?(r(),B("div",Sa,[v(se,{isVisible:!e(l)},{default:y(()=>[i("div",Ba,[v(R,{class:te(["shadow-2xl overflow-visible",{"pool-handle":!e(l)}]),sections:[{title:"Locking",id:"locking-module",handle:"locking-handle",isDisabled:e(l)}]},{"locking-handle":y(()=>[i("button",Ia,[v(A,{horizontal:"",justify:"between",align:"center"},{default:y(()=>[v(A,{spacing:"sm",horizontal:""},{default:y(()=>[i("div",Ma,[v($,{size:"sm",name:"check"})]),v(A,{spacing:"sm",align:"center"},{default:y(()=>[i("h6",null,k(h.$t("locking.lockBptForVeBal")),1)]),_:1})]),_:1}),v(A,{horizontal:"",spacing:"sm",align:"center"},{default:y(()=>[v($,{name:"chevron-down",class:"text-blue-500"})]),_:1})]),_:1})])]),"locking-module":y(()=>[i("div",Va,[v(A,{vertical:"",spacing:"sm",class:"py-4 px-4 border-t dark:border-gray-900"},{default:y(()=>[v(A,{horizontal:"",justify:"between"},{default:y(()=>{var W;return[(W=e(n))!=null&&W.isExpired?(r(),B("span",Fa,k(h.$t("locking.expiredLockLpTokens")),1)):(r(),B("span",Na,k(h.$t("locked"))+" "+k(h.$t("lpTokens")),1)),v(A,{horizontal:"",spacing:"sm",align:"center"},{default:y(()=>{var S;return[v(se,{isVisible:!1},{default:y(()=>[v(L,{class:"h-5"})]),_:1}),v(se,{isVisible:!0},{default:y(()=>{var N;return[i("span",{class:te({"text-red-500":(N=e(n))==null?void 0:N.isExpired})},k(e(u)(e(m),e(J).fiat)),3)]}),_:1}),(S=e(n))!=null&&S.isExpired?(r(),P(C,{key:1,text:h.$t("locking.expiredLockTooltip")},{activator:y(()=>[v($,{class:"text-red-500",size:"sm",name:"alert-triangle"})]),_:1},8,["text"])):(r(),P(C,{key:0,text:h.$t("locking.lockedLpTokensTooltip")},null,8,["text"]))]}),_:1})]}),_:1}),v(A,{horizontal:"",justify:"between"},{default:y(()=>[i("span",null,k(h.$t("unlocked"))+" "+k(h.$t("lpTokens")),1),v(A,{horizontal:"",spacing:"sm",align:"center"},{default:y(()=>[v(se,{isVisible:!1},{default:y(()=>[v(L,{class:"h-5"})]),_:1}),v(se,{isVisible:!0},{default:y(()=>[i("span",null,k(e(u)(e(w),e(J).fiat)),1)]),_:1}),v(C,{text:h.$t("locking.unlockedLpTokensTooltip")},null,8,["text"])]),_:1})]),_:1}),v(A,{horizontal:"",spacing:"sm",class:"mt-2"},{default:y(()=>{var W;return[Number(e(T))>0?(r(),P(I,{key:0,href:"/get-vebal?returnRoute=vebal"},{default:y(()=>[v(F,{disabled:Number(e(T))===0,color:"gradient",size:"sm"},{default:y(()=>[K(k(h.$t("lock")),1)]),_:1},8,["disabled"])]),_:1})):(r(),P(F,{key:1,disabled:Number(e(T))===0,color:"gradient",size:"sm"},{default:y(()=>[K(k(h.$t("lock")),1)]),_:1},8,["disabled"])),(W=e(n))!=null&&W.isExpired?(r(),P(F,{key:2,outline:"",color:"red",size:"sm",onClick:f[0]||(f[0]=S=>t.value=!0)},{default:y(()=>[K(k(h.$t("redeem")),1)]),_:1})):M("",!0)]}),_:1})]),_:1})])]),_:1},8,["class","sections"])])]),_:1},8,["isVisible"]),v(se,{isVisible:e(l),unmountInstantly:""},{default:y(()=>[v(L,{class:"h-12"})]),_:1},8,["isVisible"]),(r(),P(qt,{to:"#modal"},[t.value&&e(n)&&e(a)&&e(d)?(r(),P(yo,{key:0,lockablePool:e(a),lockablePoolTokenInfo:e(d),veBalLockInfo:e(n),totalLpTokens:e(x),fiatTotalLpTokens:e(b),onClose:f[1]||(f[1]=W=>t.value=!1)},null,8,["lockablePool","lockablePoolTokenInfo","veBalLockInfo","totalLpTokens","fiatTotalLpTokens"])):M("",!0)]))])):M("",!0)}}});const Oa="/assets/apy-vision-a5b6d522.svg";function Ra(s){return s.map(o=>o.symbol).join("-")}function Ea(){return{apyVisionNetworkName:_(()=>zt.value?"eth":jt.value?"matic":Ht.value?"arbitrum":"eth"),poolPathSymbolSegment:Ra}}const qa={class:"group flex items-center mt-6 w-fit h-fit"},za=i("img",{width:"32",height:"32",class:"mr-2 rounded-full group-hover:shadow-lg transition",src:Oa,alt:""},null,-1),ja=E({__name:"ApyVisionPoolLink",props:{poolId:null,tokens:null},setup(s){const{poolPathSymbolSegment:o,apyVisionNetworkName:t}=Ea();return(u,c)=>{const m=ne,n=de;return r(),B("div",qa,[v(n,{href:"https://app.apy.vision/pools/balancerv2_"+e(t)+"-"+e(o)(s.tokens)+"-"+e(ze)(s.poolId),external:"",noStyle:"",class:"flex items-center font-medium link link-black"},{default:y(()=>[za,K(" "+k(u.$t("apyvisionPoolInsights"))+" ",1),v(m,{name:"arrow-up-right",size:"sm",class:"ml-0.5 text-gray-500 group-hover:text-blue-500 hover:text-blue-400 transition-colors"})]),_:1},8,["href"])])}}}),Ha=E({name:"GauntletIcon"}),Ua={width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg"},Ya=Ut('<g fill="none" fill-rule="evenodd"><circle fill="#192533" cx="10" cy="10" r="10"></circle><g fill-rule="nonzero"><path d="M11.608 12.19v-2.095H9.453V8h4.31v4.19h-2.155zm2.155-6.285H7.298v6.285H5.143V3.81h8.62v2.095z" fill="#87ABC5"></path><path fill="#87ABC5" d="M13.763 13.029v1.257H7.298V12.19h4.31v-.942h2.155z"></path><path fill="#FFF" d="M15.918 5.905V8h-2.155V5.905z"></path><path fill="#1D252E" d="M7.298 12.19v2.096H5.143V12.19z"></path><path fill="#F07F53" d="M7.298 14.286v2.095H5.143v-2.095z"></path></g></g>',1),Wa=[Ya];function Qa(s,o,t,u,c,m){return r(),B("svg",Ua,Wa)}const Ga=re(Ha,[["render",Qa]]),Ka={class:"flex flex-col"},Ja={class:"flex flex-wrap items-center -mt-2"},Za={key:0},Xa={class:"pool-title"},en={class:"text-sm"},tn={key:1,class:"pool-title"},on={class:"flex items-center"},sn={class:"ml-2"},an={key:0,class:"mt-px ml-1 text-xs font-medium text-gray-400"},nn={class:"flex items-center mt-2"},ln=["innerHTML"],rn=["innerHTML"],cn=["innerHTML"],un=E({__name:"PoolPageHeader",props:{loadingApr:{type:Boolean,default:!0},noInitLiquidity:{type:Boolean,default:!1},isStableLikePool:{type:Boolean},pool:null,poolApr:{default:void 0},titleTokens:null,missingPrices:{type:Boolean},isLiquidityBootstrappingPool:{type:Boolean},isComposableStableLikePool:{type:Boolean}},setup(s){const o=s,t=_(()=>ye(o,"pool").value.id),{isAffected:u,warnings:c}=bo(t),{hasNonApprovedRateProviders:m}=be(ye(o,"pool")),{fNum:n}=ae(),{t:l}=pe(),{explorerLinks:a}=oe(),{balancerTokenListTokens:d,getToken:g}=ue(),{hasNonPrefGaugeBalance:p}=Me(),T=X(!1),w=_(()=>{var I;return((I=o.pool)==null?void 0:I.owner)==j.ZeroAddress}),x=_(()=>{var I;return((I=o.pool)==null?void 0:I.owner)==j.DelegateOwner}),b=_(()=>x.value&&j.DynamicFees.Gauntlet.includes(o.pool.id)),h=_(()=>b.value?l("feesManagedByGauntlet"):x.value?l("delegateFeesTooltip"):w.value?l("fixedFeesTooltip"):l("ownerFeesTooltip")),f=_(()=>{var R;if(!o.pool||!((R=o.pool)!=null&&R.swapFee))return"";const I=`${n(o.pool.swapFee,{style:"percent",maximumFractionDigits:4})}`;return w.value?l("fixedSwapFeeLabel",[I]):x.value?b.value?l("dynamicSwapFeeLabel",[I]):l("communitySwapFeeLabel",[I]):l("dynamicSwapFeeLabel",[I])}),$=_(()=>{const I=Object.keys(d.value);return!o.isLiquidityBootstrappingPool&&!o.isComposableStableLikePool&&o.pool.tokensList.some(R=>!Qe(I,R))}),A=_(()=>{var R;if(!((R=o.pool)!=null&&R.factory))return"";const I=j.Factories[o.pool.factory];return l(I||"unknownPoolType")}),L=_(()=>{var I;return j.Metadata[(I=o.pool)==null?void 0:I.id]}),C=_(()=>!!L.value);function F(I){var W;const R=o.titleTokens[I];return((W=g(R.address))==null?void 0:W.symbol)||R.symbol||"---"}return(I,R)=>{var q,Z;const W=Ae,S=ne,N=de,D=Pe,O=Ve,H=xe,Q=$e;return r(),B(Y,null,[i("div",Ka,[i("div",Ja,[e(C)?(r(),B("div",Za,[i("h3",Xa,k(e(L).name),1),i("h5",en,k(e(A)),1)])):(r(),B("h3",tn,k(e(A)),1))]),i("div",on,[(r(!0),B(Y,null,fe(s.titleTokens,({address:z,weight:ee},V)=>(r(),B("div",{key:V,class:"flex items-center px-2 mt-2 mr-2 h-10 bg-gray-50 dark:bg-gray-850 rounded-lg"},[v(W,{address:z},null,8,["address"]),i("span",sn,k(F(V)),1),!s.isStableLikePool&&ee&&ee!=="0"?(r(),B("span",an,k(e(n)(ee||"0",{style:"percent",maximumFractionDigits:0})),1)):M("",!0)]))),128)),(q=s.pool)!=null&&q.isNew?(r(),P(po,{key:0,class:"mt-2 mr-2"})):M("",!0),s.loadingApr?M("",!0):(r(),P(yt,{key:1,pool:s.pool,poolApr:s.poolApr,class:"mt-1 -ml-1"},null,8,["pool","poolApr"])),v(N,{href:e(a).addressLink(((Z=s.pool)==null?void 0:Z.address)||""),external:"",noStyle:"",class:"flex items-center"},{default:y(()=>[v(S,{name:"arrow-up-right",size:"sm",class:"mt-2 ml-2 text-gray-500 hover:text-blue-500 transition-colors"})]),_:1},8,["href"])]),i("div",nn,[i("div",{class:"mr-1 text-sm text-secondary",innerHTML:e(f)},null,8,ln),v(D,null,{activator:y(()=>[e(b)?(r(),P(N,{key:0,href:e(Yt).Gauntlet.Home,external:""},{default:y(()=>[v(Ga)]),_:1},8,["href"])):(r(),P(S,{key:1,name:"info",size:"xs",class:"text-gray-400 dark:text-gray-500"}))]),default:y(()=>[i("span",null,k(e(h)),1)]),_:1})])]),e(m)?(r(),P(O,{key:0,type:"warning",title:I.$t("hasNonApprovedRateProviders"),class:"mt-2",block:""},null,8,["title"])):M("",!0),s.missingPrices?(r(),P(O,{key:1,type:"warning",title:I.$t("noPriceInfo"),class:"mt-2",block:""},null,8,["title"])):M("",!0),e($)?(r(),P(O,{key:2,type:"error",title:I.$t("highRiskPool"),class:"mt-2",block:""},null,8,["title"])):M("",!0),e(p)&&!e(u)?(r(),P(O,{key:3,title:I.$t("staking.restakeGauge"),type:"warning",class:"mt-2"},{default:y(()=>[v(Q,{spacing:"sm"},{default:y(()=>[i("span",null,k(I.$t("staking.restakeGaugeDescription")),1),i("div",null,[v(H,{color:"gradient",class:"p-2",size:"sm",onClick:R[0]||(R[0]=z=>T.value=!0)},{default:y(()=>[K(k(I.$t("restake")),1)]),_:1})])]),_:1})]),_:1},8,["title"])):M("",!0),e(u)?(r(!0),B(Y,{key:4},fe(e(c),(z,ee)=>(r(),P(O,{key:`warning-${ee}`,type:"error",class:"mt-2",block:""},{title:y(()=>[i("div",{innerHTML:z.title},null,8,rn)]),description:y(()=>[i("div",{innerHTML:z.description},null,8,cn)]),_:2},1024))),128)):M("",!0),s.noInitLiquidity?(r(),P(O,{key:5,type:"warning",title:I.$t("noInitLiquidity"),description:I.$t("noInitLiquidityDetail"),class:"mt-2",block:""},null,8,["title","description"])):M("",!0),s.pool?(r(),P(kt,{key:6,isVisible:T.value,pool:s.pool,action:"restake",onClose:R[1]||(R[1]=z=>T.value=!1),onSuccess:R[2]||(R[2]=z=>T.value=!1)},null,8,["isVisible","pool"])):M("",!0)],64)}}});const dn=re(un,[["__scopeId","data-v-a89e7fbb"]]);function pn(s,o={}){const t=Ge.findPool(s),u=Ne(s),{networkId:c}=ce(),m=_(()=>u.data.value),n=_(()=>{var g;return!!((g=m.value)!=null&&g.id)||!!t}),l=ke.Pools.APR(c,s),a=async()=>{let g;if(t)g=t;else if(m.value)g={...m.value,tokens:[...m.value.tokens]};else throw new Error("No pool");return g!=null&&g.apr?g.apr:(g.chainId=c.value,await Wt().pools.apr(g))},d=ie({enabled:n,...o});return Ke(l,a,d)}function mn(s,o,t={}){const u=Ge.findPool(s),{networkId:c}=ce(),m=Ne(s),n=_(()=>m.data.value),l=_(()=>{var p;return!!((p=n.value)!=null&&p.id)||!!u}),a=ke.Pools.Snapshot(c,s),d=async()=>{var T;if(!n.value&&!u)throw new Error("No pool");const p=(u==null?void 0:u.createTime)||((T=n.value)==null?void 0:T.createTime)||0;return await Te.poolSnapshots.get({where:{pool:s.toLowerCase(),timestamp_gt:p}})},g=ie({enabled:l,...t});return Ke(a,d,g)}class fn{constructor(o,t=Qt){le(this,"client");le(this,"fiatParam");le(this,"appNetwork");le(this,"platformId");le(this,"nativeAssetId");le(this,"nativeAssetAddress");le(this,"appAddresses");this.configService=t,this.client=o.client,this.fiatParam=o.supportedFiat,this.appNetwork=this.configService.network.key,this.platformId=_n(this.appNetwork),this.nativeAssetId=hn(this.appNetwork),this.nativeAssetAddress=this.configService.network.nativeAsset.address,this.appAddresses=this.configService.network.addresses}async getNativeAssetPrice(){try{return(await this.client.get(`/simple/price?ids=${this.nativeAssetId}&vs_currencies=${this.fiatParam}`))[this.nativeAssetId]}catch(o){throw console.error("Unable to fetch Ether price",o),o}}async getTokens(o,t=100){try{if(o.length/t>10)throw new Error("To many requests for rate limit.");o=o.map(ze).map(a=>this.addressMapIn(a));const u=Math.ceil(o.length/t),c=Array.from(Array(u).keys()),m=[];c.forEach(a=>{const d=o.slice(t*a,t*(a+1)),g=`/simple/token_price/${this.platformId}?contract_addresses=${d}&vs_currencies=${this.fiatParam}`,p=lt(this.client.get(g),3,2e3);m.push(p)});const n=await Promise.all(m),l=this.parsePaginatedTokens(n);return Qe(o,this.nativeAssetAddress)&&(l[this.nativeAssetAddress]=await this.getNativeAssetPrice()),l}catch(u){throw console.error("Unable to fetch token prices",o,u),u}}async getTokensHistorical(o,t,u=1,c="day"){try{if(o.length/u>10)throw new Error("To many requests for rate limit.");const m=Math.floor(Date.now()/1e3),n=c==="hour"?m:m-m%Ee,l=n-t*Ee;o=o.map(ze).map(p=>this.addressMapIn(p));const a=[];o.forEach(p=>{const T=`/coins/${this.platformId}/contract/${p.toLowerCase()}/market_chart/range?vs_currency=${this.fiatParam}&from=${l}&to=${n}`,w=lt(this.client.get(T),2,2e3);a.push(w)});const d=await Promise.all(a);return this.parseHistoricalPrices(d,o,l,c)}catch(m){throw console.error("Unable to fetch token prices",o,m),m}}parsePaginatedTokens(o){const t=o.reduce((m,n)=>({...m,...n}),{}),c=Object.entries(t).filter(m=>Object.keys(m[1]).length>0).map(m=>[this.addressMapOut(m[0]),m[1]]);return Object.fromEntries(c)}parseHistoricalPrices(o,t,u,c="day"){const m=Object.fromEntries(t.map((l,a)=>{l=this.addressMapOut(l);const d=o[a].prices,g={};if(c==="hour"){const p=me.groupBy(d,T=>Gt(wo(xo(T[0]/1e3))));for(const T of Object.keys(p)){const w=(me.last(p[T])||[])[1]||0;g[Number(T)*1e3]=w}}else if(c==="day")for(const p in d){const[T,w]=d[p];g[T]=w}return[l,g]})),n={};for(const l in m){const a=m[l];for(const d in a){const g=a[d];d in n||(n[d]=[]),n[d].push(g)}}return n}addressMapIn(o){var u;const t=(u=it)==null?void 0:u.PriceChainMap;return t?Le(t[o.toLowerCase()]||o):o}addressMapOut(o){var u;const t=(u=it)==null?void 0:u.PriceChainMap;return t?Le(me.invert(t)[o.toLowerCase()]||o):o}}class vn{constructor(){le(this,"baseUrl");this.baseUrl="https://api.coingecko.com/api/v3"}async get(o){const{data:t}=await Kt.get(this.baseUrl+o);return t}}const gn=new vn,hn=s=>({1:"ethereum",5:"ethereum",42:"ethereum",137:"matic-network",100:"xdai",42161:"ethereum"})[s]||"ethereum",_n=s=>({1:"ethereum",5:"ethereum",42:"ethereum",137:"polygon-pos",100:"xdai",42161:"arbitrum-one"})[s]||"ethereum";class yn{constructor(o=gn,t=fn){le(this,"supportedFiat");le(this,"prices");this.client=o,this.supportedFiat=Jt.join(","),this.prices=new t(this)}}const bn=new yn;function kn(s,o,t={}){const u=Ge.findPool(s),{networkId:c}=ce(),m=Ne(s),n=_(()=>m.data.value),l=_(()=>{var p;return!!((p=n.value)!=null&&p.id)||!!u}),a=ke.Pools.HistoricalPrices(c,s),d=async()=>{var b;if(!n.value&&!u)throw new Error("No pool");const p=(u==null?void 0:u.createTime)||((b=n.value)==null?void 0:b.createTime)||0,T=u?Be(u):n.value?Be(n.value):[],w=o||Zt(new Date,new Date(p*1e3)),x=w<=90?"hour":"day";return await bn.prices.getTokensHistorical(T,w,1,x)},g=ie({enabled:l,...t});return Ke(a,d,g)}const xn={xave:{id:"xave",title:"brandedRedirect.xave.title",description:"brandedRedirect.xave.description",btnText:"brandedRedirect.xave.btnText",link:"https://app.xave.co/"}},wn="/assets/xave-331a94ce.png",Ln={class:"flex flex-col items-center"},Pn=["src","alt"],Tn={class:"px-6 pb-4"},$n={class:"mb-1.5 text-lg font-semibold"},An={class:"mb-3"},Cn=E({__name:"BrandedRedirectCard",props:{poolId:null},setup(s){const o=s,t=_(()=>{var m;const c=(m=j.BrandedRedirect)==null?void 0:m[o.poolId];if(c)return xn[c]});function u(){var m;const c=(m=t.value)==null?void 0:m.link;c&&window.open(c,"_blank")}return(c,m)=>{const n=xe,l=_e,a=$e;return e(t)?(r(),P(a,{key:0,vertical:""},{default:y(()=>[v(l,{shadow:"2xl",noPad:"",class:"rounded-xl",growContent:""},{default:y(()=>[i("div",Ln,[i("img",{class:"mb-4",src:e(wn),alt:e(t).title},null,8,Pn),i("div",Tn,[i("div",$n,k(c.$t(e(t).title)),1),i("div",An,k(c.$t(e(t).description)),1),v(n,{color:"blue",label:c.$t(e(t).btnText),block:"",onClick:u},null,8,["label"])])])]),_:1})]),_:1})):M("",!0)}}}),Sn=s=>(so("data-v-1be539b5"),s=s(),ao(),s),Bn={class:"xl:container lg:px-4 pt-8 xl:mx-auto"},In={class:"grid grid-cols-1 lg:grid-cols-3 gap-x-0 lg:gap-x-4 xl:gap-x-8 gap-y-8"},Mn={class:"col-span-2 px-4 lg:px-0"},Vn=Sn(()=>i("div",{class:"hidden lg:block"},null,-1)),Nn={class:"order-2 lg:order-1 col-span-2"},Fn={class:"grid grid-cols-1 gap-y-8"},Dn={class:"px-4 lg:px-0"},On={class:"px-4 lg:px-0 mb-4"},Rn={class:"mb-4"},En=["textContent"],qn={key:1,class:"order-1 lg:order-2 px-4 lg:px-0"},zn=E({__name:"_id",setup(s){const o=oo(),t=o.params.id.toLowerCase();uo(t);const{t:u}=pe(),{prices:c,priceQueryLoading:m}=ue(),{isWalletReady:n}=oe(),{addAlert:l,removeAlert:a}=ro(),d=Ue(t),g=Ne(t,void 0,void 0),p=_(()=>g.data.value),T=_(()=>g.isLoading.value||Boolean(g.error.value)),w=_(()=>T.value||!p.value),{isStableLikePool:x,isLiquidityBootstrappingPool:b,isComposableStableLikePool:h,isDeprecatedPool:f}=be(g.data),$=mn(t,void 0,{refetchOnWindowFocus:!1}),A=_(()=>$.isLoading.value),L=_(()=>$.data.value),C=kn(t,void 0,{refetchOnWindowFocus:!1}),F=_(()=>C.data.value),I=pn(t),R=_(()=>I.isLoading.value||Boolean(I.error.value)),W=_(()=>I.data.value),S=X(null),N=X(!1);let D;function O(){if(!("IntersectionObserver"in window)||!("IntersectionObserverEntry"in window)||!S.value){N.value=!0;return}const V={rootMargin:"-100px"},ve=ge=>{ge.forEach(Fe=>{Fe.isIntersecting&&(N.value=!0)})};D=new IntersectionObserver(ve,V),D.observe(S.value)}Ye(()=>{O()}),Xt(()=>{D==null||D.disconnect()});const H=_(()=>{var V;return!w.value&&p.value&&Number(((V=p.value)==null?void 0:V.totalShares)||"0")===0}),Q=_(()=>{if(p.value&&c.value&&!m.value){const V=Object.keys(c.value);return!eo(p.value.tokens).every(ge=>Qe(V,ge))}return!1}),q=_(()=>!p.value||!p.value.tokens?[]:to(p.value,p.value.tokens)),Z=_(()=>j.Stakable.AllowList.includes(t)),z=_(()=>p.value?_t(p.value)??null:null),ee=_(()=>{var V;return((V=j.BrandedRedirect)==null?void 0:V[t])||!1});return Se(g.error,()=>{g.error.value?l({id:"pool-fetch-error",label:u("alerts.pool-fetch-error"),type:no.ERROR,persistent:!0,action:g.refetch,actionLabel:u("alerts.retry-label"),priority:lo.MEDIUM}):a("pool-fetch-error")}),Se(()=>p.value,()=>{p.value&&io.setMeta(o,p.value)}),(V,ve)=>{var et,tt;const ge=he,Fe=$e;return r(),B("div",Bn,[i("div",In,[i("div",Mn,[e(w)||!e(p)?(r(),P(ge,{key:0,class:"header-loading-block"})):(r(),P(dn,{key:1,loadingApr:e(R),pool:e(p),poolApr:e(W),isStableLikePool:e(x),noInitLiquidity:e(H),titleTokens:e(q),missingPrices:e(Q),isLiquidityBootstrappingPool:e(b),isComposableStableLikePool:e(h)},null,8,["loadingApr","pool","poolApr","isStableLikePool","noInitLiquidity","titleTokens","missingPrices","isLiquidityBootstrappingPool","isComposableStableLikePool"]))]),Vn,i("div",Nn,[i("div",Fn,[i("div",Dn,[v(e(hs),{historicalPrices:e(F),snapshots:e(L),loading:e(A),totalLiquidity:(et=e(p))==null?void 0:et.totalLiquidity,tokensList:e(p)?e(Be)(e(p)):[],poolType:(tt=e(p))==null?void 0:tt.poolType,poolPremintedBptIndex:e(z)},null,8,["historicalPrices","snapshots","loading","totalLiquidity","tokensList","poolType","poolPremintedBptIndex"])]),i("div",On,[v(e(bs),{pool:e(p),poolApr:e(W),loading:e(w),loadingApr:e(R)},null,8,["pool","poolApr","loading","loadingApr"]),!e(w)&&e(p)?(r(),P(ja,{key:0,poolId:e(p).id,tokens:e(q)},null,8,["poolId","tokens"])):M("",!0)]),i("div",Rn,[i("h4",{class:"px-4 lg:px-0 mb-4",textContent:k(V.$t("poolComposition.title"))},null,8,En),e(w)?(r(),P(ge,{key:0,class:"h-64"})):e(p)?(r(),P(e(Wo),{key:1,pool:e(p)},null,8,["pool"])):M("",!0)]),i("div",{ref_key:"intersectionSentinel",ref:S},null,512),N.value&&e(p)?(r(),B(Y,{key:0},[v(e(va),{pool:e(p),loading:e(w)},null,8,["pool","loading"]),v(e(La),{pool:e(p)},null,8,["pool"])],64)):M("",!0)])]),e(ee)?(r(),P(Cn,{key:0,poolId:e(t),class:"order-1 lg:order-2 px-4 lg:px-0"},null,8,["poolId"])):e(b)?M("",!0):(r(),B("div",qn,[e(p)&&e(n)&&e(f)?(r(),P(e(Pa),{key:0,pool:e(p)},null,8,["pool"])):M("",!0),v(Fe,{vertical:""},{default:y(()=>[e(w)||!e(p)?(r(),P(ge,{key:0,class:"mb-4 h-60 pool-actions-card"})):e(H)?M("",!0):(r(),P(e(Bo),{key:1,pool:e(p),missingPrices:e(Q),class:"mb-4"},null,8,["pool","missingPrices"])),e(w)?(r(),P(ge,{key:2,class:"h-40 pool-actions-card"})):M("",!0),e(Z)&&!e(w)&&e(p)&&e(n)?(r(),P(Ca,{key:3,pool:e(p),class:"staking-incentives"},null,8,["pool"])):M("",!0),e(d)&&!e(w)&&e(p)?(r(),P(Da,{key:4,pool:e(p),class:"pool-locking"},null,8,["pool"])):M("",!0)]),_:1})]))])])}}});const kl=re(zn,[["__scopeId","data-v-1be539b5"]]);export{kl as default};
//# sourceMappingURL=_id-74657669.js.map
