import{d as b,o as x,ag as v,af as y,u as C,y as h,c as s,s as T,t as B,v as e,aP as F,a7 as L}from"./index-4a1c513c.js";const w=b({__name:"TxActionBtn",props:{actionFn:null,action:null,summary:null,confirmingLabel:null,onConfirmFn:null,disabled:{type:Boolean,default:!1}},emits:["init","confirming","confirmed","failed"],setup(c,{emit:i}){const n=c,{t:r}=x(),{addTransaction:u}=v(),{txListener:d}=y(),{isMismatchedNetwork:f}=C(),a=h(0),t=s(()=>a.value===1),m=s(()=>a.value===2),p=s(()=>t.value?r("confirm"):n.confirmingLabel);async function g(){try{a.value=1,i("init");const o=await n.actionFn();a.value=2,i("confirming",o),u({id:o.hash,type:"tx",action:n.action,summary:n.summary}),await d(o,{onTxConfirmed:async l=>{n.onConfirmFn&&n.onConfirmFn(),a.value=3,i("confirmed",l)},onTxFailed:()=>{console.error("Tx failed"),a.value=0,i("failed")}})}catch(o){a.value=0,console.error(o)}}return(o,l)=>{const _=L;return T(),B(_,{loadingLabel:e(p),loading:e(t)||e(m),disabled:n.disabled||e(f),onClick:F(g,["stop"])},null,8,["loadingLabel","loading","disabled","onClick"])}}});export{w as _};
//# sourceMappingURL=TxActionBtn.vue_vue_type_script_setup_true_lang-2a66723f.js.map
