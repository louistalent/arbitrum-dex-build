import{ak as xe,s as o,G as k,D as N,aT as Le,d as D,u as j,t as g,B as p,a1 as E,H as v,v as e,aZ as ne,a7 as Y,cY as le,aH as Be,aE as $e,c as u,P as W,aN as Te,aP as q,j as Z,p as ie,o as X,x as Ne,z as Ve,b3 as se,f7 as Ae,b4 as Me,aO as ee,C,U as M,I as Ue,J as De,f8 as Re,a0 as K,b5 as ae,ah as re,f9 as Ee,aQ as Ie,b2 as Oe,E as Fe,a6 as He,_ as We,K as ce,c0 as ue,fa as de,ck as me,e as ke,y as O,n as qe,c4 as fe,c5 as he,b as je,c2 as Qe,aG as ze,Z as Ge,a as _e,i as J,bc as Q,aV as Ke,F as G}from"./index-4a1c513c.js";import{_ as Je}from"./BalTable.vue_vue_type_style_index_0_lang-bfff8f7a.js";import{_ as pe}from"./BalLoadingBlock.vue_vue_type_style_index_0_lang-3fa460ee.js";import{_ as Ye,a as Ze,u as z}from"./useLock-d1f81127.js";import{_ as Xe}from"./BalAssetSet-1d81bc3d.js";import{f as et,P as tt}from"./constants-f98f285a.js";import{_ as ot}from"./APRTooltip.vue_vue_type_script_setup_true_lang-0e752bc5.js";import{_ as st}from"./TokenPills.vue_vue_type_script_setup_true_lang-32c53459.js";import{_ as at}from"./PoolWarningTooltip.vue_vue_type_script_setup_true_lang-c104e09b.js";import{i as U}from"./useQueryHelpers-8cb4e6d7.js";import{_ as ge}from"./StakePreviewModal.vue_vue_type_script_setup_true_lang-225d7685.js";import{p as ye}from"./pool-staking.provider-fee39c11.js";import"./usePoolQuery-b97c571a.js";import"./BalAsset-fe687731.js";import"./usePoolWarning-b134504b.js";import"./BalActionSteps.vue_vue_type_script_setup_true_lang-78b4efb6.js";import"./useTransactionErrors-09c4ac25.js";import"./tslib.es6-b45817b3.js";import"./BalCircle-e6fd1d55.js";import"./ConfirmationIndicator.vue_vue_type_script_setup_true_lang-5746d56d.js";import"./useTokenApprovalActions-8e0c610b.js";import"./BalDataListRow.vue_vue_type_script_setup_true_lang-03b32597.js";const nt={},lt={class:"app-hero"},it={class:"mx-auto w-full max-w-lg"};function rt(s,i){return o(),k("div",lt,[N("div",it,[Le(s.$slots,"default")])])}const ct=xe(nt,[["render",rt]]),ut=D({__name:"HeroConnectWalletButton",setup(s){const{startConnectWithInjectedProvider:i}=j(),{trackGoal:n,Goals:d}=le(),{darkMode:f}=ne();function l(){i(),n(d.ClickHeroConnectWallet)}return(_,c)=>{const m=Y;return o(),g(m,{color:e(f)?"blue":"white",onClick:l},{default:p(()=>[E(v(_.$t("connectWallet")),1)]),_:1},8,["color"])}}}),dt={class:"flex justify-center py-4 px-2"},mt={key:4},kt=D({__name:"PoolsTableActionsCell",props:{pool:null,poolsType:{default:"unstaked"}},emits:["click:stake","click:unstake","click:migrate"],setup(s,{emit:i}){const n=s,{isMigratablePool:d}=Be($e(n,"pool")),{networkSlug:f}=Z(),l=u(()=>W.Stakable.AllowList),_=u(()=>Te(n.pool.id));return(c,m)=>{const h=Y;return o(),k("div",dt,[e(d)(s.pool)?(o(),g(h,{key:0,color:"gradient",size:"sm",onClick:m[0]||(m[0]=q(b=>i("click:migrate",s.pool),["prevent","stop"]))},{default:p(()=>[E(v(c.$t("migrate")),1)]),_:1})):s.poolsType==="unstaked"&&e(l).includes(s.pool.id)?(o(),g(h,{key:1,color:"gradient",size:"sm",disabled:e(d)(s.pool),onClick:m[1]||(m[1]=q(b=>i("click:stake",s.pool),["prevent","stop"]))},{default:p(()=>[E(v(c.$t("stake")),1)]),_:1},8,["disabled"])):s.poolsType==="staked"?(o(),g(h,{key:2,color:"gradient",size:"sm",onClick:m[2]||(m[2]=q(b=>i("click:unstake",s.pool),["prevent","stop"]))},{default:p(()=>[E(v(c.$t("unstake")),1)]),_:1})):e(_)?(o(),g(h,{key:3,tag:"router-link",to:{name:"get-vebal",query:{networkSlug:e(f),returnRoute:c.$route.name}},color:"gradient-pink-yellow",size:"sm"},{default:p(()=>[E(v(c.$t("transactionAction.createLock")),1)]),_:1},8,["to"])):(o(),k("div",mt,"-"))])}}}),ft="/assets/tokens_white-9acdda88.svg",ht="/assets/tokens_black-8b6f2d43.svg",_t={class:"flex items-center"},pt=["src"],gt=["src"],yt={key:0,class:"py-4 px-6"},vt={key:0,class:"flex items-center py-4 px-6"},bt={key:0,class:"text-left"},Pt={key:1},Ct={key:1,class:"text-right"},St={class:"flex justify-center py-4 px-2"},wt={class:"py-4 px-6 text-right"},te=D({__name:"PoolsTable",props:{data:{default:()=>[]},poolsType:{default:"unstaked"},isLoading:{type:Boolean},isLoadingMore:{type:Boolean,default:!1},showPoolShares:{type:Boolean,default:!1},noPoolsLabel:{default:"No pools"},isPaginated:{type:Boolean,default:!1},sortColumn:{default:"totalLiquidity"},selectedTokens:{default:()=>[]},hiddenColumns:{default:()=>[]},showBoost:{type:Boolean,default:!1},showActions:{type:Boolean,default:!1},columnStates:{default:()=>({})},skeletonClass:{default:"h-64"},shares:null,boosts:null},emits:["loadMore","triggerStake","triggerUnstake","onColumnSort"],setup(s,{emit:i}){const n=s,{fNum:d}=ie(),f=ce(),{t:l}=X(),{trackGoal:_,Goals:c}=le(),{darkMode:m}=ne(),{upToLargeBreakpoint:h,upToSmallBreakpoint:b}=Ne(),{networkSlug:x}=Z(),B=u(()=>b.value?250:350),S=u(()=>[{name:"Icons",id:"icons",accessor:"uri",Header:"iconColumnHeader",Cell:"iconColumnCell",width:125,noGrow:!0},{name:l("composition"),id:"poolName",accessor:"id",Cell:"poolNameCell",width:n.hiddenColumns.length>=2?B.value:350},{name:l("myBoost"),accessor:t=>`${Ve(w(t)).toFixed(3)}x`,align:"right",id:"myBoost",hidden:!n.showBoost,sortKey:t=>Number(w(t)),width:150,cellClassName:"font-numeric"},{name:l("myBalance"),accessor:t=>d(L(t),{style:"currency",maximumFractionDigits:0,fixedFormat:!0}),align:"right",id:"myBalance",hidden:!n.showPoolShares,sortKey:t=>Number(L(t)),width:160,cellClassName:"font-numeric"},{name:l("poolValue"),accessor:t=>d(t.totalLiquidity||0,{style:"currency",maximumFractionDigits:0}),align:"right",id:"totalLiquidity",sortKey:t=>{const r=Number(t.totalLiquidity);return r===1/0||isNaN(r)?0:r},width:150,cellClassName:"font-numeric"},{name:l("volume24h",[l("hourAbbrev")]),accessor:t=>(t==null?void 0:t.volumeSnapshot)||"0",align:"right",id:"volume",Cell:"volumeCell",sortKey:t=>{const r=Number(t==null?void 0:t.volumeSnapshot);return r===1/0||isNaN(r)||r>se?0:r},width:175,cellClassName:"font-numeric"},{name:n.showPoolShares?l("myApr"):l("apr"),Cell:"aprCell",accessor:t=>{var r;return((r=t==null?void 0:t.apr)==null?void 0:r.min.toString())||"0"},align:"right",id:"apr",sortKey:t=>{var T;let r=0;return t!=null&&t.apr&&(r=Number(Ae(t.apr,t.boost))),isFinite(r)&&(((T=t.apr)==null?void 0:T.swapFees)||0)<Me?r:0},width:220},{name:l("expiryDate"),Cell:"lockEndDateCell",accessor:"lockedEndDate",align:"right",id:"lockEndDate",width:150},{name:l("migrate"),Cell:"migrateCell",accessor:"migrate",align:"center",id:"migrate",width:150},{name:l("actions"),Cell:"actionsCell",accessor:"actions",align:"center",id:"actions",hidden:!n.showActions,width:150}]),$=u(()=>S.value.filter(t=>!n.hiddenColumns.includes(t.id)));function y(t,r){_(c.ClickPoolsTableRow);const T=f.resolve({name:"pool",params:{id:t.id,networkSlug:x}});r?window.open(T.href):f.push(T)}function P(t){f.push({name:"migrate-pool",params:{from:t.id,to:Ie[t.id].toPoolId},query:{returnRoute:"home"}})}function L(t){var T;const r=((T=n==null?void 0:n.shares)==null?void 0:T[t.id])||"0";return ee(t,r)}function w(t){var r;return((r=n==null?void 0:n.boosts)==null?void 0:r[t.id])||"1"}function V(t){const r=t==null?void 0:t.apr;return r?Oe(r,t.boost):"0"}function R(t){return t?et(t,tt):"â€”"}function A(t){var r;return(r=W.Metadata[t.id])!=null&&r.hasIcon?[t.address]:Fe(t)}return(t,r)=>{const T=Xe,F=Ze,H=pe,Pe=He,Ce=Y,Se=Je,we=We;return o(),g(we,{shadow:"lg",square:e(h),noBorder:e(h),noPad:""},{default:p(()=>[C(Se,{columns:e($),data:s.data,noResultsLabel:s.noPoolsLabel,isLoading:s.isLoading,isLoadingMore:s.isLoadingMore,skeletonClass:s.skeletonClass,sticky:"both",square:e(h),onRowClick:y,isPaginated:s.isPaginated,isOnlyDescSort:"",initialState:{sortColumn:s.sortColumn,sortDirection:"desc"},onOnColumnSort:r[0]||(r[0]=a=>i("onColumnSort",a)),onLoadMore:r[1]||(r[1]=a=>i("loadMore"))},{iconColumnHeader:p(()=>[N("div",_t,[e(m)?(o(),k("img",{key:0,src:e(ft),alt:"token"},null,8,pt)):(o(),k("img",{key:1,src:e(ht),alt:"token"},null,8,gt))])]),iconColumnCell:p(a=>[s.isLoading?M("",!0):(o(),k("div",yt,[C(T,{addresses:A(a),width:100},null,8,["addresses"])]))]),poolNameCell:p(a=>[s.isLoading?M("",!0):(o(),k("div",vt,[e(W).Metadata[a.id]?(o(),k("div",bt,v(e(W).Metadata[a.id].name),1)):(o(),k("div",Pt,[C(st,{tokens:e(Ue)(a,a.tokens),isStablePool:e(De)(a.poolType),selectedTokens:s.selectedTokens,pickedTokens:s.selectedTokens},null,8,["tokens","isStablePool","selectedTokens","pickedTokens"])])),e(Re)(a.poolType)?(o(),g(F,{key:2,label:"LBP",color:"amber"})):a!=null&&a.isNew?(o(),g(Ye,{key:3,class:"mt-1"})):M("",!0),C(at,{pool:a},null,8,["pool"])]))]),volumeCell:p(a=>[(o(),k("div",{key:s.columnStates.volume,class:"flex justify-end py-4 px-6 -mt-1 font-numeric"},[a!=null&&a.volumeSnapshot?(o(),k("span",Ct,v(e(d)((a==null?void 0:a.volumeSnapshot)<e(se)?a==null?void 0:a.volumeSnapshot:"-",{style:"currency",maximumFractionDigits:0})),1)):(o(),g(H,{key:0,class:"w-12 h-4"}))]))]),aprCell:p(a=>[(o(),k("div",{key:s.columnStates.aprs,class:re(["flex justify-end py-4 px-6 -mt-1 font-numeric text-right",{"text-gray-300 dark:text-gray-600 line-through":e(ae)(a.poolType)}])},[a!=null&&a.apr?(o(),k(K,{key:1},[E(v(V(a))+" ",1),e(ae)(a.poolType)?(o(),g(Pe,{key:0,width:"36",text:t.$t("lbpAprTooltip"),iconSize:"sm",iconClass:"ml-1"},null,8,["text"])):a!=null&&a.apr?(o(),g(ot,{key:1,pool:a},null,8,["pool"])):M("",!0)],64)):(o(),g(H,{key:0,class:"w-12 h-4"}))],2))]),migrateCell:p(a=>[N("div",St,[e(Ee)(a)?(o(),g(Ce,{key:0,color:"gradient",size:"sm",onClick:q(I=>P(a),["prevent"])},{default:p(()=>[E(v(t.$t("migrate")),1)]),_:2},1032,["onClick"])):M("",!0)])]),lockEndDateCell:p(a=>[N("div",wt,v(R(a.lockedEndDate)),1)]),actionsCell:p(a=>[C(kt,{pool:a,poolsType:s.poolsType,"onClick:stake":I=>i("triggerStake",I),"onClick:unstake":I=>i("triggerUnstake",I),"onClick:migrate":I=>P(I)},null,8,["pool","poolsType","onClick:stake","onClick:unstake","onClick:migrate"])]),_:1},8,["columns","data","noResultsLabel","isLoading","isLoadingMore","skeletonClass","square","isPaginated","initialState"])]),_:1},8,["square","noBorder"])}}}),xt=()=>{const{userGaugeSharesQuery:s,userBoostsQuery:i,stakedSharesQuery:n}=de(),{data:d}=s,{data:f}=i,{data:l}=n,_=u(()=>d.value?d.value.map(y=>y.gauge.poolId):[]),c=u(()=>_.value.length>0),m=me(O([]),ke({enabled:c}),{poolIds:_,pageSize:999}),{data:h,refetch:b}=m,x=u(()=>{var y;return((y=h.value)==null?void 0:y.pages[0].pools)||[]}),B=u(()=>Object.keys(l.value||{}).reduce((y,P)=>{var V;const L=x.value.find(R=>R.id===P);if(!L)return y;const w=((V=l==null?void 0:l.value)==null?void 0:V[P])||"0";return y+Number(ee(L,w))},0).toString()),S=u(()=>qe.value?U(m):U(s)||U(n)||U(i)||U(m));function $(y){var P;return((P=l==null?void 0:l.value)==null?void 0:P[y])||"0"}return{stakedPools:x,stakedShares:l,poolBoostsMap:f,totalStakedValue:B,isLoading:S,refetchStakedPools:b,stakedSharesFor:$}},ve=Symbol(fe.Providers.UserStaking);function Lt(){const s=xt();return he(ve,s),s}function Bt(){return ue(ve)}const $t=s=>{const{stakedPools:i,totalStakedValue:n,refetchStakedPools:d,isLoading:f}=s,{userPoolSharesQuery:l,lockQuery:_}=de(),{data:c,refetch:m}=l,{totalLockedValue:h}=z(),{injectTokens:b}=je(),x=u(()=>Object.keys(c.value||{})),B=u(()=>x.value.length>0),S=me(O([]),ke({enabled:B}),{poolIds:x,pageSize:999}),{data:$}=S,y=u(()=>{var A;return((A=$.value)==null?void 0:A.pages[0].pools)||[]}),P=u(()=>[...y.value,...i.value]),L=u(()=>Object.keys(c.value||{}).reduce((A,t)=>{var F;const r=P.value.find(H=>H.id===t);if(!r)return A;const T=((F=c==null?void 0:c.value)==null?void 0:F[t])||"0";return A+Number(ee(r,T))},0).toString()),w=u(()=>Qe([L.value,n.value,h.value]).toString()),V=u(()=>f.value||U(l)||U(S)||ze.value&&U(_));async function R(){await Promise.all([m(),d()])}return Ge(P,A=>{b(A.map(t=>t.address))}),{stakedPools:i,unstakedPools:y,userPoolShares:c,totalFiatValue:w,isLoading:V,refetchAllUserPools:R}},be=Symbol(fe.Providers.UserPools);function Tt(s){he(be,$t(s))}function oe(){return ue(be)}const Nt={class:"px-4 xl:px-0"},Vt=D({__name:"StakedPoolsTable",setup(s){const i=O(!1),n=O();ye();const{stakedPools:d,poolBoostsMap:f,stakedShares:l,isLoading:_}=Bt(),{refetchAllUserPools:c}=oe(),{isWalletReady:m,isWalletConnecting:h}=j(),{t:b}=X(),x=_e.network.shortName,B=u(()=>m.value||h.value?b("noStakedInvestments",[x]):b("connectYourWallet")),S=u(()=>{const w=["poolVolume","migrate","lockEndDate"];return J.value&&w.push("myBoost"),w}),$=u(()=>JSON.stringify(d.value));function y(w){i.value=!0,n.value=w}function P(){c(),i.value=!1}async function L(){await c()}return(w,V)=>{const R=Q;return o(),k("div",null,[C(R,{vertical:"",spacing:"sm"},{default:p(()=>[N("h5",Nt,v(w.$t("staking.stakedPools")),1),(o(),g(te,{key:e($),data:e(d),shares:e(l),boosts:e(f),poolsType:"staked",noPoolsLabel:e(B),hiddenColumns:e(S),sortColumn:"myBalance",isLoading:e(m)&&e(_),showPoolShares:"",showActions:"",showBoost:!e(J),onTriggerUnstake:y},null,8,["data","shares","boosts","noPoolsLabel","hiddenColumns","isLoading","showBoost"]))]),_:1}),e(n)?(o(),g(ge,{key:0,pool:e(n),isVisible:e(i),action:"unstake",onClose:P,onSuccess:L},null,8,["pool","isVisible"])):M("",!0)])}}}),At={class:"px-4 xl:px-0"},Mt=D({__name:"UnstakedPoolsTable",setup(s){const i=O(!1),n=O(),d=_e.network.shortName,f=["poolVolume","migrate","lockEndDate"];ye();const{isWalletReady:l,isWalletConnecting:_}=j(),{t:c}=X(),{unstakedPools:m,userPoolShares:h,refetchAllUserPools:b,isLoading:x}=oe(),B=u(()=>l.value||_.value?c("noUnstakedInvestments",[d]):c("connectYourWallet")),S=u(()=>JSON.stringify(m.value));function $(L){i.value=!0,n.value=L}function y(){b(),i.value=!1}async function P(){await b()}return Ke(()=>{b()}),(L,w)=>{const V=Q;return o(),k("div",null,[C(V,{vertical:"",spacing:"sm"},{default:p(()=>[N("h5",At,v(L.$t("staking.unstakedPools")),1),(o(),g(te,{key:e(S),isLoading:e(l)&&e(x),data:e(m),shares:e(h),noPoolsLabel:e(B),sortColumn:"myBalance",hiddenColumns:f,showPoolShares:"",showActions:"",onTriggerStake:$},null,8,["isLoading","data","shares","noPoolsLabel"]))]),_:1}),e(n)?(o(),g(ge,{key:0,pool:e(n),isVisible:e(i),action:"stake",onClose:y,onSuccess:P},null,8,["pool","isVisible"])):M("",!0)])}}}),Ut={class:"px-4 xl:px-0"},Dt=D({__name:"VeBalPoolTable",props:{lockPool:null,lock:null},setup(s){const i=s,{totalLockedShares:n}=z(),d=u(()=>{var c,m,h;return i.lockPool?[{...i.lockPool,lockedEndDate:(c=i.lock)!=null&&c.hasExistingLock&&!((m=i.lock)!=null&&m.isExpired)?(h=i.lock)==null?void 0:h.lockedEndDate:void 0}]:[]}),f=u(()=>({[i.lockPool.id]:n.value})),l=u(()=>JSON.stringify(d.value)),_=["poolVolume","migrate","actions","myBoost"];return(c,m)=>{const h=Q;return o(),k("div",null,[C(h,{vertical:"",spacing:"sm"},{default:p(()=>[N("h5",Ut,v(c.$t("veBalProtocolLiquidity")),1),(o(),g(te,{key:e(l),data:e(d),shares:e(f),hiddenColumns:_,sortColumn:"myBalance",showPoolShares:""},null,8,["data","shares"]))]),_:1})])}}}),Rt=["textContent"],Et={key:1,class:"mb-1 text-3xl font-semibold text-white"},It={key:2,class:"inline-block relative mt-2"},Ot={key:0},Ft={key:1},Ht={class:"text-3xl font-semibold text-white"},Wt=D({__name:"PortfolioPageHero",setup(s){const i=ce(),{fNum:n}=ie(),{isWalletReady:d,isWalletConnecting:f}=j(),{totalFiatValue:l,isLoading:_}=oe(),{totalLockedValue:c}=z(),{networkSlug:m}=Z(),h=u(()=>({["h-48"]:!d.value&&!f.value,["h-44"]:d.value||f.value})),b=u(()=>n(l.value,G.fiat)),x=u(()=>n(c.value,G.fiat)),B=u(()=>_.value);return(S,$)=>{const y=pe;return o(),g(ct,{class:re(e(h))},{default:p(()=>[N("h1",{class:"mb-2 font-body text-base font-medium text-white opacity-90",textContent:v(S.$t("myBalancerBalance"))},null,8,Rt),e(d)||e(f)?(o(),k(K,{key:0},[e(B)?(o(),g(y,{key:0,class:"mx-auto w-40 h-10",white:""})):(o(),k("div",Et,v(e(b)),1)),e(J)?M("",!0):(o(),k("div",It,[e(B)?(o(),g(y,{key:0,class:"mx-auto w-40 h-8",white:""})):(o(),k("div",{key:1,class:"group flex items-center px-3 h-8 text-sm font-medium text-yellow-500 hover:text-white focus:text-white rounded-tr rounded-bl border border-yellow-500 transition-colors cursor-pointer vebal-banner",onClick:$[0]||($[0]=P=>e(i).push({name:"vebal",params:{networkSlug:e(m)}}))},[e(c)==="0"?(o(),k("span",Ot,v(e(c))+" "+v(S.$t("veBAL.hero.tokens.veBAL")),1)):(o(),k("span",Ft,v(S.$t("inclXInVeBal",[e(x)])),1))]))]))],64)):(o(),k(K,{key:1},[N("div",Ht,v(e(n)("0",e(G).fiat)),1),C(ut,{class:"mt-4"})],64))]),_:1},8,["class"])}}});const qt={class:"xl:container xl:px-4 pt-10 md:pt-12 xl:mx-auto"},jt={class:"px-4 xl:px-0"},ho=D({__name:"portfolio",setup(s){const i=Lt();Tt(i);const{lockPool:n,lock:d}=z();return(f,l)=>{const _=Q;return o(),k("div",null,[C(Wt),N("div",qt,[C(_,{vertical:""},{default:p(()=>[N("div",jt,[C(_,{horizontal:"",justify:"between",align:"center"},{default:p(()=>[N("h3",null,v(f.$t("myLiquidityInBalancerPools")),1)]),_:1})]),C(_,{vertical:"",spacing:"2xl"},{default:p(()=>{var c;return[C(Mt),C(Vt),e(n)&&Number((c=e(d))==null?void 0:c.lockedAmount)>0?(o(),g(Dt,{key:0,lock:e(d),lockPool:e(n)},null,8,["lock","lockPool"])):M("",!0)]}),_:1})]),_:1})])])}}});export{ho as default};
//# sourceMappingURL=portfolio-4879a482.js.map
