{"version":3,"file":"faucet-e1319b71.js","sources":["../../src/services/balancer/contracts/contracts/faucet.ts","../../src/components/btns/DripBtn/DripBtn.vue","../../src/components/tables/FaucetTable/FaucetTable.vue"],"sourcesContent":["import FaucetAbi from '@/lib/abi/Faucet.json';\r\nimport { configService } from '@/services/config/config.service';\r\nimport { walletService as walletServiceInstance } from '@/services/web3/wallet.service';\r\n\r\nexport class Faucet {\r\n  constructor(\r\n    private readonly abi = FaucetAbi,\r\n    private readonly config = configService,\r\n    private readonly walletService = walletServiceInstance,\r\n    public readonly address = config.network.addresses.faucet\r\n  ) {\r\n    if (!this.address) console.error('Faucet address not set');\r\n  }\r\n\r\n  /**\r\n   * @summary Drip token from faucet\r\n   */\r\n  async drip(tokenAddress: string) {\r\n    return await this.walletService.txBuilder.contract.sendTransaction({\r\n      contractAddress: this.address,\r\n      abi: this.abi,\r\n      action: 'drip',\r\n      params: [tokenAddress],\r\n    });\r\n  }\r\n}\r\n\r\nexport const faucet = new Faucet();\r\n","<script lang=\"ts\" setup>\r\nimport { faucet } from '@/services/balancer/contracts/contracts/faucet';\r\n\r\nimport TxActionBtn from '../TxActionBtn/TxActionBtn.vue';\r\n\r\n/**\r\n * TYPES\r\n */\r\ntype Props = {\r\n  token: string;\r\n};\r\n\r\n/**\r\n * PROPS & EMITS\r\n */\r\nconst props = defineProps<Props>();\r\n\r\n/**\r\n * STATE\r\n */\r\nconst tokenAddress = computed((): string => props.token);\r\n\r\n/**\r\n * METHODS\r\n */\r\nasync function dripTx() {\r\n  return await faucet.drip(tokenAddress.value);\r\n}\r\n</script>\r\n\r\n<template>\r\n  <TxActionBtn\r\n    label=\"Drip\"\r\n    color=\"gradient\"\r\n    size=\"sm\"\r\n    :actionFn=\"dripTx\"\r\n    action=\"drip\"\r\n    summary=\"Dripping from faucet\"\r\n    confirmingLabel=\"Drip\"\r\n  />\r\n</template>\r\n","<script lang=\"ts\" setup>\r\nimport { orderBy } from 'lodash';\r\nimport { computed, ref } from 'vue';\r\nimport { useI18n } from 'vue-i18n';\r\n\r\nimport { ColumnDefinition } from '@/components/_global/BalTable/types';\r\n\r\nimport DripBtn from '@/components/btns/DripBtn/DripBtn.vue';\r\nimport useBreakpoints from '@/composables/useBreakpoints';\r\nimport useNumbers, { FNumFormats } from '@/composables/useNumbers';\r\nimport { useTokenLists } from '@/providers/token-lists.provider';\r\nimport { useTokens } from '@/providers/tokens.provider';\r\n\r\n/**\r\n * COMPOSABLES\r\n */\r\nconst { t } = useI18n();\r\nconst { upToLargeBreakpoint } = useBreakpoints();\r\nconst { fNum } = useNumbers();\r\nconst { defaultTokenList } = useTokenLists();\r\nconst { priceFor, balanceFor } = useTokens();\r\n\r\nconst tokens = computed(() => {\r\n  const tokensWithValues = Object.values(defaultTokenList.value.tokens)\r\n    .map(token => {\r\n      const balance = balanceFor(token.address);\r\n      const price = priceFor(token.address);\r\n      const value = Number(balance) * price;\r\n      return {\r\n        ...token,\r\n        price,\r\n        balance,\r\n        value,\r\n      };\r\n    })\r\n    .filter(t => t.address != '0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE');\r\n\r\n  return orderBy(tokensWithValues, ['value', 'balance'], ['desc', 'desc']);\r\n});\r\n\r\n/**\r\n * STATE\r\n */\r\nconst columns = ref<ColumnDefinition<any>[]>([\r\n  {\r\n    name: 'Token',\r\n    id: 'token',\r\n    accessor: 'token',\r\n    Cell: 'tokenColumnCell',\r\n    width: 475,\r\n    noGrow: true,\r\n  },\r\n  {\r\n    name: t('balance'),\r\n    id: 'Balance',\r\n    align: 'right',\r\n    width: 150,\r\n    accessor: ({ balance }) => `${fNum(balance, FNumFormats.token)}`,\r\n  },\r\n  {\r\n    name: t('value'),\r\n    id: 'value',\r\n    align: 'right',\r\n    width: 150,\r\n    accessor: ({ value }) => fNum(value, FNumFormats.fiat),\r\n  },\r\n  {\r\n    name: 'Drip',\r\n    id: 'drip',\r\n    align: 'center',\r\n    accessor: 'drip',\r\n    Cell: 'dripColumnCell',\r\n    width: 150,\r\n  },\r\n]);\r\n</script>\r\n\r\n<template>\r\n  <BalCard\r\n    shadow=\"lg\"\r\n    :square=\"upToLargeBreakpoint\"\r\n    :noBorder=\"upToLargeBreakpoint\"\r\n    noPad\r\n  >\r\n    <BalTable\r\n      :columns=\"columns\"\r\n      :data=\"tokens\"\r\n      skeletonClass=\"h-64\"\r\n      :square=\"upToLargeBreakpoint\"\r\n    >\r\n      <template #tokenColumnCell=\"{ name, logoURI }\">\r\n        <div class=\"flex items-center py-4 px-6\">\r\n          <BalAsset :iconURI=\"logoURI\" />\r\n          <span class=\"ml-2\">{{ name }}</span>\r\n        </div>\r\n      </template>\r\n      <template #dripColumnCell=\"{ address }\">\r\n        <div class=\"flex justify-center py-4 px-2\">\r\n          <DripBtn :token=\"address\" />\r\n        </div>\r\n      </template>\r\n    </BalTable>\r\n  </BalCard>\r\n</template>\r\n"],"names":["Faucet","abi","FaucetAbi","config","configService","walletService","walletServiceInstance","address","tokenAddress","faucet","computed","props","dripTx","t","useI18n","upToLargeBreakpoint","useBreakpoints","fNum","useNumbers","defaultTokenList","useTokenLists","priceFor","balanceFor","useTokens","tokens","tokensWithValues","token","balance","price","value","t2","orderBy","columns","ref","FNumFormats"],"mappings":"+4DAIO,MAAMA,CAAO,CAClB,YACmBC,EAAMC,EACNC,EAASC,EACTC,EAAgBC,EACjBC,EAAUJ,EAAO,QAAQ,UAAU,OACnD,CAJiB,KAAA,IAAAF,EACA,KAAA,OAAAE,EACA,KAAA,cAAAE,EACD,KAAA,QAAAE,EAEX,KAAK,SAAS,QAAQ,MAAM,wBAAwB,CAC3D,CAKA,MAAM,KAAKC,EAAsB,CAC/B,OAAO,MAAM,KAAK,cAAc,UAAU,SAAS,gBAAgB,CACjE,gBAAiB,KAAK,QACtB,IAAK,KAAK,IACV,OAAQ,OACR,OAAQ,CAACA,CAAY,CAAA,CACtB,CACH,CACF,CAEa,MAAAC,EAAS,IAAIT,8DCP1BQ,EAAAE,EAAA,IAAAC,EAAA,KAAA,EAKA,eAAAC,GAAA,CACE,OAAA,MAAAH,EAAA,KAAAD,EAAA,KAAA,CAA2C,2RCV7C,KAAA,CAAA,EAAAK,GAAAC,IACA,CAAA,oBAAAC,GAAAC,IACA,CAAA,KAAAC,GAAAC,IACA,CAAA,iBAAAC,GAAAC,IACA,CAAA,SAAAC,EAAA,WAAAC,CAAA,EAAAC,EAAA,EAEAC,EAAAd,EAAA,IAAA,CACE,MAAAe,EAAA,OAAA,OAAAN,EAAA,MAAA,MAAA,EAAA,IAAAO,GAAA,CAEI,MAAAC,EAAAL,EAAAI,EAAA,OAAA,EACAE,EAAAP,EAAAK,EAAA,OAAA,EACAG,EAAA,OAAAF,CAAA,EAAAC,EACA,MAAA,CAAO,GAAAF,EACF,MAAAE,EACH,QAAAD,EACA,MAAAE,CACA,CACF,CAAA,EAAA,OAAAC,GAAAA,EAAA,SAAA,4CAAA,EAIJ,OAAAC,EAAA,QAAAN,EAAA,CAAA,QAAA,SAAA,EAAA,CAAA,OAAA,MAAA,CAAA,CAAuE,CAAA,EAMzEO,EAAAC,EAAA,CAA6C,CAC3C,KAAA,QACQ,GAAA,QACF,SAAA,QACM,KAAA,kBACJ,MAAA,IACC,OAAA,EACC,EACV,CACA,KAAApB,EAAA,SAAA,EACmB,GAAA,UACb,MAAA,QACG,MAAA,IACA,SAAA,CAAA,CAAA,QAAAc,CAAA,IAAA,GAAAV,EAAAU,EAAAO,EAAA,KAAA,GACsD,EAC/D,CACA,KAAArB,EAAA,OAAA,EACiB,GAAA,QACX,MAAA,QACG,MAAA,IACA,SAAA,CAAA,CAAA,MAAAgB,CAAA,IAAAZ,EAAAY,EAAAK,EAAA,IAAA,CAC8C,EACvD,CACA,KAAA,OACQ,GAAA,OACF,MAAA,SACG,SAAA,OACG,KAAA,iBACJ,MAAA,GACC,CACT,CAAA"}