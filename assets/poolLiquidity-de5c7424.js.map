{"version":3,"file":"poolLiquidity-de5c7424.js","sources":["../../src/composables/useSlippage.ts","../../src/constants/poolLiquidity.ts"],"sourcesContent":["import { formatUnits, parseUnits } from '@ethersproject/units';\r\nimport BigNumber from 'bignumber.js';\r\nimport { computed } from 'vue';\r\n\r\nimport { bnum } from '@/lib/utils';\r\n\r\nimport { useUserSettings } from '@/providers/user-settings.provider';\r\n\r\nexport default function useSlippage() {\r\n  const { slippage } = useUserSettings();\r\n\r\n  const slippageBasisPoints = computed((): string => {\r\n    return bnum(slippage.value).times(10000).toString();\r\n  });\r\n\r\n  function minusSlippage(_amount: string, decimals: number): string {\r\n    let amount = parseUnits(_amount, decimals).toString();\r\n    amount = minusSlippageScaled(amount);\r\n\r\n    return formatUnits(amount, decimals);\r\n  }\r\n\r\n  function minusSlippageScaled(amount: string): string {\r\n    const delta = bnum(amount)\r\n      .times(slippageBasisPoints.value)\r\n      .div(10000)\r\n      .dp(0, BigNumber.ROUND_UP);\r\n\r\n    return bnum(amount).minus(delta).toString();\r\n  }\r\n\r\n  function addSlippage(_amount: string, decimals: number): string {\r\n    let amount = parseUnits(_amount, decimals).toString();\r\n    amount = addSlippageScaled(amount);\r\n\r\n    return formatUnits(amount, decimals).toString();\r\n  }\r\n\r\n  function addSlippageScaled(amount: string): string {\r\n    const delta = bnum(amount)\r\n      .times(slippageBasisPoints.value)\r\n      .div(10000)\r\n      .dp(0, BigNumber.ROUND_DOWN);\r\n\r\n    return bnum(amount).plus(delta).toString();\r\n  }\r\n\r\n  return { minusSlippage, minusSlippageScaled, addSlippage, addSlippageScaled };\r\n}\r\n","export const LOW_LIQUIDITY_THRESHOLD = 50_000;\r\nexport const HIGH_PRICE_IMPACT = 0.01;\r\nexport const REKT_PRICE_IMPACT = 0.2;\r\n"],"names":["useSlippage","slippage","useUserSettings","slippageBasisPoints","computed","bnum","minusSlippage","_amount","decimals","amount","parseUnits","minusSlippageScaled","formatUnits","delta","BigNumber","addSlippage","addSlippageScaled","LOW_LIQUIDITY_THRESHOLD","HIGH_PRICE_IMPACT","REKT_PRICE_IMPACT"],"mappings":"8EAQA,SAAwBA,GAAc,CAC9B,KAAA,CAAE,SAAAC,GAAaC,IAEfC,EAAsBC,EAAS,IAC5BC,EAAKJ,EAAS,KAAK,EAAE,MAAM,GAAK,EAAE,UAC1C,EAEQ,SAAAK,EAAcC,EAAiBC,EAA0B,CAChE,IAAIC,EAASC,EAAWH,EAASC,CAAQ,EAAE,SAAS,EACpD,OAAAC,EAASE,EAAoBF,CAAM,EAE5BG,EAAYH,EAAQD,CAAQ,CACrC,CAEA,SAASG,EAAoBF,EAAwB,CACnD,MAAMI,EAAQR,EAAKI,CAAM,EACtB,MAAMN,EAAoB,KAAK,EAC/B,IAAI,GAAK,EACT,GAAG,EAAGW,EAAU,QAAQ,EAE3B,OAAOT,EAAKI,CAAM,EAAE,MAAMI,CAAK,EAAE,UACnC,CAES,SAAAE,EAAYR,EAAiBC,EAA0B,CAC9D,IAAIC,EAASC,EAAWH,EAASC,CAAQ,EAAE,SAAS,EACpD,OAAAC,EAASO,EAAkBP,CAAM,EAE1BG,EAAYH,EAAQD,CAAQ,EAAE,SAAS,CAChD,CAEA,SAASQ,EAAkBP,EAAwB,CACjD,MAAMI,EAAQR,EAAKI,CAAM,EACtB,MAAMN,EAAoB,KAAK,EAC/B,IAAI,GAAK,EACT,GAAG,EAAGW,EAAU,UAAU,EAE7B,OAAOT,EAAKI,CAAM,EAAE,KAAKI,CAAK,EAAE,UAClC,CAEA,MAAO,CAAE,cAAAP,EAAe,oBAAAK,EAAqB,YAAAI,EAAa,kBAAAC,CAAkB,CAC9E,CChDO,MAAMC,EAA0B,IAC1BC,EAAoB,IACpBC,EAAoB"}