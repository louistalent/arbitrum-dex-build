var rt=Object.defineProperty;var ct=(o,t,n)=>t in o?rt(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n;var Ee=(o,t,n)=>(ct(o,typeof t!="symbol"?t+"":t,n),n);import{d as G,y as W,c,s as a,G as h,C as _,B as m,bA as ut,D as s,T as te,et as dt,v as e,c9 as vt,aY as pt,ak as X,o as se,K as Re,H as u,a0 as j,a2 as ne,a1 as z,a7 as ie,a8 as le,a6 as oe,ai as qe,aj as Fe,e as _e,Q as Ue,f as mt,j as De,N as gt,q as Ne,u as ue,av as _t,aB as We,az as ke,ab as ft,S as ht,z as D,eQ as ye,by as re,ds as kt,aW as yt,aT as xe,U as $,aX as ze,aZ as Oe,t as L,ah as H,p as ae,eR as O,cl as xt,eS as He,x as bt,a3 as Lt,eT as Se,I as wt,J as Bt,eU as $t,aP as be,eV as fe,eW as Vt,ce as At,_ as Le,eX as It,a as Tt,w as Ct,ag as je,af as Ze,at as Mt,F as Z,aV as Et,bW as he,ay as Qe,a9 as Nt,aC as Ke,eY as St,bv as Gt,P as Pt,aF as we,eZ as Rt,a_ as qt,Y as ce,aD as Ft,b as Ut,bn as Dt,am as Wt,aG as me,e7 as Ge}from"./index-4a1c513c.js";import{_ as Be,e as zt}from"./validations-f14f6fca.js";import{u as Ot,s as Ht}from"./useGraphQuery-caa1ada5.js";import{u as $e,o as Ve,V as jt}from"./useVotingGauges-615a5ed4.js";import{_ as Zt}from"./BalTable.vue_vue_type_style_index_0_lang-bfff8f7a.js";import{a as Qt,_ as Kt,u as Yt}from"./useLock-d1f81127.js";import{_ as Jt}from"./TokenPills.vue_vue_type_script_setup_true_lang-32c53459.js";import{_ as Ae}from"./BalAssetSet-1d81bc3d.js";import{_ as Ie}from"./useTransactionErrors-09c4ac25.js";import{_ as Xt}from"./BalCircle-e6fd1d55.js";import{_ as eo}from"./ConfirmationIndicator.vue_vue_type_script_setup_true_lang-5746d56d.js";import{f as Ye,P as to}from"./constants-f98f285a.js";import{_ as oo}from"./BalCheckbox-b97e4661.js";import{_ as so}from"./BalLoadingBlock.vue_vue_type_style_index_0_lang-3fa460ee.js";import{_ as no}from"./UnlockPreviewModal.vue_vue_type_script_setup_true_lang-5fc1f8ef.js";import"./numeral-7364357d.js";import"./usePoolQuery-b97c571a.js";import"./BalAsset-fe687731.js";import"./BalActionSteps.vue_vue_type_script_setup_true_lang-78b4efb6.js";import"./tslib.es6-b45817b3.js";const lo=["width","height"],ao=G({__name:"BalImage",props:{noFade:{type:Boolean,default:!1},width:{default:"auto"},height:{default:"auto"}},setup(o){const t=o,n=W(t.noFade),r=c(()=>({width:t.width,height:t.height}));function i(){n.value=!0}return(l,d)=>(a(),h("div",{class:"bal-image-wrapper",style:pt(e(r))},[_(vt,{name:"bal-image-fade"},{default:m(()=>[ut(s("img",te({width:t.width,height:t.height},l.$attrs,{onLoad:i}),null,16,lo),[[dt,e(n)]])]),_:1})],4))}});const io=X(ao,[["__scopeId","data-v-be08fa34"]]),ro="/assets/coins-1-c061dc58.png",co="/assets/coins-2-14d5a0bc.png",uo="/assets/coins-3-6c23888e.png",vo=o=>(qe("data-v-c7bbfba6"),o=o(),Fe(),o),po={class:"hero-container"},mo={class:"hero-content"},go={class:"py-8 lg:py-4 px-4 lg:px-8 2xl:px-0 xl:pt-0 max-w-md hero-text"},_o=vo(()=>s("p",{class:"font-medium eyebrow"},"veBAL",-1)),fo={class:"mb-5 text-white title"},ho={class:"flex mt-6"},ko={class:"coins"},yo={class:"group coin"},xo={class:"w-full coin-wrapper"},bo={class:"font-semibold caption"},Lo={class:"inline mr-1 text-sm lg:text-base tracking-tighter lg:tracking-normal"},wo={class:"group coin"},Bo={class:"coin-wrapper"},$o={class:"font-semibold caption"},Vo={class:"inline mr-1 text-sm lg:text-base tracking-tighter lg:tracking-normal"},Ao={class:"group coin"},Io={class:"coin-wrapper"},To={class:"font-semibold caption"},Co={class:"inline mr-1 text-sm lg:text-base tracking-tighter lg:tracking-normal"},Mo=G({__name:"Hero",setup(o){const{t}=se(),n=Re(),r=c(()=>[t("veBAL.hero.benefits.boost"),t("veBAL.hero.benefits.vote"),t("veBAL.hero.benefits.earn")]);function i(){n.push({name:"get-vebal",query:{returnRoute:"vebal"}})}return(l,d)=>{const v=ie,w=le,y=io,f=oe;return a(),h("div",po,[s("div",mo,[s("div",go,[_o,s("h1",fo,u(l.$t("veBAL.hero.title")),1),s("ul",null,[(a(!0),h(j,null,ne(e(r),(x,R)=>(a(),h("li",{key:R,class:"flex items-center mb-2 text-white"}," – "+u(x),1))),128))]),s("div",ho,[_(v,{class:"mr-3 hero-btn btn-gold",onClick:i},{default:m(()=>[z(u(l.$t("veBAL.hero.buttons.getVeBAL")),1)]),_:1}),_(v,{tag:"a",href:"https://docs.balancer.fi/ecosystem/vebal-and-gauges",target:"_blank",rel:"noreferrer",color:"white",class:"hero-btn",outline:""},{default:m(()=>[z(u(l.$t("veBAL.hero.buttons.learnMore"))+" ",1),_(w,{name:"arrow-up-right",size:"sm",class:"ml-px group-hover:text-pink-500 transition-colors"})]),_:1})])]),s("div",ko,[s("div",yo,[s("div",xo,[_(y,{class:"graphic",width:"330",height:"377",src:e(ro),alt:"BAL and WETH tokens"},null,8,["src"])]),s("div",bo,[s("p",Lo,u(l.$t("veBAL.hero.tokens.balWETH")),1),_(f,{iconSize:"xs",textAlign:"left",class:"mt-1 font-medium"},{default:m(()=>[z(u(l.$t("veBAL.hero.tokenInfo.balWETH")),1)]),_:1})])]),s("div",wo,[s("div",Bo,[_(y,{class:"graphic",width:"330",height:"377",src:e(co),alt:"B-80BAL-20WETH LP token"},null,8,["src"])]),s("div",$o,[s("p",Vo,u(l.$t("veBAL.hero.tokens.lpToken")),1),_(f,{iconSize:"xs",textAlign:"left",class:"mt-1"},{default:m(()=>[z(u(l.$t("veBAL.hero.tokenInfo.lpToken")),1)]),_:1})])]),s("div",Ao,[s("div",Io,[_(y,{class:"graphic",width:"330",height:"377",src:e(uo),alt:"veBAL token"},null,8,["src"])]),s("div",To,[s("p",Co,u(l.$t("veBAL.hero.tokens.veBAL")),1),_(f,{iconSize:"xs",textAlign:"left",class:"mt-1"},{default:m(()=>[z(u(l.$t("veBAL.hero.tokenInfo.veBAL")),1)]),_:1})])])])])])}}});const Eo=X(Mo,[["__scopeId","data-v-c7bbfba6"]]);function No(o){const t=gt.getMulticaller();for(const n of o)t.call(`${Ne(n)}.isKilled`,Ne(n),"is_killed");return t.execute()}function Je(o,t={}){const{networkId:n}=De(),r=c(()=>{var v;return!!((v=o.value)!=null&&v.length)}),i=_e(Ue.Gauges.Expired(o,n));async function l(){var w;const v=[];if((w=o.value)!=null&&w.length){const y=await No(o.value).catch(f=>(console.error("Error when fetching voting gauges is_killed status",{error:f}),[]));for(const[f,x]of Object.entries(y))x.isKilled&&v.push(f)}return Object.freeze(v)}const d=_e({enabled:r,...t});return mt(i,l,d)}function Te(){var E;const{account:o}=ue(),{networkConfig:t}=_t(),n=We(),{votingGauges:r}=$e(),{veBalBalance:i}=ke(),l=c(()=>!!o.value),d=Ot(Ht.gauge,Ue.Gauges.VotingEscrowLocks((E=n.data.value)==null?void 0:E.lockedAmount),()=>({votingEscrowLocks:{__args:{where:{user:o.value.toLowerCase(),votingEscrowID:ft[ht.value].addresses.veBAL.toLocaleLowerCase()}},votingEscrowID:{id:!0},updatedAt:!0}}),_e({enabled:l})),v=c(()=>{var B;return(B=d.data.value)==null?void 0:B.votingEscrowLocks}),w=c(()=>{var B;return((B=r.value)==null?void 0:B.map(N=>N.address))||[]}),{data:y}=Je(w),f=c(()=>r.value.filter(B=>{var N;return D(B.userVotes).gt(0)&&B.lastUserVoteTime<R.value&&!ye(B.lastUserVoteTime)&&!((N=y.value)!=null&&N.includes(B.address))})),x=c(()=>D(i.value).gt(0)&&!!f.value.length),R=c(()=>{var B,N;return((N=(B=v.value)==null?void 0:B.find(U=>re(U.votingEscrowID.id,t.addresses.veBAL)))==null?void 0:N.updatedAt)||0});return{votingEscrowLocks:v,lastReceivedVebal:R,gaugesUsingUnderUtilizedVotingPower:f,shouldResubmitVotes:x}}function ge(o,t=200){let n;return kt((r,i)=>({get(){return r(),o},set(l){clearTimeout(n),n=setTimeout(()=>{o=l,i()},t)}}))}const So=G({__name:"BalLazy",setup(o){const t=W(!1);return yt(()=>{t.value=!0}),(n,r)=>e(t)?xe(n.$slots,"default",{key:0}):$("",!0)}}),Go={width:"24",height:"15",viewBox:"0 0 24 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Po=["stroke"],Ro=["stroke"],qo=G({__name:"CompositionIcon",setup(o){const{theme:t}=ze(),{darkMode:n}=Oe(),r=c(()=>n.value?t.colors.white:t.colors.black);return(i,l)=>(a(),h("svg",Go,[s("circle",{cx:"7.5",cy:"7.5",r:"7",stroke:e(r)},null,8,Po),s("circle",{cx:"16.5",cy:"7.5",r:"7",stroke:e(r)},null,8,Ro)]))}}),Fo={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Uo=["stroke"],Do=["stroke"],Wo=["stroke"],zo=G({__name:"NetworkIcon",setup(o){const{theme:t}=ze(),{darkMode:n}=Oe(),r=c(()=>n.value?t.colors.white:t.colors.black);return(i,l)=>(a(),h("svg",Fo,[s("path",{d:"M9.99984 18.3333C14.6022 18.3333 18.3332 14.6023 18.3332 9.99996C18.3332 5.39759 14.6022 1.66663 9.99984 1.66663C5.39746 1.66663 1.6665 5.39759 1.6665 9.99996C1.6665 14.6023 5.39746 18.3333 9.99984 18.3333Z",stroke:e(r),"stroke-width":"1.25","stroke-linecap":"round","stroke-linejoin":"round"},null,8,Uo),s("path",{d:"M1.6665 10H18.3332",stroke:e(r),"stroke-width":"1.25","stroke-linecap":"round","stroke-linejoin":"round"},null,8,Do),s("path",{d:"M9.99984 1.66663C12.0842 3.94859 13.2688 6.90999 13.3332 9.99996C13.2688 13.0899 12.0842 16.0513 9.99984 18.3333C7.91544 16.0513 6.73088 13.0899 6.6665 9.99996C6.73088 6.90999 7.91544 3.94859 9.99984 1.66663V1.66663Z",stroke:e(r),"stroke-width":"1.25","stroke-linecap":"round","stroke-linejoin":"round"},null,8,Wo)]))}}),Oo=G({__name:"BalChipExpired",props:{size:{default:"sm"}},setup(o){const t=o;return(n,r)=>{const i=Qt;return a(),L(i,te(t,{color:"red",class:"uppercase",outline:!1}),{default:m(()=>[z(u(n.$t("expired")),1)]),_:1},16)}}}),Ho=G({__name:"GaugesTableVoteBtn",props:{isGaugeExpired:{type:Boolean},hasUserVotes:{type:Boolean}},setup(o){const t=o,n=c(()=>t.isGaugeExpired&&t.hasUserVotes),r=c(()=>t.isGaugeExpired&&!t.hasUserVotes);return(i,l)=>{const d=ie;return a(),L(d,{color:e(n)?"red":"blue",disabled:e(r),class:H(`vote-btn
      ${e(n)?"vote-btn--red":"vote-btn--blue"}`),outline:"",size:"sm",flat:"",block:""},{default:m(()=>[z(u(e(n)?i.$t("veBAL.liquidityMining.table.remove"):i.$t("veBAL.liquidityMining.table.vote")),1)]),_:1},8,["color","disabled","class"])}}});const jo=X(Ho,[["__scopeId","data-v-66414883"]]),Zo={class:"mb-2 text-sm font-semibold"},Qo={class:"text-xs font-normal"},Ko={class:"mb-2"},Yo={class:"mb-2"},Jo=G({__name:"GaugeVoteInfo",props:{gauge:null},setup(o){const t=o,{fNum:n}=ae(),r=c(()=>w(t.gauge.votes)),i=c(()=>w(t.gauge.votesNextPeriod)),l=c(()=>Number(t.gauge.votesNextPeriod)-Number(t.gauge.votes)),d=c(()=>{const y=w(l.value.toString());return`${l.value>0?"+":""}${y}`}),v=c(()=>({"text-green-600":l.value>0,"text-red-600":l.value<0}));function w(y){const f=O(D(y),-18);return n(f.toString(),{style:"percent",maximumFractionDigits:2,fixedFormat:!0})}return(y,f)=>{const x=oe;return a(),L(x,{textAlign:"left"},{activator:m(()=>[s("span",{class:H(e(v))},u(e(i)),3)]),default:m(()=>[s("div",null,[s("div",Zo,u(y.$t("veBAL.liquidityMining.votesTooltip.title")),1),s("div",Qo,[s("div",Ko,u(y.$t("veBAL.liquidityMining.votesTooltip.thisPeriod",[e(r)])),1),s("div",Yo,[z(u(y.$t("veBAL.liquidityMining.votesTooltip.nextPeriod",[e(i)]))+" ",1),s("span",{class:H(e(v))},u(e(d)),3)])])])]),_:1})}}}),Xo={},es={width:"20",height:"20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ts=s("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M17 14.2h-4.1a.5.5 0 0 0-.5.5V17a.5.5 0 0 0 .5.5H17a.5.5 0 0 0 .5-.5v-2.3a.5.5 0 0 0-.5-.5Zm-4.1-1.5a2 2 0 0 0-2 2V17a2 2 0 0 0 2 2H17a2 2 0 0 0 2-2v-2.3a2 2 0 0 0-2-2h-4.1Z",fill:"currentColor"},null,-1),os=s("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.915 10.75c-.271 0-.53.107-.72.295a.993.993 0 0 0-.295.705v1.4a.75.75 0 0 1-1.5 0v-1.4c0-.665.266-1.302.739-1.77a2.522 2.522 0 0 1 3.552 0c.472.468.738 1.105.738 1.77v1.4a.75.75 0 0 1-1.5 0v-1.4a.993.993 0 0 0-.295-.705 1.023 1.023 0 0 0-.72-.295Z",fill:"currentColor"},null,-1),ss=s("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.55 2.686a7.328 7.328 0 0 0-3.9.172 7.404 7.404 0 0 0-3.276 2.157 7.535 7.535 0 0 0-1.737 3.551 7.584 7.584 0 0 0 .294 3.954 7.501 7.501 0 0 0 2.242 3.247 7.372 7.372 0 0 0 3.556 1.637.75.75 0 1 1-.242 1.48 8.872 8.872 0 0 1-4.28-1.97 9.001 9.001 0 0 1-2.69-3.895 9.084 9.084 0 0 1-.353-4.736 9.035 9.035 0 0 1 2.084-4.258 8.904 8.904 0 0 1 3.94-2.594 8.828 8.828 0 0 1 4.698-.207 8.884 8.884 0 0 1 4.149 2.237 9.016 9.016 0 0 1 2.443 4.058.75.75 0 0 1-1.443.41A7.516 7.516 0 0 0 15 4.546a7.385 7.385 0 0 0-3.448-1.86ZM10 4.3a.75.75 0 0 1 .75.75v4.7a1 1 0 0 1-1 1h-4.7a.75.75 0 0 1 0-1.5h4.2v-4.2A.75.75 0 0 1 10 4.3Z",fill:"currentColor"},null,-1),ns=[ts,os,ss];function ls(o,t){return a(),h("svg",es,ns)}const as=X(Xo,[["render",ls]]),is={class:"font-semibold"},rs={class:"text-gray-500"},cs={class:"flex flex-col gap-1"},us={class:"font-semibold"},ds=G({__name:"GaugesTableMyVotes",props:{gauge:null},setup(o){const t=o,{t:n}=se(),{fNum:r}=ae(),{gaugesUsingUnderUtilizedVotingPower:i}=Te(),l=c(()=>{const v=O(new xt(t.gauge.userVotes),-4);return r(v.toString(),{style:"percent",maximumFractionDigits:2})}),d=c(()=>!!i.value.find(v=>re(v.address,t.gauge.address)));return(v,w)=>{const y=le;return a(),h("div",{class:H({"flex justify-end items-center":!0,"text-red-600":e(d)})},[z(u(e(l))+" ",1),e(ye)(o.gauge.lastUserVoteTime)?(a(),L(oe,{key:0,textAlign:"left"},{activator:m(()=>[_(as)]),default:m(()=>[s("div",null,[s("span",is,u(v.$t("veBAL.liquidityMining.popover.warnings.votedTooRecently.title")),1),s("p",rs,u(v.$t("veBAL.liquidityMining.popover.warnings.votedTooRecently.description",[e(He)(o.gauge.lastUserVoteTime)])),1)])]),_:1})):e(d)?(a(),L(oe,{key:1,template:"",textAlign:"left",width:"60"},{activator:m(()=>[_(y,{class:"ml-1",name:"alert-triangle",size:"sm"})]),default:m(()=>[s("div",cs,[s("span",us,u(e(n)("veBAL.liquidityMining.resubmit.hint.title")),1),s("span",null,u(e(n)("veBAL.liquidityMining.resubmit.hint.description")),1)])]),_:1})):$("",!0)],2)}}}),vs={class:"text-xs font-normal"},ps=G({__name:"IconLimit",props:{amount:{default:"1"},tooltip:{default:"Limit amount"},size:{default:"md"}},setup(o){const t=o,n=c(()=>{switch(t.size){case"sm":return"text-xxs p-0 w-5 h-5 leading-4";case"lg":return"text-md p-2 w-11 h-11";default:return"text-sm p-1 w-8 h-8"}});return(r,i)=>{const l=oe;return a(),L(l,{textAlign:"left"},{activator:m(()=>[s("div",{class:H([e(n),"inline-block font-medium text-center rounded-full border-2 border-red-600"])},u(o.amount),3)]),default:m(()=>[s("div",null,[s("div",vs,u(o.tooltip),1)])]),_:1})}}});const Pe=X(ps,[["__scopeId","data-v-20241738"]]),ms={class:"flex items-center"},gs={key:0,class:"py-4 px-6"},_s={class:"flex justify-center items-center w-8 h-8 bg-gray-50 dark:bg-gray-800 rounded shadow-sm"},fs=["src","alt"],hs={class:"flex items-center"},ks={key:0,class:"py-4 px-6"},ys={key:0,class:"flex items-center py-4 px-6"},xs={key:0,class:"flex justify-end py-4 px-6"},bs={class:"flex justify-end w-6"},Ls={key:0,class:"py-4 px-6 text-right"},ws={key:0,class:"px-4"},Bs=G({__name:"GaugesTable",props:{expiredGauges:{default:()=>[]},data:{default:()=>[]},isLoading:{type:Boolean},noPoolsLabel:{default:"No pools"},isPaginated:{type:Boolean,default:!1},filterText:{default:""}},emits:["clickedVote"],setup(o,{emit:t}){const n=o,r=Re(),{t:i}=se(),{upToLargeBreakpoint:l}=bt(),{isWalletReady:d}=ue(),v=W([{name:i("veBAL.liquidityMining.table.chain"),id:"chain",accessor:"",Header:"chainColumnHeader",Cell:"networkColumnCell",width:50,noGrow:!0},{name:i("veBAL.liquidityMining.table.assets"),id:"icons",accessor:"uri",Header:"iconColumnHeader",Cell:"iconColumnCell",width:100,noGrow:!0},{name:i("veBAL.liquidityMining.table.composition"),id:"poolComposition",accessor:"id",Cell:"poolCompositionCell",width:350},{name:i("veBAL.liquidityMining.table.nextPeriodVotes"),accessor:"id",align:"right",id:"nextPeriodVotes",Cell:"nextPeriodVotesCell",sortKey:p=>Number(p.votesNextPeriod),width:160,cellClassName:"font-numeric"},{name:i("veBAL.liquidityMining.table.myVotes"),accessor:"myVotes",align:"right",id:"myVotes",sortKey:p=>Number(p.userVotes),width:100,Cell:"myVotesCell",cellClassName:"font-numeric",hidden:!d.value},{name:i("veBAL.liquidityMining.table.vote"),id:"vote",accessor:"id",align:"right",Cell:"voteColumnCell",width:100,hidden:!d.value}]),w=c(()=>JSON.stringify(n.data));function y(p){return p.includes("balancer.fi")||p.includes("localhost")}function f(p,I){const T=fe(p.pool,p.network);if(!y(T))window.location.href=T;else{const S=r.resolve({name:"pool",params:{id:p.pool.id,networkSlug:Se(p.network)}});I?window.open(S.href):r.push(S)}}function x(p){const I=fe(p.pool,p.network);return y(I)?null:I}function R(p){return Vt(Date.now(),p*At)<2}function E(p){return!!n.expiredGauges.some(I=>re(p,I))}function B(p){return!!Number(p)}function N(p){return B(p.userVotes)&&E(p.address)?"expired-gauge-row":""}function U(p){return p.filter(I=>{var T,S;return((T=I.symbol)==null?void 0:T.toLowerCase())===((S=n.filterText)==null?void 0:S.toLowerCase())}).map(I=>I.address)}function C(p){return p.filter(I=>{var T,S;return n.filterText&&((S=I.symbol)==null?void 0:S.toLowerCase().includes((T=n.filterText)==null?void 0:T.toLowerCase()))}).map(I=>I.address)}return(p,I)=>{const T=zo,S=qo,Y=So,P=Zt,V=Le;return a(),L(V,{shadow:"lg",class:"mt-4",square:e(l),noBorder:e(l),noPad:""},{default:m(()=>[(a(),L(P,{key:e(w),columns:v.value,data:o.data,isLoading:o.isLoading,skeletonClass:"h-64",sticky:"both",square:e(l),isPaginated:o.isPaginated,href:{getHref:g=>x(g)},onRowClick:f,getTableRowClass:N,initialState:{sortColumn:"nextPeriodVotes",sortDirection:"desc"},pin:{pinOn:"address",pinnedData:["0xE867AD0a48e8f815DC0cda2CDb275e0F163A480b"]}},{chainColumnHeader:m(()=>[s("div",ms,[_(T)])]),networkColumnCell:m(({network:g})=>[o.isLoading?$("",!0):(a(),h("div",gs,[s("div",_s,[s("img",{src:e(Lt)(e(Se)(g)),alt:g,class:"w-6 h-6"},null,8,fs)])]))]),iconColumnHeader:m(()=>[s("div",hs,[_(S)])]),iconColumnCell:m(g=>[o.isLoading?$("",!0):(a(),h("div",ks,[_(Ae,{logoURIs:e(Ve)(g),width:100},null,8,["logoURIs"])]))]),poolCompositionCell:m(({pool:g,address:M,addedTimestamp:k})=>[o.isLoading?$("",!0):(a(),h("div",ys,[_(Jt,{tokens:e(wt)(g,g.tokens),isStablePool:e(Bt)(g.poolType)||e($t)(g.poolType),selectedTokens:U(g.tokens),pickedTokens:C(g.tokens)},null,8,["tokens","isStablePool","selectedTokens","pickedTokens"]),R(k)?(a(),L(Kt,{key:0,class:"ml-2"})):$("",!0),E(M)?(a(),L(Oo,{key:1,class:"ml-2"})):$("",!0)]))]),nextPeriodVotesCell:m(g=>[_(Y,null,{default:m(()=>[o.isLoading?$("",!0):(a(),h("div",xs,[_(Jo,{gauge:g},null,8,["gauge"]),s("div",bs,[g.pool.symbol==="veBAL"?(a(),L(Pe,{key:0,size:"sm",amount:"10",tooltip:p.$t("veBAL.liquidityMining.limitsTooltip.distributionsCappedVeBAL")},null,8,["tooltip"])):g.relativeWeightCap!=="null"&&g.relativeWeightCap!=="1"?(a(),L(Pe,{key:1,size:"sm",amount:(Number(g.relativeWeightCap)*100).toFixed(),tooltip:p.$t("veBAL.liquidityMining.limitsTooltip.distributionsCappedAt",[(Number(g.relativeWeightCap)*100).toFixed()])},null,8,["amount","tooltip"])):$("",!0)])]))]),_:2},1024)]),myVotesCell:m(g=>[o.isLoading?$("",!0):(a(),h("div",Ls,[_(ds,{gauge:g},null,8,["gauge"])]))]),voteColumnCell:m(g=>[e(d)?(a(),h("div",ws,[_(jo,{hasUserVotes:B(g.userVotes),isGaugeExpired:E(g.address),onClick:be(M=>t("clickedVote",g),["stop","prevent"])},null,8,["hasUserVotes","isGaugeExpired","onClick"])])):$("",!0)]),_:1},8,["columns","data","isLoading","square","isPaginated","href"]))]),_:1},8,["square","noBorder"])}}});function $s(){const o=W([]),t=W([]);function n(d){d&&d.length>0&&o.value.push(...d)}function r(d){d.validate(d.$props.modelValue),n(d.errors)}function i(d){d.forEach(v=>{v.component&&typeof v.component.proxy.validate=="function"&&t.value.push(v.component.proxy),Array.isArray(v.children)&&i(v.children)})}function l(){return o.value=[],t.value=[],i(this.$.subTree.children),t.value.forEach(d=>r(d)),!(o.value.length>0)}return{errors:o,validate:l,validateInput:r}}const Vs=G({name:"BalForm",props:{action:{type:String,default:""},method:{type:String,default:"post"}},emits:["onSubmit"],setup(){const{errors:o,validate:t,validateInput:n}=$s();return{errors:o,validate:t,validateInput:n}}}),As=["action","method"];function Is(o,t,n,r,i,l){return a(),h("form",te({action:o.action,method:o.method},o.$attrs,{onSubmit:t[0]||(t[0]=be(d=>o.$emit("onSubmit"),["prevent"]))}),[xe(o.$slots,"default")],16,As)}const Ts=X(Vs,[["render",Is]]);class Cs{constructor(t=Tt,n=Ct){Ee(this,"abi");this.config=t,this.walletService=n,this.abi=It}get address(){return this.config.network.addresses.gaugeController}async voteForManyGaugeWeights(t,n,r={}){return await this.walletService.txBuilder.contract.sendTransaction({contractAddress:this.address,abi:this.abi,action:"vote_for_many_gauge_weights",params:[t,n],options:r})}voteForGaugeWeights(t,n,r={}){return this.walletService.txBuilder.contract.sendTransaction({contractAddress:this.address,abi:this.abi,action:"vote_for_gauge_weights",params:[t,n],options:r})}}const Xe=new Cs,et=G({__name:"SubmitVoteBtn",props:{disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},receipt:{default:void 0}},emits:["click:close","click:submit"],setup(o,{emit:t}){return(n,r)=>{const i=ie;return a(),h("div",null,[o.receipt?(a(),h(j,{key:0},[_(eo,{txReceipt:o.receipt,class:"mb-2"},null,8,["txReceipt"]),o.receipt?(a(),L(i,te({key:0,color:"gray",outline:""},n.$attrs,{block:"",onClick:r[0]||(r[0]=l=>t("click:close"))}),{default:m(()=>[z(u(n.$t("getVeBAL.previewModal.returnToVeBalPage")),1)]),_:1},16)):$("",!0)],64)):(a(),L(i,te({key:1,color:"gradient",block:"",disabled:o.disabled,loading:o.loading},n.$attrs,{onClick:r[1]||(r[1]=be(l=>t("click:submit"),["prevent"]))}),{default:m(()=>[xe(n.$slots,"default")]),_:3},16,["disabled","loading"]))])}}});var K=(o=>(o.IDLE="IDLE",o.TRANSACTION_INITIALIZED="INIT",o.CONFIRMING="CONFIRMING",o.CONFIRMED="CONFIRMED",o.ERROR="ERROR",o))(K||{});function tt(){const o=W("IDLE"),t=W(""),n=W(null),r=W(null);function i(){o.value="INIT",r.value=null}function l(){o.value="CONFIRMING"}function d(w){o.value="CONFIRMED",n.value=w.receipt,t.value=w.confirmedAt}function v({title:w,description:y}){o.value="ERROR",r.value={title:w,description:y}}return{state:o,confirmedAt:t,receipt:n,error:r,setInit:i,setConfirming:l,setSuccess:d,setError:v}}const Ms={class:"flex items-center"},Es={key:0,class:"mb-4 text-sm"},Ns={class:"ml-4 list-disc text-gray-600 dark:text-gray-400"},Ss={class:"mb-1"},Gs={class:"mb-1"},Ps={class:"flex justify-between items-center p-2 mb-4 rounded-lg border dark:border-gray-800"},Rs={class:"flex gap-4 items-center h-full"},qs={class:"font-medium text-black dark:text-white"},Fs=s("div",{class:"flex flex-row justify-center items-center px-2 h-full rounded-r-lg border-gray-100 dark:border-gray-800"},[s("span",{class:"text-xl text-black dark:text-white"},"%")],-1),Us={key:0,class:"mt-2 text-sm text-secondary"},Ds=G({__name:"GaugeVoteModal",props:{gauge:null,unallocatedVoteWeight:null,logoURIs:null,poolURL:null,veBalLockInfo:{default:null}},emits:["close","success"],setup(o,{emit:t}){const n=o,r=864e5*7,{fNum:i}=ae(),{t:l}=se(),{addTransaction:d}=je(),{txListener:v,getTxConfirmedAt:w}=Ze(),{veBalBalance:y}=ke(),f=tt(),x=W(""),R=c(()=>(C.value,!!k.value||!q.value)),E=c(()=>!!k.value),B=c(()=>n.gauge.userVotes),N=c(()=>O(D(B.value),-2).toString()),U=c(()=>D(B.value).gt(0)),C=c(()=>{var A;return re(n.gauge.address,((A=jt)==null?void 0:A.address)||"")}),p=c(()=>!C.value&&n.gauge.relativeWeightCap==="null"?!1:O(n.gauge.votesNextPeriod,-18).gte(D(C.value?"0.1":n.gauge.relativeWeightCap))),I=c(()=>U.value?l("veBAL.liquidityMining.popover.title.edit"):l("veBAL.liquidityMining.popover.title.vote")),T=c(()=>U.value?l("veBAL.liquidityMining.popover.button.edit"):l("veBAL.liquidityMining.popover.button.vote")),S=c(()=>{if(ye(n.gauge.lastUserVoteTime)){const A=He(n.gauge.lastUserVoteTime);return{title:l("veBAL.liquidityMining.popover.warnings.votedTooRecently.title"),description:l("veBAL.liquidityMining.popover.warnings.votedTooRecently.description",[A])}}return null}),Y=c(()=>{const A=Date.now()+St;return Ye(Mt(new Date(A)),"d LLLL y")}),P=c(()=>Number(y.value)>0?null:{title:l("veBAL.liquidityMining.popover.warnings.noVeBal.title"),description:l("veBAL.liquidityMining.popover.warnings.noVeBal.description")}),V=c(()=>{var A,F;return(A=n.veBalLockInfo)!=null&&A.hasExistingLock&&!((F=n.veBalLockInfo)!=null&&F.isExpired)&&n.veBalLockInfo.lockedEndDate<Date.now()+r?{title:l("veBAL.liquidityMining.popover.warnings.veBalLockTooShort.title"),description:l("veBAL.liquidityMining.popover.warnings.veBalLockTooShort.description")}:null}),g=c(()=>p.value?C.value?{title:l("veBAL.liquidityMining.popover.warnings.veBalVoteOverLimitWarning.title"),description:l("veBAL.liquidityMining.popover.warnings.veBalVoteOverLimitWarning.description")}:{title:l("veBAL.liquidityMining.popover.warnings.lpVoteOverLimitWarning.title"),description:l("veBAL.liquidityMining.popover.warnings.lpVoteOverLimitWarning.description",[(Number(n.gauge.relativeWeightCap)*100).toFixed()])}:null),M=c(()=>g.value?g.value:f.error.value?f.error.value:null),k=c(()=>S.value?S.value:P.value?P.value:V.value?V.value:null),b=c(()=>f.state.value===K.TRANSACTION_INITIALIZED||f.state.value===K.CONFIRMING),q=c(()=>Ce(x.value)),J=c(()=>i(O(D(n.unallocatedVoteWeight),-4).toString(),Z.percent)),de=c(()=>q.value?["text-gray-600 dark:text-gray-400"]:["text-red-600"]),ve=c(()=>{let A;q.value?A=U.value?"veBAL.liquidityMining.popover.remainingVotesEditing":"veBAL.liquidityMining.popover.remainingVotes":A="veBAL.liquidityMining.popover.remainingVotesExceeded";const F=i(O(D(n.unallocatedVoteWeight).plus(D(B.value)),-4).toString(),Z.percent),Q=i(O(D(B.value),-4).toString(),Z.percent);return l(A,[F,Q,J.value])}),ee=[A=>!A||Ce(A)||"",zt()];function Ce(A){return A===""?!0:O(A,2).toNumber()<=n.unallocatedVoteWeight+Number(B.value)}async function ot(){const A=O(x.value,2).toString();try{f.setInit();const F=await Xe.voteForGaugeWeights(n.gauge.address,he.from(A));f.setConfirming(),st(F)}catch(F){console.error(F);const Q=F;f.setError({title:"Vote failed",description:Q.message})}}async function st(A){d({id:A.hash,type:"tx",action:"voteForGauge",summary:l("veBAL.liquidityMining.popover.voteForGauge",[i(O(x.value,-2).toString(),Z.percent),n.gauge.pool.symbol]),details:{voteWeight:x.value}}),v(A,{onTxConfirmed:async F=>{const Q=Qe(await w(F));f.setSuccess({receipt:F,confirmedAt:Q}),t("success")},onTxFailed:()=>{console.error("Vote failed"),f.setError({title:"Vote Failed",description:"Vote failed for an unknown reason"})}})}return Et(()=>{U.value&&(x.value=N.value)}),(A,F)=>{const Q=le,nt=Xt,Me=Ie,lt=Ae,at=Nt,it=Ke;return a(),L(it,{show:"",fireworks:e(f).state.value===e(K).CONFIRMED,onClose:F[2]||(F[2]=pe=>t("close"))},{header:m(()=>[s("div",Ms,[e(f).state.value===e(K).CONFIRMED?(a(),L(nt,{key:0,size:"8",color:"green",class:"mr-2 text-white"},{default:m(()=>[_(Q,{name:"check"})]),_:1})):$("",!0),s("h4",null,u(e(I)),1)])]),default:m(()=>[s("div",null,[e(M)?$("",!0):(a(),h("div",Es,[s("ul",Ns,[s("li",Ss,u(e(l)("veBAL.liquidityMining.popover.emissionsInfo")),1),s("li",Gs,u(e(l)("veBAL.liquidityMining.popover.resubmitVote")),1),s("li",null,u(e(l)("veBAL.liquidityMining.popover.voteLockInfo",[e(Y)])),1)])])),e(M)?(a(),L(Me,{key:1,type:"warning",title:e(M).title,description:e(M).description,class:"mb-4 w-full rounded"},null,8,["title","description"])):$("",!0),e(k)?(a(),L(Me,{key:2,type:"error",title:e(k).title,description:e(k).description,block:"",class:"mt-2 mb-4"},null,8,["title","description"])):$("",!0),s("div",Ps,[s("div",Rs,[_(lt,{logoURIs:o.logoURIs,width:100,size:32},null,8,["logoURIs"]),s("div",null,[s("p",qs,u(o.gauge.pool.symbol),1)])]),_(at,{href:o.poolURL,external:"",noStyle:"",class:"group flex items-center"},{default:m(()=>[_(Q,{name:"arrow-up-right",class:"text-gray-500 group-hover:text-pink-500 transition-colors"})]),_:1},8,["href"])]),_(Ts,{class:"vote-form"},{default:m(()=>[_(Be,{modelValue:x.value,"onUpdate:modelValue":F[0]||(F[0]=pe=>x.value=pe),name:"voteWeight",type:"number",autocomplete:"off",autocorrect:"off",spellcheck:"false",step:"any",placeholder:"0",validateOn:"input",rules:ee,disabled:e(E)||e(b)||e(f).state.value===e(K).CONFIRMED,size:"md",autoFocus:""},{append:m(()=>[Fs]),_:1},8,["modelValue","disabled"]),e(k)?(a(),h("div",Us,u(e(l)("veBAL.liquidityMining.popover.warnings.noVeBal.inputHintText")),1)):(a(),h("div",{key:1,class:H(["mt-2 text-sm"].concat(e(de)))},u(e(ve)),3)),_(et,{disabled:e(R),loading:e(b),class:"mt-4",loadingLabel:e(f).state.value===e(K).TRANSACTION_INITIALIZED?A.$t("veBAL.liquidityMining.popover.actions.vote.loadingLabel"):A.$t("veBAL.liquidityMining.popover.actions.vote.confirming"),"onClick:close":F[1]||(F[1]=pe=>t("close")),"onClick:submit":ot},{default:m(()=>[z(u(e(T)),1)]),_:1},8,["disabled","loading","loadingLabel"])]),_:1})])]),_:1},8,["fireworks"])}}}),Ws=o=>(qe("data-v-f4005098"),o=o(),Fe(),o),zs={class:"special-input"},Os={class:"flex gap-3"},Hs={class:"flex flex-col"},js={class:"flex flex-row flex-wrap"},Zs={class:"text-sm"},Qs=Ws(()=>s("div",{class:"flex items-center px-2 h-full"},[s("span",{class:"text-xl text-black dark:text-white"},"%")],-1)),Ks=G({__name:"VoteInput",props:{gauge:null,modelValue:{default:""}},emits:["update:modelValue"],setup(o,{emit:t}){return(n,r)=>{const i=Ae;return a(),h("div",zs,[_(Be,te({modelValue:o.modelValue},n.$attrs,{class:"mb-3",size:"auto",type:"number",name:"poolName",inputAlignRight:"",onInput:r[0]||(r[0]=l=>t("update:modelValue",l))}),{prepend:m(()=>[s("div",Os,[_(i,{logoURIs:e(Ve)(o.gauge),class:"flex-shrink-0",width:100,size:32},null,8,["logoURIs"]),s("div",Hs,[s("div",js,[(a(!0),h(j,null,ne(o.gauge.pool.tokens,(l,d)=>(a(),h("span",{key:l.address,class:"flex-shrink-0"},[z(u(Number(l.weight)?`${Number(l.weight)*100}%`:"100%")+" "+u(l.symbol),1),d!==o.gauge.pool.tokens.length-1?(a(),h(j,{key:0},[z(", ")],64)):$("",!0)]))),128))]),s("div",Zs,u(o.gauge.pool.symbol),1)])])]),append:m(()=>[Qs]),_:1},16,["modelValue"])])}}});const Ys=X(Ks,[["__scopeId","data-v-f4005098"]]),Js={class:"flex items-center"},Xs={key:2,class:"flex justify-between p-4 mt-3 total-allocation"},en={class:"p-4"},tn={class:"p-4 border-l border-gray-200 dark:border-gray-900"},on={key:3,class:"mt-3 text-sm text-red-500"},sn=G({__name:"GaugeVoteResubmitModal",emits:["close"],setup(o,{emit:t}){const{gaugesUsingUnderUtilizedVotingPower:n}=Te(),{votingGauges:r,refetch:i}=$e(),l=tt(),{t:d}=se(),{addTransaction:v}=je(),{txListener:w,getTxConfirmedAt:y}=Ze(),{fNum:f}=ae(),x=W({}),R=c(()=>n.value.slice(0,8)),E=c(()=>n.value.slice(7)),B=c(()=>{const V=n.value.map(g=>g.address);return r.value.reduce((g,M)=>V.includes(M.address)?g+Number(x.value[M.address]):g+Number(T(M.userVotes)),0)}),N=c(()=>n.value.length>8),U=c(()=>{const V=E.value.reduce((g,M)=>g+Number(M.userVotes),0);return Number(T(V))}),C=c(()=>B.value>100),p=c(()=>l.state.value===K.TRANSACTION_INITIALIZED||l.state.value===K.CONFIRMING),I=c(()=>({"total-allocation-disabled":C.value,"total-allocation mt-3 flex justify-between":!0}));function T(V){return O(D(V||"0"),-2).toString()}async function S(){console.log({otes:x.value});const V=Object.keys(x.value),g=Object.values(x.value).map(b=>he.from(O(b||"0",2).toString())),M=new Array(8-V.length).fill(Pt.ZeroAddress),k=new Array(8-V.length).fill(he.from(0));console.log({zeroAddresses:M,zeroWeights:k});try{l.setInit();const b=await Xe.voteForManyGaugeWeights([...V,...M],[...g,...k]);l.setConfirming(),P(b)}catch(b){const q=b;console.error({error:q}),l.setError({title:"Vote failed",description:q.message})}}function Y(){const V=R.value;return V.reduce((M,k,b)=>M+d("veBAL.liquidityMining.popover.voteForGauge",[f(T(x.value[k.address]),Z.percent),k.pool.symbol])+(b<V.length-1?", ":""),"")}async function P(V){v({id:V.hash,type:"tx",action:"voteForGauge",summary:Y()}),w(V,{onTxConfirmed:async g=>{const M=Qe(await y(g));l.setSuccess({receipt:g,confirmedAt:M}),i()},onTxFailed:()=>{console.error("Vote failed"),l.setError({title:"Vote Failed",description:"Vote failed for an unknown reason"})}})}return Gt(()=>{R.value.forEach(V=>{x.value[V.address]=V.userVotes?T(V.userVotes):"0"})}),(V,g)=>{const M=Ie,k=Ke;return a(),L(k,{show:"",onClose:g[1]||(g[1]=b=>t("close"))},{header:m(()=>[s("div",Js,[s("h4",null,u(e(d)("veBAL.liquidityMining.resubmit.modal.title")),1)])]),default:m(()=>[s("div",null,[e(N)?(a(),L(M,{key:0,class:"mb-4",type:"warning",title:e(d)("veBAL.liquidityMining.resubmit.modal.warning.title"),description:e(d)("veBAL.liquidityMining.resubmit.modal.warning.description")},null,8,["title","description"])):$("",!0),e(l).error.value?(a(),L(M,{key:1,type:"error",title:e(l).error.value.title,description:e(l).error.value.description,block:"",class:"mt-2 mb-4"},null,8,["title","description"])):$("",!0),(a(!0),h(j,null,ne(e(R),b=>(a(),L(Ys,{key:b.address,modelValue:x.value[b.address],"onUpdate:modelValue":q=>x.value[b.address]=q,gauge:b,disabled:e(p)},null,8,["modelValue","onUpdate:modelValue","gauge","disabled"]))),128)),e(U)?(a(),h("div",Xs,[s("div",null,u(e(d)("veBAL.liquidityMining.resubmit.modal.otherPools",e(E).length)),1),s("div",null,u(e(U))+"%",1)])):$("",!0),s("div",{class:H(e(I))},[s("div",en,u(e(d)("veBAL.liquidityMining.resubmit.modal.total")),1),s("div",tn,u(e(B))+"% ",1)],2),e(C)?(a(),h("div",on,u(e(d)("veBAL.liquidityMining.resubmit.modal.exceeding")),1)):$("",!0),_(et,{disabled:e(C),loading:e(p),class:"mt-4",loadingLabel:e(l).state.value===e(K).IDLE?V.$t("veBAL.liquidityMining.popover.actions.vote.loadingLabel"):V.$t("veBAL.liquidityMining.popover.actions.vote.confirming"),"onClick:close":g[0]||(g[0]=b=>t("close")),"onClick:submit":S},{default:m(()=>[z(u(e(d)("veBAL.liquidityMining.resubmit.modal.confirm")),1)]),_:1},8,["disabled","loading","loadingLabel"])])]),_:1})}}});const nn=X(sn,[["__scopeId","data-v-d9e258af"]]),ln={class:"flex flex-col lg:flex-row gap-2 lg:gap-4 justify-between items-baseline lg:items-start pb-1 lg:pb-0"},an={class:"mr-auto max-w-3xl"},rn=G({__name:"ResubmitVotesAlert",setup(o){const{t}=se(),n=W(!1);return(r,i)=>{const l=ie,d=Ie;return a(),h(j,null,[_(d,te(r.$attrs,{type:"warning",title:e(t)("veBAL.liquidityMining.resubmit.hint.title"),contentClass:"w-full"}),{default:m(()=>[s("div",ln,[s("div",an,u(e(t)("veBAL.liquidityMining.resubmit.resubmitWarning")),1),_(l,{color:"gradient",class:"flex-shrink-0",size:"sm",onClick:i[0]||(i[0]=v=>n.value=!0)},{default:m(()=>[z(u(e(t)("veBAL.liquidityMining.resubmit.btn")),1)]),_:1})])]),_:1},16,["title"]),(a(),L(we,{to:"#modal"},[n.value?(a(),L(nn,{key:0,onClose:i[1]||(i[1]=v=>n.value=!1)})):$("",!0)]))],64)}}}),cn={class:"flex text-gray-600 dark:text-gray-100"},un={key:0,class:"px-2"},dn={class:"flex justify-center items-center p-2 w-5 h-5 text-xs text-center text-white bg-blue-600 rounded-full"},vn={class:"flex overflow-hidden flex-col py-4 px-3 w-64 rounded-lg"},pn={class:"text-xl font-bold whitespace-nowrap"},mn={class:"py-2 text-xl font-bold"},gn=G({__name:"GaugesFilters",props:{networkFilters:null,showExpiredGauges:{type:Boolean},activeNetworkFilters:null},emits:["choose-network","update:showExpiredGauges","update:activeNetworkFilters"],setup(o,{emit:t}){const r=W([...o.activeNetworkFilters]),i=W(!1),l=W([]),d=c(()=>l.value.length+Number(i.value));function v(y){const{checked:f}=y.target;i.value=f,t("update:showExpiredGauges",f)}function w(y){const f=r.value.indexOf(y);f===-1?r.value.push(y):r.value.splice(f,1);const x=[...r.value];t("update:activeNetworkFilters",x),l.value=x}return(y,f)=>{const x=le,R=ie,E=oo,B=qt;return a(),L(B,{noPad:"",class:"flex-0"},{activator:m(()=>[_(R,{class:"flex-1 h-full",color:"white",size:"sm"},{default:m(()=>[_(x,{name:"filter",size:"lg",class:"mr-3 text-gray-600 dark:text-gray-100"}),s("div",cn,u(y.$t("gaugeFilter.moreFilters")),1),e(d)>0?(a(),h("div",un,[s("div",dn,u(e(d)),1)])):$("",!0)]),_:1})]),default:m(()=>[s("div",vn,[s("div",pn,u(y.$t("network")),1),(a(!0),h(j,null,ne(o.networkFilters,N=>(a(),h("div",{key:N,class:"flex py-1 text-base text-gray-600 dark:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-850 cursor-pointer"},[_(E,{modelValue:r.value.includes(Number(N)),name:"networkFilter",label:e(Rt)[N],noMargin:"",alignCheckbox:"items-center",onInput:U=>w(Number(N))},null,8,["modelValue","label","onInput"])]))),128)),s("div",mn,u(y.$t("gaugeFilter.gaugeDisplay")),1),_(E,{class:"flex py-1 text-base text-gray-600 dark:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-850 cursor-pointer",name:"expiredGaugesFilter",label:y.$t("gaugeFilter.showExpired"),noMargin:"",alignCheckbox:"items-center",modelValue:o.showExpiredGauges,onInput:v},null,8,["label","modelValue"])])]),_:1})}}}),_n={class:"flex flex-col"},fn={class:"flex flex-col lg:flex-row gap-4 lg:justify-between lg:items-end"},hn={class:"px-4 xl:px-0 pb-2 max-w-3xl"},kn={class:"mb-2"},yn={class:"flex flex-wrap justify-between items-end px-4 lg:px-0"},xn={class:"flex gap-2 xs:gap-3 mb-3 lg:mb-0"},bn={class:"flex items-center"},Ln=s("p",{class:"inline mr-1 text-sm text-secondary"}," My unallocated votes ",-1),wn={key:0},Bn={key:1,class:"mr-1"},$n={class:"flex items-center"},Vn={class:"text-lg font-semibold tabular-nums"},An={class:"flex mb-3 lg:mb-0"},In={class:"flex items-center h-full"},Tn=G({__name:"LMVoting",setup(o){const t=ge("",500),n=ge(!1,500),r=ge([],500),i=W(null),l=[ce.MAINNET,ce.POLYGON,ce.ARBITRUM,ce.OPTIMISM],{isLoading:d,votingGauges:v,unallocatedVotes:w,votingPeriodEnd:y,votingPeriodLastHour:f,refetch:x}=$e(),{fNum:R}=ae(),E=We(),{shouldResubmitVotes:B}=Te(),N=c(()=>{var k;return((k=v.value)==null?void 0:k.map(b=>b.address))||[]}),{data:U}=Je(N),C=c(()=>R(O(D(w.value),-4).toString(),Z.percent)),p=c(()=>d.value||!v.value?1e4:v.value.reduce((q,J)=>q-parseFloat(J.userVotes),1e4)),I=c(()=>{var k,b;return!!((k=E.data.value)!=null&&k.hasExistingLock)&&!((b=E.data.value)!=null&&b.isExpired)}),T=c(()=>{var k,b;return!!((k=E.data.value)!=null&&k.hasExistingLock)&&((b=E.data.value)==null?void 0:b.isExpired)}),S=c(()=>JSON.stringify(d.value)),Y=c(()=>n.value?v.value:v.value.filter(k=>{var b;return Number(k.userVotes)>0?!0:!((b=U.value)!=null&&b.some(q=>re(q,k.address)))})),P=c(()=>Y.value.filter(k=>{let b=!0;return r.value.length>0&&!r.value.includes(k.network)&&(b=!1),b&&k.pool.tokens.some(q=>{var J;return(J=q.symbol)==null?void 0:J.toLowerCase().includes(t.value.toLowerCase())})}));function V(k){i.value=k}function g(){i.value=null,x()}function M(){x()}return(k,b)=>{const q=oe,J=Le,de=le,ve=Be;return a(),h(j,null,[s("div",_n,[s("div",fn,[s("div",hn,[s("h3",kn,[z(u(k.$t("veBAL.liquidityMining.title"))+" ",1),_(q,{text:k.$t("veBAL.liquidityMining.description"),iconSize:"sm",iconClass:"text-gray-400 dark:text-gray-600",width:"72",class:"mt-1"},null,8,["text"])])])]),e(B)?(a(),L(rn,{key:0,class:"mx-4 xl:mx-0 mb-7"})):$("",!0),s("div",yn,[s("div",xn,[_(J,{shadow:"none",class:"p-0 md:w-48 min-w-max"},{default:m(()=>[s("div",bn,[Ln,_(q,{text:k.$t("veBAL.liquidityMining.myUnallocatedVotesTooltip"),iconClass:"text-gray-400 dark:text-gray-600",iconSize:"sm",width:"72",class:"mt-1"},null,8,["text"])]),s("p",{class:H(["inline mr-1 text-lg font-semibold",{"text-red-500":e(T)}])},[e(I)?(a(),h("span",wn,u(e(C)),1)):(a(),h("span",Bn,"—"))],2),e(T)?(a(),L(q,{key:0,text:k.$t("veBAL.liquidityMining.votingPowerExpiredTooltip"),iconSize:"sm",iconName:"alert-triangle",iconClass:"text-red-500 hover:text-red-700 dark:hover:text-red-400 transition-colors",width:"72",class:"relative top-0.5"},null,8,["text"])):$("",!0)]),_:1}),_(J,{shadow:"none",class:"md:w-48 min-w-max"},{default:m(()=>[s("div",$n,[s("p",{class:H([{"text-orange-500 font-medium":e(f)},"inline mr-1 text-sm text-secondary"])}," Voting period ends ",2),_(q,{text:k.$t("veBAL.liquidityMining.votingPeriodTooltip"),iconSize:"sm",iconClass:"text-gray-400 dark:text-gray-600",width:"72",class:"mt-1"},null,8,["text"])]),s("p",Vn,[e(y).length?(a(),h("span",{key:0,class:H({"text-orange-500":e(f)})},u(k.$t("veBAL.liquidityMining.votingPeriodCountdown",e(y))),3)):$("",!0)])]),_:1})]),s("div",An,[_(ve,{modelValue:e(t),"onUpdate:modelValue":b[0]||(b[0]=ee=>Ft(t)?t.value=ee:null),class:"mr-5",name:"tokenSearch",type:"text",placeholder:k.$t("filterByToken"),size:"sm"},{prepend:m(()=>[s("div",In,[_(de,{name:"search",size:"md",class:"px-2 text-gray-600"})])]),_:1},8,["modelValue","placeholder"]),_(gn,{networkFilters:l,showExpiredGauges:e(n),activeNetworkFilters:e(r),"onUpdate:showExpiredGauges":b[1]||(b[1]=ee=>n.value=ee),"onUpdate:activeNetworkFilters":b[2]||(b[2]=ee=>r.value=ee)},null,8,["showExpiredGauges","activeNetworkFilters"])])]),(a(),L(Bs,{key:e(S),expiredGauges:e(U),isLoading:e(d),data:e(P),noPoolsLabel:k.$t("noInvestments"),filterText:e(t),showPoolShares:"",class:"mb-8",onClickedVote:V},null,8,["expiredGauges","isLoading","data","noPoolsLabel","filterText"]))]),(a(),L(we,{to:"#modal"},[i.value?(a(),L(Ds,{key:0,gauge:i.value,logoURIs:e(Ve)(i.value),poolURL:e(fe)(i.value.pool,i.value.network),unallocatedVoteWeight:e(p),veBalLockInfo:e(E).data.value,onSuccess:M,onClose:g},null,8,["gauge","logoURIs","poolURL","unallocatedVoteWeight","veBalLockInfo"])):$("",!0)]))],64)}}}),Cn={class:"font-medium label"},Mn={key:0},En={key:1},Nn={class:"font-semibold truncate"},Sn={class:"flex items-center"},Gn={class:"font-medium secondary-value text-secondary"},Pn=G({__name:"MyVeBalCards",props:{lockablePool:null,lockablePoolTokenInfo:null,veBalLockInfo:{default:null},totalLockedValue:null},setup(o){const t=o,n=W(!1),{balanceFor:r}=Ut(),{fNum:i}=ae(),{veBalBalance:l,lockablePoolId:d}=ke(),{t:v}=se(),{isWalletReady:w}=ue(),{networkSlug:y}=De(),f=c(()=>D(t.lockablePool.totalLiquidity).div(t.lockablePool.totalShares)),x=c(()=>r(t.lockablePool.address)),R=c(()=>f.value.times(x.value).toString()),E=c(()=>{var C,p;return(C=t.veBalLockInfo)!=null&&C.hasExistingLock&&!((p=t.veBalLockInfo)!=null&&p.isExpired)?Ye(t.veBalLockInfo.lockedEndDate,to):"—"}),B=c(()=>{var C;return(C=t.veBalLockInfo)!=null&&C.isExpired?t.veBalLockInfo.lockedAmount:"0"}),N=c(()=>D(t.lockablePool.totalLiquidity).div(t.lockablePool.totalShares).times(B.value).toString()),U=c(()=>{var I,T,S;const C=(I=t.veBalLockInfo)==null?void 0:I.hasExistingLock,p=(T=t.veBalLockInfo)==null?void 0:T.isExpired;return[{id:"myLpToken",label:v("veBAL.myVeBAL.cards.myLpToken.label"),value:w.value?i(R.value,Z.fiat):"—",secondaryText:w.value?i(x.value,Z.token):"—",showPlusIcon:!!w.value,plusIconTo:{name:"add-liquidity",params:{id:d.value,networkSlug:y},query:{returnRoute:"vebal"}}},{id:"myLockedLpToken",label:v("veBAL.myVeBAL.cards.myLockedLpToken.label"),value:w.value?i(t.totalLockedValue,Z.fiat):"—",secondaryText:w.value?i(((S=t.veBalLockInfo)==null?void 0:S.lockedAmount)??"0",Z.token):"—",showPlusIcon:!!(w.value&&!p),plusIconTo:{name:"get-vebal",query:{returnRoute:"vebal"}},showUnlockIcon:!!p},{id:"lockedEndDate",label:v("veBAL.myVeBAL.cards.lockedEndDate.label"),value:E.value,secondaryText:C&&!p?v("veBAL.myVeBAL.cards.lockedEndDate.secondaryText",[Dt(new Date(E.value),new Date)]):"-",showPlusIcon:!!(C&&!p),plusIconTo:{name:"get-vebal",query:{returnRoute:"vebal"}}},{id:"myVeBAL",label:v("veBAL.myVeBAL.cards.myVeBAL.label"),secondaryText:t.veBalLockInfo&&C&&!p?v("veBAL.myVeBAL.cards.myVeBAL.secondaryText",[i(D(l.value).div(t.veBalLockInfo.totalSupply).toString(),{style:"percent",maximumFractionDigits:4})]):"-",showPlusIcon:!1,value:C?i(l.value,Z.token):"—"}]});return(C,p)=>{const I=oe,T=le,S=Wt("router-link"),Y=Le;return a(),h(j,null,[(a(!0),h(j,null,ne(e(U),P=>(a(),L(Y,{key:P.id},{default:m(()=>[s("div",Cn,u(P.label),1),s("div",{class:H(["value",P.id])},[P.id==="myLockedLpToken"?(a(),h("div",Mn,[s("span",{class:H([{"text-red-500":e(D)(e(B)).gt(0)},"mr-1 font-semibold truncate"])},u(P.value),3),e(D)(e(B)).gt(0)?(a(),L(I,{key:0,text:C.$t("veBAL.myVeBAL.cards.myExpiredLockTooltip"),iconSize:"sm",iconName:"alert-triangle",iconClass:"text-red-500 hover:text-red-700 dark:hover:text-red-400 transition-colors",width:"72",class:"relative top-0.5"},null,8,["text"])):$("",!0)])):(a(),h("div",En,[s("span",Nn,u(P.value),1)])),s("div",Sn,[P.showUnlockIcon?(a(),L(T,{key:0,name:"minus-circle",class:"mr-2 transition-all cursor-pointer minus-circle",onClick:p[0]||(p[0]=V=>n.value=!0)})):$("",!0),s("div",null,[P.showPlusIcon&&P.plusIconTo?(a(),L(S,{key:0,to:P.plusIconTo,class:"flex items-center text-blue-600 dark:text-blue-400"},{default:m(()=>[_(T,{name:"plus-circle",class:"transition-all cursor-pointer plus-circle"})]),_:2},1032,["to"])):$("",!0)])])],2),s("div",Gn,u(P.secondaryText),1)]),_:2},1024))),128)),(a(),L(we,{to:"#modal"},[n.value&&o.veBalLockInfo?(a(),L(no,{key:0,lockablePool:o.lockablePool,lockablePoolTokenInfo:o.lockablePoolTokenInfo,veBalLockInfo:o.veBalLockInfo,totalLpTokens:e(B),fiatTotalLpTokens:e(N),onClose:p[1]||(p[1]=P=>n.value=!1)},null,8,["lockablePool","lockablePoolTokenInfo","veBalLockInfo","totalLpTokens","fiatTotalLpTokens"])):$("",!0)]))],64)}}});const Rn=X(Pn,[["__scopeId","data-v-ed71e099"]]),qn={class:"mb-3"},Fn={class:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-4"},Un=G({__name:"MyVeBAL",setup(o){const{isLoadingLockPool:t,isLoadingLockInfo:n,lockPool:r,lockPoolToken:i,lock:l,totalLockedValue:d}=Yt(),{isWalletReady:v}=ue(),w=c(()=>v.value?t.value||n.value:!1);return(y,f)=>{const x=so;return a(),h(j,null,[s("h3",qn,u(y.$t("veBAL.myVeBAL.title")),1),s("div",Fn,[e(w)?(a(),h(j,{key:0},ne(4,R=>_(x,{key:R,class:"h-24"})),64)):e(r)&&e(i)?(a(),L(Rn,{key:1,veBalLockInfo:e(l),lockablePool:e(r),lockablePoolTokenInfo:e(i),totalLockedValue:e(d)},null,8,["veBalLockInfo","lockablePool","lockablePoolTokenInfo","totalLockedValue"])):$("",!0)])],64)}}}),Dn={class:"py-16 xl:py-20 bg-gray-50 dark:bg-gray-900"},Wn={key:0,class:"lg:container lg:mx-auto"},zn={class:"px-4"},On={key:1,class:"xl:container xl:px-4 pt-16 xl:pt-20 xl:mx-auto"},Hn={class:"xl:px-0 mb-16"},jn={key:2,class:"text-center"},Zn={class:"text-lg font-semibold"},_l=G({__name:"vebal",setup(o){return(t,n)=>(a(),h("div",null,[n[0]||(Ge(-1),n[0]=e(me)?(a(),L(Eo,{key:0})):$("",!0),Ge(1),n[0]),s("div",Dn,[e(me)?(a(),h("div",Wn,[s("div",zn,[_(Un)])])):$("",!0)]),e(me)?(a(),h("div",On,[s("div",Hn,[_(Tn)])])):(a(),h("div",jn,[s("div",Zn,u(t.$t("veBAL.notSupported.title")),1),s("div",null,u(t.$t("veBAL.notSupported.description")),1)]))]))}});export{_l as default};
//# sourceMappingURL=vebal-13918736.js.map
