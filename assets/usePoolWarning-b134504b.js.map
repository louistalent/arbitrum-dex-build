{"version":3,"file":"usePoolWarning-b134504b.js","sources":["../../src/composables/usePoolWarning.ts"],"sourcesContent":["import { Network } from '@balancer-labs/sdk';\r\nimport { computed, Ref } from 'vue';\r\nimport { useI18n } from 'vue-i18n';\r\nimport { networkId } from './useNetwork';\r\n\r\nexport enum PoolWarning {\r\n  PoolProtocolFeeVulnWarning = 'poolProtocolFeeVulnWarning',\r\n  PoolOwnerVulnWarningGovernanceMigrate = 'poolOwnerVulnWarningGovernanceMigrate',\r\n  PoolOwnerVulnWarningGovernanceWithdraw = 'poolOwnerVulnWarningGovernanceWithdraw',\r\n  PoolOwnerVulnWarningGovernance = 'poolOwnerVulnWarningGovernance',\r\n  PoolOwnerVulnWarningEcosystem = 'poolOwnerVulnWarningEcosystem',\r\n  PoolOwnerVulnWarningEcosystemMigrate = 'poolOwnerVulnWarningEcosystemMigrate',\r\n  RenBTCWarning = 'renBTCWarning',\r\n}\r\n\r\nconst POOL_ISSUES = {\r\n  [Network.GOERLI]: {},\r\n  [Network.MAINNET]: {\r\n    [PoolWarning.PoolProtocolFeeVulnWarning]: [\r\n      '0x5b3240b6be3e7487d61cd1afdfc7fe4fa1d81e6400000000000000000000037b',\r\n    ],\r\n    [PoolWarning.PoolOwnerVulnWarningGovernanceMigrate]: [\r\n      '0x06df3b2bbb68adc8b0e302443692037ed9f91b42000000000000000000000063',\r\n    ],\r\n    [PoolWarning.PoolOwnerVulnWarningGovernanceWithdraw]: [\r\n      '0x7b50775383d3d6f0215a8f290f2c9e2eebbeceb20000000000000000000000fe',\r\n    ],\r\n    [PoolWarning.PoolOwnerVulnWarningGovernance]: [\r\n      '0x9f19a375709baf0e8e35c2c5c65aca676c4c719100000000000000000000006e',\r\n    ],\r\n    [PoolWarning.PoolOwnerVulnWarningEcosystem]: [\r\n      '0xe7b1d394f3b40abeaa0b64a545dbcf89da1ecb3f00010000000000000000009a',\r\n      '0x3b40d7d5ae25df2561944dd68b252016c4c7b2800001000000000000000000c2',\r\n      '0xccf5575570fac94cec733a58ff91bb3d073085c70002000000000000000000af',\r\n    ],\r\n    [PoolWarning.RenBTCWarning]: [\r\n      '0xfeadd389a5c427952d8fdb8057d6c8ba1156cc56000000000000000000000066',\r\n      '0xad6a8c18b62eb914604ec1eec7fbcf132799fe090001000000000000000003f6',\r\n    ],\r\n  },\r\n  [Network.POLYGON]: {\r\n    [PoolWarning.PoolProtocolFeeVulnWarning]: [\r\n      '0xb54b2125b711cd183edd3dd09433439d5396165200000000000000000000075e',\r\n    ],\r\n    [PoolWarning.RenBTCWarning]: [\r\n      '0xfeadd389a5c427952d8fdb8057d6c8ba1156cc5600020000000000000000001e',\r\n    ],\r\n    [PoolWarning.PoolOwnerVulnWarningGovernanceMigrate]: [\r\n      '0x06df3b2bbb68adc8b0e302443692037ed9f91b42000000000000000000000012',\r\n      '0xc17636e36398602dd37bb5d1b3a9008c7629005f0002000000000000000004c4',\r\n    ],\r\n    [PoolWarning.PoolOwnerVulnWarningGovernance]: [\r\n      '0xf38cf113d2d4f60c36cbd95af2f48a9a0167045a00000000000000000000005b',\r\n      '0x0d34e5dd4d8f043557145598e4e2dc286b35fd4f000000000000000000000068',\r\n      '0x5028497af0c9a54ea8c6d42a054c0341b9fc616800020000000000000000007b',\r\n      '0xc31a37105b94ab4efca1954a14f059af11fcd9bb000000000000000000000455',\r\n    ],\r\n    [PoolWarning.PoolOwnerVulnWarningEcosystemMigrate]: [\r\n      '0xaf5e0b5425de1f5a630a8cb5aa9d97b8141c908d000200000000000000000366',\r\n    ],\r\n    [PoolWarning.PoolOwnerVulnWarningEcosystem]: [\r\n      '0xb4670d1389c758e4380c4211bcbc85342688b9c50002000000000000000003d8',\r\n    ],\r\n  },\r\n  [Network.ARBITRUM]: {\r\n    [PoolWarning.PoolOwnerVulnWarningGovernance]: [\r\n      '0x5a5884fc31948d59df2aeccca143de900d49e1a300000000000000000000006f',\r\n    ],\r\n    [PoolWarning.PoolOwnerVulnWarningEcosystem]: [\r\n      '0x0510ccf9eb3ab03c1508d3b9769e8ee2cfd6fdcf00000000000000000000005d',\r\n    ],\r\n  },\r\n  [Network.GNOSIS]: {},\r\n};\r\n\r\nconst issues = POOL_ISSUES[networkId.value];\r\n\r\nexport function usePoolWarning(poolId: Ref<string>) {\r\n  const { t } = useI18n();\r\n\r\n  /**\r\n   * Array of issue keys that poolId is affected by.\r\n   */\r\n  const issueKeys = computed((): PoolWarning[] => {\r\n    return Object.keys(issues)\r\n      .map(issueKey => issues[issueKey].includes(poolId.value) && issueKey)\r\n      .filter(issueKey => !!issueKey);\r\n  });\r\n\r\n  /**\r\n   * If any issue keys, poolId is an affected pool and we should display warnings.\r\n   */\r\n  const isAffected = computed((): boolean => {\r\n    return issueKeys.value.length > 0;\r\n  });\r\n\r\n  /**\r\n   * Array of warnings we should display for the affected poolId.\r\n   */\r\n  const warnings = computed(() => {\r\n    return issueKeys.value.map(issueKey => ({\r\n      title: t(`poolWarnings.${issueKey}.title`),\r\n      description: t(`poolWarnings.${issueKey}.description`),\r\n    }));\r\n  });\r\n\r\n  function isAffectedBy(issueKey: PoolWarning): boolean {\r\n    return issueKeys.value.includes(issueKey);\r\n  }\r\n\r\n  return {\r\n    isAffected,\r\n    warnings,\r\n    isAffectedBy,\r\n  };\r\n}\r\n"],"names":["PoolWarning","POOL_ISSUES","Network","issues","networkId","usePoolWarning","poolId","t","useI18n","issueKeys","computed","issueKey","isAffected","warnings","isAffectedBy"],"mappings":"6DAKY,IAAAA,GAAAA,IACVA,EAAA,2BAA6B,6BAC7BA,EAAA,sCAAwC,wCACxCA,EAAA,uCAAyC,yCACzCA,EAAA,+BAAiC,iCACjCA,EAAA,8BAAgC,gCAChCA,EAAA,qCAAuC,uCACvCA,EAAA,cAAgB,gBAPNA,IAAAA,GAAA,CAAA,CAAA,EAUZ,MAAMC,EAAc,CAClB,CAACC,EAAQ,MAAM,EAAG,CAAC,EACnB,CAACA,EAAQ,OAAO,EAAG,CAChB,2BAAyC,CACxC,oEACF,EACC,sCAAoD,CACnD,oEACF,EACC,uCAAqD,CACpD,oEACF,EACC,+BAA6C,CAC5C,oEACF,EACC,8BAA4C,CAC3C,qEACA,qEACA,oEACF,EACC,cAA4B,CAC3B,qEACA,oEACF,CACF,EACA,CAACA,EAAQ,OAAO,EAAG,CAChB,2BAAyC,CACxC,oEACF,EACC,cAA4B,CAC3B,oEACF,EACC,sCAAoD,CACnD,qEACA,oEACF,EACC,+BAA6C,CAC5C,qEACA,qEACA,qEACA,oEACF,EACC,qCAAmD,CAClD,oEACF,EACC,8BAA4C,CAC3C,oEACF,CACF,EACA,CAACA,EAAQ,QAAQ,EAAG,CACjB,+BAA6C,CAC5C,oEACF,EACC,8BAA4C,CAC3C,oEACF,CACF,EACA,CAACA,EAAQ,MAAM,EAAG,CAAC,CACrB,EAEMC,EAASF,EAAYG,EAAU,KAAK,EAEnC,SAASC,EAAeC,EAAqB,CAC5C,KAAA,CAAE,EAAAC,GAAMC,IAKRC,EAAYC,EAAS,IAClB,OAAO,KAAKP,CAAM,EACtB,IAAIQ,GAAYR,EAAOQ,CAAQ,EAAE,SAASL,EAAO,KAAK,GAAKK,CAAQ,EACnE,OAAmBA,GAAA,CAAC,CAACA,CAAQ,CACjC,EAKKC,EAAaF,EAAS,IACnBD,EAAU,MAAM,OAAS,CACjC,EAKKI,EAAWH,EAAS,IACjBD,EAAU,MAAM,IAAiBE,IAAA,CACtC,MAAOJ,EAAE,gBAAgBI,SAAgB,EACzC,YAAaJ,EAAE,gBAAgBI,eAAsB,CACrD,EAAA,CACH,EAED,SAASG,EAAaH,EAAgC,CAC7C,OAAAF,EAAU,MAAM,SAASE,CAAQ,CAC1C,CAEO,MAAA,CACL,WAAAC,EACA,SAAAC,EACA,aAAAC,CAAA,CAEJ"}