var w=Object.defineProperty;var g=(e,o,t)=>o in e?w(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t;var a=(e,o,t)=>(g(e,typeof o!="symbol"?o+"":o,t),t);import{fl as b,fm as P,b7 as A,fn as k,cr as i,bi as q,b as R,u as S,c as v,e as D,f as E,y as I,Q as m,fo as Q,ba as T,bp as x,a as z,P as B}from"./index-4a1c513c.js";class L{constructor(o){a(this,"repository");a(this,"queryArgs");this.tokens=o,this.repository=new b(this.buildRepositories(),{timeout:30*1e3}),this.queryArgs={}}async fetch(o){this.queryArgs=o;const[t]=await this.repository.fetch();return t}initializeDecoratedAPIRepository(){return{fetch:async()=>{const o=await P.pool.get(this.queryArgs);if(!o)throw new Error("Cannot find pool via Balancer API");return[o]},get skip(){return 0}}}initializeDecoratedSubgraphRepository(){return{fetch:async()=>{const o=await A.pools.get(this.queryArgs);return await new i(o).decorate(this.tokens.value,!0)},get skip(){return 0}}}buildRepositories(){const o=[];if(k){const s=this.initializeDecoratedAPIRepository();o.push(s)}const t=this.initializeDecoratedSubgraphRepository();return o.push(t),o}}function Y(e,o=I(!0),t={}){const s=q.findPool(e),{injectTokens:c,tokens:n}=R(),{account:l}=S(),u=new L(n),p=v(()=>o.value);function y(){return{chainId:z.network.chainId,where:{id:{eq:e==null?void 0:e.toLowerCase()},totalShares:{gt:-1},poolType:{not_in:B.ExcludedPoolTypes}}}}const h=m.Pools.Current(e),f=async()=>{let r;if(s?r=s:r=await u.fetch(y()),!r)throw new Error("Pool does not exist");if(Q(r,l.value))throw new Error("Pool not allowed");return r.onchain||([r]=await new i([r]).decorate(n.value,!1)),await c([...T(r),...x(r.tokens),r.address]),r},d=D({enabled:p,...t});return E(h,f,d)}export{Y as u};
//# sourceMappingURL=usePoolQuery-b97c571a.js.map
